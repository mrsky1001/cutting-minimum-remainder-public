var Pn=Object.defineProperty;var Bn=(t,e,n)=>e in t?Pn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var S=(t,e,n)=>(Bn(t,typeof e!="symbol"?e+"":e,n),n);import{S as it,i as at,s as lt,e as cn,b as oe,G as He,h as d,C as mn,E as qt,F as _n,k as w,l as b,W as pn,P as Fn,a2 as Rt,a as P,m as v,c as B,n as r,X as h,I as Vn,q as K,Z as wn,r as Z,_ as bn,L as pt,u as Dn,M as qn,N as Rn,O as Hn,g as N,d as U,K as In,R as yn,w as he,a3 as fe,y as J,z as Q,A as W,a4 as ge,B as $,f as Mn,a0 as On,j as Nn,o as Xn,T as Un,v as Yn}from"../chunks/index.d389ee78.js";import{c as At}from"../chunks/Indicator.svelte_svelte_type_style_lang.e2c519f7.js";function Gn(t){let e,n,a,o=[t[11],{class:n=At(t[5],t[3],t[4],t[8],t[10].class)},{src:a=t[1]},{srcset:t[2]},{alt:t[7]}],i={};for(let u=0;u<o.length;u+=1)i=qt(i,o[u]);return{c(){e=w("img"),this.h()},l(u){e=b(u,"IMG",{class:!0,src:!0,srcset:!0,alt:!0}),this.h()},h(){pn(e,i)},m(u,s){oe(u,e,s)},p(u,s){pn(e,i=Fn(o,[s&2048&&u[11],s&1336&&n!==(n=At(u[5],u[3],u[4],u[8],u[10].class))&&{class:n},s&2&&!Rt(e.src,a=u[1])&&{src:a},s&4&&{srcset:u[2]},s&128&&{alt:u[7]}]))},d(u){u&&d(e)}}}function Kn(t){let e,n,a,o,i,u;return{c(){e=w("figure"),n=w("img"),i=P(),u=w("figcaption"),this.h()},l(s){e=b(s,"FIGURE",{class:!0});var l=v(e);n=b(l,"IMG",{class:!0,src:!0,srcset:!0,alt:!0}),i=B(l),u=b(l,"FIGCAPTION",{class:!0});var m=v(u);m.forEach(d),l.forEach(d),this.h()},h(){r(n,"class",a=At(t[5],t[3],t[4],t[8],t[10].class)),Rt(n.src,o=t[1])||r(n,"src",o),r(n,"srcset",t[2]),r(n,"alt",t[7]),r(u,"class",t[9]),r(e,"class",t[6])},m(s,l){oe(s,e,l),h(e,n),h(e,i),h(e,u),u.innerHTML=t[0]},p(s,l){l&1336&&a!==(a=At(s[5],s[3],s[4],s[8],s[10].class))&&r(n,"class",a),l&2&&!Rt(n.src,o=s[1])&&r(n,"src",o),l&4&&r(n,"srcset",s[2]),l&128&&r(n,"alt",s[7]),l&1&&(u.innerHTML=s[0]),l&512&&r(u,"class",s[9]),l&64&&r(e,"class",s[6])},d(s){s&&d(e)}}}function Zn(t){let e;function n(i,u){return i[0]?Kn:Gn}let a=n(t),o=a(t);return{c(){o.c(),e=cn()},l(i){o.l(i),e=cn()},m(i,u){o.m(i,u),oe(i,e,u)},p(i,[u]){a===(a=n(i))&&o?o.p(i,u):(o.d(1),o=a(i),o&&(o.c(),o.m(e.parentNode,e)))},i:He,o:He,d(i){o.d(i),i&&d(e)}}}function Jn(t,e,n){const a=["caption","src","srcset","size","alignment","imgClass","figClass","alt","effect","captionClass"];let o=mn(e,a),{caption:i=void 0}=e,{src:u=void 0}=e,{srcset:s=void 0}=e,{size:l="max-w-full"}=e,{alignment:m=""}=e,{imgClass:c="h-auto"}=e,{figClass:f="max-w-lg"}=e,{alt:_=""}=e,{effect:x=""}=e,{captionClass:z="mt-2 text-sm text-center text-gray-500 dark:text-gray-400"}=e;return t.$$set=g=>{n(10,e=qt(qt({},e),_n(g))),n(11,o=mn(e,a)),"caption"in g&&n(0,i=g.caption),"src"in g&&n(1,u=g.src),"srcset"in g&&n(2,s=g.srcset),"size"in g&&n(3,l=g.size),"alignment"in g&&n(4,m=g.alignment),"imgClass"in g&&n(5,c=g.imgClass),"figClass"in g&&n(6,f=g.figClass),"alt"in g&&n(7,_=g.alt),"effect"in g&&n(8,x=g.effect),"captionClass"in g&&n(9,z=g.captionClass)},e=_n(e),[i,u,s,l,m,c,f,_,x,z,e,o]}class Qn extends it{constructor(e){super(),at(this,e,Jn,Zn,lt,{caption:0,src:1,srcset:2,size:3,alignment:4,imgClass:5,figClass:6,alt:7,effect:8,captionClass:9})}}class _e{constructor(e){S(this,"_a",0);S(this,"_b",0);S(this,"_c",0);S(this,"_d",0);S(this,"_h",0);S(this,"_leftDownAngle",0);S(this,"_leftDownAngleRad",0);S(this,"_rightDownAngle",0);S(this,"_rightDownAngleRad",0);S(this,"minLength");S(this,"maxLength");S(this,"minAngle");S(this,"maxAngle");S(this,"_fractionDigits",3);this._a=e.a,this._b=e.b??this._b,this._c=e.c,this._d=e.d??this._d,this._h=e.h,this._leftDownAngle=e.leftDownAngle??this._leftDownAngle,this._rightDownAngle=e.rightDownAngle??this._rightDownAngle,this.minLength=e.minLength??10,this.maxLength=e.maxLength,this.minAngle=e.minAngle??10,this.maxAngle=e.maxAngle??162,this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this._rightDownAngleRad=this._toRadians(this._rightDownAngle),this.recalculation()}changeBothBases(e){this.a=e,this.c=e}_toRadians(e){return parseFloat((e*(Math.PI/180)).toFixed(3))}_toDegree(e){return parseFloat((e*180/Math.PI).toFixed(3))}recalculation(){this._h&&(this._leftDownAngleRad&&(this.d=this._h/Math.sin(this._leftDownAngleRad)),this._a&&this._c&&(this._rightDownAngleRad=Math.abs(Math.atan(this._h/this.differenceBases)),this._rightDownAngle=this.differenceBases>0?180-this._toDegree(this._rightDownAngleRad):this._toDegree(this._rightDownAngleRad)),this._rightDownAngleRad&&(this.b=this._h/Math.sin(this._rightDownAngleRad)))}get differenceBases(){const e=this._a,n=this._c,a=this._leftDownAngle>=90?this.segmentLeftUp:-1*this.segmentLeftUp;return e-a-n}get segmentLeftUp(){const e=Math.abs(this._leftDownAngle-90);return Math.sqrt(this._h*this._h+this._d*this._d-2*this._h*this._d*Math.cos(this._toRadians(e)))}flipHorizontal(){const e=new _e(this);this._leftDownAngle=e.rightDownAngle,this._rightDownAngle=e.leftDownAngle,this._b=e.d,this._d=e.b}flipVertical(){const e=new _e(this);this._leftDownAngle=180-e.leftDownAngle,this._rightDownAngle=180-e.rightDownAngle,this._a=e.c,this._c=e.a}get isRect(){return this.a===this.c&&this.leftDownAngle===90&&this.rightDownAngle===90}get perimeter(){return this._a+this._b+this._c+this._d}get a(){return this._a}set a(e){this._a=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get b(){return this._b}set b(e){this._b=parseFloat(Number(e).toFixed(this._fractionDigits))}get c(){return this._c}set c(e){this._c=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get d(){return this._d}set d(e){this._d=parseFloat(Number(e).toFixed(this._fractionDigits))}get h(){return this._h}set h(e){this._h=parseFloat(Number(e).toFixed(this._fractionDigits))}get leftDownAngle(){return parseFloat(Number(this._leftDownAngle).toFixed(0))}set leftDownAngle(e){this._leftDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this.recalculation()}get rightDownAngle(){return parseFloat(Number(this._rightDownAngle).toFixed(0))}set rightDownAngle(e){this._rightDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._rightDownAngleRad=this._toRadians(this._rightDownAngle)}}class Fe{constructor(e){S(this,"name");S(this,"size");S(this,"_isHorizontalFlipped",!1);S(this,"_isVerticalFlipped",!1);this.name=e.name,this.size=new _e(e.size)}get isRect(){return this.size.isRect}get square(){return this.size.h*((this.size.a+this.size.c)/2)}get isHorizontalFlipped(){return this._isHorizontalFlipped}get isVerticalFlipped(){return this._isVerticalFlipped}flipHorizontal(){this.size.flipHorizontal(),this._isHorizontalFlipped=!0}flipVertical(){this.size.flipVertical(),this._isVerticalFlipped=!0}}function Wn(t){let e,n,a,o,i,u,s,l,m,c,f,_,x,z,g,L,C;const p=t[5].default,V=Vn(p,t,t[4],null);return{c(){e=w("div"),n=w("h2"),a=w("button"),o=w("span"),i=K(t[1]),u=P(),s=wn("svg"),l=wn("path"),c=P(),f=w("div"),_=w("div"),V&&V.c(),this.h()},l(E){e=b(E,"DIV",{id:!0,"data-accordion":!0});var F=v(e);n=b(F,"H2",{id:!0});var j=v(n);a=b(j,"BUTTON",{type:!0,class:!0,"data-accordion-target":!0,"aria-expanded":!0,"aria-controls":!0});var R=v(a);o=b(R,"SPAN",{});var D=v(o);i=Z(D,t[1]),D.forEach(d),u=B(R),s=bn(R,"svg",{"data-accordion-icon":!0,class:!0,"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0});var A=v(s);l=bn(A,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(l).forEach(d),A.forEach(d),R.forEach(d),j.forEach(d),c=B(F),f=b(F,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var X=v(f);_=b(X,"DIV",{class:!0});var H=v(_);V&&V.l(H),H.forEach(d),X.forEach(d),F.forEach(d),this.h()},h(){r(l,"stroke","currentColor"),r(l,"stroke-linecap","round"),r(l,"stroke-linejoin","round"),r(l,"stroke-width","2"),r(l,"d","M9 5 5 1 1 5"),r(s,"data-accordion-icon",""),r(s,"class",m="w-3 h-3 "+(t[0]?"rotate-180":"")+" shrink-0"),r(s,"aria-hidden","true"),r(s,"xmlns","http://www.w3.org/2000/svg"),r(s,"fill","none"),r(s,"viewBox","0 0 10 6"),r(a,"type","button"),r(a,"class",t[2]),r(a,"data-accordion-target","#accordion-collapse-body-1"),r(a,"aria-expanded","true"),r(a,"aria-controls","accordion-collapse-body-1"),r(n,"id","accordion-collapse-heading-1"),r(_,"class","p-5 border border-gray-200 dark:border-gray-700 dark:bg-gray-900"),r(f,"id","accordion-collapse-body-1"),r(f,"class",x=t[0]?"":"hidden"),r(f,"aria-labelledby","accordion-collapse-heading-1"),r(e,"id","accordion-collapse"),r(e,"data-accordion",z=t[0]?"open":"collapse")},m(E,F){oe(E,e,F),h(e,n),h(n,a),h(a,o),h(o,i),h(a,u),h(a,s),h(s,l),h(e,c),h(e,f),h(f,_),V&&V.m(_,null),g=!0,L||(C=pt(a,"click",t[6]),L=!0)},p(E,[F]){(!g||F&2)&&Dn(i,E[1]),(!g||F&1&&m!==(m="w-3 h-3 "+(E[0]?"rotate-180":"")+" shrink-0"))&&r(s,"class",m),(!g||F&4)&&r(a,"class",E[2]),V&&V.p&&(!g||F&16)&&qn(V,p,E,E[4],g?Hn(p,E[4],F,null):Rn(E[4]),null),(!g||F&1&&x!==(x=E[0]?"":"hidden"))&&r(f,"class",x),(!g||F&1&&z!==(z=E[0]?"open":"collapse"))&&r(e,"data-accordion",z)},i(E){g||(N(V,E),g=!0)},o(E){U(V,E),g=!1},d(E){E&&d(e),V&&V.d(E),L=!1,C()}}}function $n(t,e,n){let{$$slots:a={},$$scope:o}=e,{title:i=""}=e,{isOpen:u=!1}=e;const s=()=>n(0,u=!u);let l="flex items-center justify-between w-full p-5 font-medium text-left border border-gray-200 rounded-xl focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800";const m=()=>s();return t.$$set=c=>{"title"in c&&n(1,i=c.title),"isOpen"in c&&n(0,u=c.isOpen),"$$scope"in c&&n(4,o=c.$$scope)},t.$$.update=()=>{if(t.$$.dirty&5){const c="rounded-xl",f="rounded-t-xl",_=" bg-gray-100";u?(n(2,l=l.replace(c,f)),n(2,l+=_)):(n(2,l=l.replace(f,c)),n(2,l=l.replace(_,"")))}},[u,i,l,s,o,a,m]}class Vt extends it{constructor(e){super(),at(this,e,$n,Wn,lt,{title:1,isOpen:0})}}class zt{constructor(e){S(this,"blank");S(this,"_volume");S(this,"minVolume");S(this,"maxVolume");this.blank=new Fe(e.blank),this._volume=e.volume,this.minVolume=e.minVolume??1,this.maxVolume=e.maxVolume??100}get volume(){return this._volume}set volume(e){this._volume=Number(e)}}const jn="_app/immutable/assets/workPiece.ba374e36.png";function es(t){let e,n,a;return{c(){e=w("input"),this.h()},l(o){e=b(o,"INPUT",{id:!0,type:!0,name:!0,placeholder:!0,class:!0}),this.h()},h(){r(e,"id",t[1]),r(e,"type","text"),r(e,"name",t[1]),e.disabled=t[3],e.required=t[4],r(e,"placeholder",t[2]),e.value=t[0],r(e,"class",t[5])},m(o,i){oe(o,e,i),n||(a=[In(t[6].call(null,e)),pt(e,"change",t[11])],n=!0)},p(o,[i]){i&2&&r(e,"id",o[1]),i&2&&r(e,"name",o[1]),i&8&&(e.disabled=o[3]),i&16&&(e.required=o[4]),i&4&&r(e,"placeholder",o[2]),i&1&&e.value!==o[0]&&(e.value=o[0]),i&32&&r(e,"class",o[5])},i:He,o:He,d(o){o&&d(e),n=!1,yn(a)}}}function ts(t,e,n){let{id:a=""}=e,{placeholder:o=""}=e,{type:i="text"}=e,{disabled:u=!1}=e,{numSettings:s}=e,{required:l=!1}=e,{value:m}=e,{onChange:c=void 0}=e;const f=g=>{g.type=i};let _=`border border-gray-300 text-gray-900 text-sm rounded-lg focus:bg-[white] focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700
                                                         dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500`;u&&(_+=" bg-gray-100");const x=(g,L)=>{let C=i==="number"?Number(L):L;const p=" text-red-800 border border-red-300";(E=>!(s&&(s.min&&E<s.min||s.max&&E>s.max)))(C)?n(0,m=C):_.includes(p)||(n(5,_+=p),setTimeout(()=>{n(5,_=_.replace(p,""))},1e3)),g.value=m},z=g=>x(g.target,g.target.value);return t.$$set=g=>{"id"in g&&n(1,a=g.id),"placeholder"in g&&n(2,o=g.placeholder),"type"in g&&n(8,i=g.type),"disabled"in g&&n(3,u=g.disabled),"numSettings"in g&&n(9,s=g.numSettings),"required"in g&&n(4,l=g.required),"value"in g&&n(0,m=g.value),"onChange"in g&&n(10,c=g.onChange)},[m,a,o,u,l,_,f,x,i,s,c,z]}class Be extends it{constructor(e){super(),at(this,e,ts,es,lt,{id:1,placeholder:2,type:8,disabled:3,numSettings:9,required:4,value:0,onChange:10})}}function ns(t,e,n){const a=[],o=[],i=e.map(l=>l.blank.square+n),u=Math.min(...i),s=(l,m,c,f)=>{for(let _=l;_<m.length;_++){const x=m[_].blank.square+n,z=c-x;f.push(m[_].blank),z>=u?s(_,m,z,f):z<u&&z>=0&&a.push([...f]),f.pop()}};return s(0,e,t,o),a}function An(t,e=3){return parseFloat((t*1e-6).toFixed(e))}function ss(t,e){const i=[`Площадь не обрезанной заготовки: (${t.size.a} * ${t.size.h}) = ${parseFloat(t.square.toFixed(3))} мм² = ${An(t.square,3)} м²`,"Имя | Площадь мм²| Объем"];return e.forEach(u=>{const s=`${u.blank.name} | ${parseFloat(u.blank.square.toFixed(3))} | ${u.volume}`;i.push(s)}),i}const is=t=>{const e=t.stockSawing*2*t.rawWorkPiece.size.h,n=[];n.push(`
===> Этап 0. Подготовка данных и коэффициентов `),n.push(`Припуск распила: ${t.stockSawing}`),n.push(`Площадь припуска распила: ${e} мм² = ${An(e)} м²`),n.push(`
Таблица заготовок и их параметров`),n.push(...ss(t.rawWorkPiece,t.listOrders));const a=ns(t.rawWorkPiece.square,t.listOrders,e);return n.push(`
===> Этап 0. Шаг 1. Варианты раскроя изделия исходя из начальных условий.`),n.push(`Количество комбинаций: ${a.length}`),console.log(n),console.log(a),{listLogMessages:n,cuttingCombinations:a}};function as(t){let e,n;return{c(){e=w("label"),n=K(t[1]),this.h()},l(a){e=b(a,"LABEL",{for:!0,class:!0});var o=v(e);n=Z(o,t[1]),o.forEach(d),this.h()},h(){r(e,"for",t[0]),r(e,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white")},m(a,o){oe(a,e,o),h(e,n)},p(a,[o]){o&2&&Dn(n,a[1]),o&1&&r(e,"for",a[0])},i:He,o:He,d(a){a&&d(e)}}}function ls(t,e,n){let{forName:a}=e,{text:o}=e;return t.$$set=i=>{"forName"in i&&n(0,a=i.forName),"text"in i&&n(1,o=i.text)},[a,o]}class os extends it{constructor(e){super(),at(this,e,ls,as,lt,{forName:0,text:1})}}function rs(t){let e,n,a,o,i;e=new os({props:{forName:t[1],text:t[6]}});function u(l){t[7](l)}let s={id:t[1],type:t[3],placeholder:t[2],required:t[4],onChange:t[5]};return t[0]!==void 0&&(s.value=t[0]),a=new Be({props:s}),he.push(()=>fe(a,"value",u)),{c(){J(e.$$.fragment),n=P(),J(a.$$.fragment)},l(l){Q(e.$$.fragment,l),n=B(l),Q(a.$$.fragment,l)},m(l,m){W(e,l,m),oe(l,n,m),W(a,l,m),i=!0},p(l,[m]){const c={};m&2&&(c.forName=l[1]),m&64&&(c.text=l[6]),e.$set(c);const f={};m&2&&(f.id=l[1]),m&8&&(f.type=l[3]),m&4&&(f.placeholder=l[2]),m&16&&(f.required=l[4]),m&32&&(f.onChange=l[5]),!o&&m&1&&(o=!0,f.value=l[0],ge(()=>o=!1)),a.$set(f)},i(l){i||(N(e.$$.fragment,l),N(a.$$.fragment,l),i=!0)},o(l){U(e.$$.fragment,l),U(a.$$.fragment,l),i=!1},d(l){$(e,l),l&&d(n),$(a,l)}}}function us(t,e,n){let{id:a=""}=e,{placeholder:o=""}=e,{type:i="text"}=e,{required:u=!1}=e,{value:s}=e,{onChange:l=void 0}=e,{label:m=""}=e;function c(f){s=f,n(0,s)}return t.$$set=f=>{"id"in f&&n(1,a=f.id),"placeholder"in f&&n(2,o=f.placeholder),"type"in f&&n(3,i=f.type),"required"in f&&n(4,u=f.required),"value"in f&&n(0,s=f.value),"onChange"in f&&n(5,l=f.onChange),"label"in f&&n(6,m=f.label)},[s,a,o,i,u,l,m,c]}class Dt extends it{constructor(e){super(),at(this,e,us,rs,lt,{id:1,placeholder:2,type:3,required:4,value:0,onChange:5,label:6})}}class _t{constructor(e){S(this,"_name");S(this,"_square");S(this,"_p1");S(this,"_p2");S(this,"_p3");S(this,"_p4");S(this,"_wP1P2");S(this,"_wP2P3");S(this,"_wP3P4");S(this,"_wP4P1");S(this,"_h");S(this,"_colorBody");S(this,"_colorContour");S(this,"_colorTextLegend");S(this,"_colorContourLegend");S(this,"isHorizontalFlipped");S(this,"isVerticalFlipped");S(this,"isShowBodyText");S(this,"isShowBaseContour");S(this,"isShowSideContour");S(this,"baseSpace");S(this,"sideSpace");S(this,"halfYBoard");S(this,"halfXBoard");S(this,"wDivider");S(this,"hDivider");this._name=e.name,this._square=e.square,this._p1={x:e.p1.x,y:e.p1.y},this._p2={x:e.p2.x,y:e.p2.y},this._p3={x:e.p3.x,y:e.p3.y},this._p4={x:e.p4.x,y:e.p4.y},this._wP1P2=e.wP1P2,this._wP2P3=e.wP2P3,this._wP3P4=e.wP3P4,this._wP4P1=e.wP4P1,this._h=e.h,this.isHorizontalFlipped=e.isHorizontalFlipped!==void 0?e.isHorizontalFlipped:!1,this.isVerticalFlipped=e.isVerticalFlipped!==void 0?e.isVerticalFlipped:!1,this.isShowBodyText=e.isShowBodyText!==void 0?e.isShowBodyText:!0,this.isShowBaseContour=e.isShowBaseContour!==void 0?e.isShowBaseContour:!0,this.isShowSideContour=e.isShowSideContour!==void 0?e.isShowSideContour:!0,this.baseSpace=e.baseSpace??20,this.sideSpace=e.sideSpace??20,this.halfXBoard=e.halfXBoard??250,this.halfYBoard=e.halfYBoard??50,this.wDivider=e.wDivider??2,this.hDivider=e.hDivider??2,this._colorBody=e.colorBody??"#d1ffd8",this._colorContour=e.colorContour??"#B70A02",this._colorTextLegend=e.colorTextLegend??"black",this._colorContourLegend=e.colorContourLegend??"gray"}get perimeter(){return this._wP1P2+this._wP2P3+this._wP3P4+this._wP4P1}get colorTextLegend(){return this._colorTextLegend}get colorContourLegend(){return this._colorContourLegend}get colorBody(){return this._colorBody}get name(){return this._name}get square(){return this._square}get p1(){return this._p1}get p2(){return this._p2}get p3(){return this._p3}get p4(){return this._p4}get wP1P2(){return this._wP1P2}get wP2P3(){return this._wP2P3}get wP3P4(){return this._wP3P4}get wP4P1(){return this._wP4P1}get h(){return this._h}get colorContour(){return this._colorContourLegend}}function hs(t,e=3){return parseFloat((t*1e-6).toFixed(e))}const yt={REMAINS:"Ост.",STOCK:"п."},kn=(t,e,n,a,o)=>{const i=o>0?1:-1;return{x:t-i*Math.sqrt(Math.abs(a*a-(e-n)*(e-n))),y:n}},fs=(t,e,n,a=!1)=>{const o=[],i=(s,l,m)=>{if(l){if(l.size.rightDownAngle<90){if(s.size.leftDownAngle>=90){const C=l.size.rightDownAngle+s.size.leftDownAngle;if(s.size.rightDownAngle>=90){const p=l.size.rightDownAngle+s.size.rightDownAngle;(C>=p||p>180)&&C<=180||p<=180&&s.flipHorizontal()}else if(s.size.rightDownAngle<90){const p=l.size.rightDownAngle+180-s.size.rightDownAngle;(C>=p||p>180)&&C<=180||p<=180&&(s.flipHorizontal(),s.flipVertical())}}else if(s.size.leftDownAngle<90){const C=l.size.rightDownAngle+180-s.size.leftDownAngle;if(s.size.rightDownAngle>=90){const p=l.size.rightDownAngle+s.size.rightDownAngle;(C>=p||p>180)&&C<=180?s.flipVertical():p<=180&&s.flipHorizontal()}else if(s.size.rightDownAngle<90){const p=l.size.rightDownAngle+180-s.size.rightDownAngle;(C>=p||p>180)&&C<=180?s.flipVertical():p<=180&&(s.flipHorizontal(),s.flipVertical())}}}else if(l.size.rightDownAngle>90){if(s.size.leftDownAngle>=90){const C=l.size.rightDownAngle+180-s.size.leftDownAngle;if(s.size.rightDownAngle>=90){const p=l.size.rightDownAngle+180-s.size.rightDownAngle;(C>=p||p>180)&&C<=180?s.flipVertical():p<=180&&(s.flipVertical(),s.flipHorizontal())}else if(s.size.rightDownAngle<90){const p=l.size.rightDownAngle+180-s.size.rightDownAngle;(C>=p||p>180)&&C<=180?s.flipVertical():p<=180&&s.flipHorizontal()}}else if(s.size.leftDownAngle<90){const C=l.size.rightDownAngle+s.size.leftDownAngle;if(s.size.rightDownAngle>=90){const p=l.size.rightDownAngle+180-s.size.rightDownAngle;(C>=p||p>180)&&C<=180||p<=180&&(s.flipVertical(),s.flipHorizontal())}else if(s.size.rightDownAngle<90){const p=l.size.rightDownAngle+s.size.rightDownAngle;(C>=p||p>180)&&C<=180||p<=180&&s.flipHorizontal()}}}}const f={x:m?m.p2.x:0,y:0},_={x:f.x+s.size.a,y:0},x={x:_.x,y:s.size.h},z=s.isRect?x:kn(_.x,_.y,x.y,s.size.b,s.size.differenceBases),g={x:z.x-s.size.c,y:z.y},L=(m==null?void 0:m.p3.x)-g.x;return L>0&&(f.x+=L,_.x+=L,z.x+=L,g.x+=L),new _t({name:s.name,square:s.square,p1:f,p2:_,p3:z,p4:g,wP1P2:s.size.a,wP2P3:s.size.b,wP3P4:s.size.c,wP4P1:s.size.d,h:s.size.h,isHorizontalFlipped:s.isHorizontalFlipped,isVerticalFlipped:s.isVerticalFlipped,colorContourLegend:"gray",colorBody:"#d1ffd8",isShowSideContour:!1,baseSpace:30,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4})},u=(s,l)=>{const m={...s.p2},c={x:m.x+l.size.a,y:m.y},f={...s.p3},_={x:f.x+l.size.c,y:f.y};return new _t({name:l.name,square:l.square,p1:m,p2:c,p3:_,p4:f,wP1P2:l.size.a,wP2P3:l.size.b,wP3P4:l.size.c,wP4P1:l.size.d,h:l.size.h,isShowBodyText:!1,colorContourLegend:"gray",colorBody:"lightgray",isShowSideContour:!1,baseSpace:5,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4})};return n.forEach((s,l)=>{const m={num:s.num,volume:s.volume,combination:[]};let c,f;console.log("row",l),s.cuttingCombination.forEach((_,x)=>{if(console.log("col",x),t&&c&&x>0&&c.perimeter===_.size.perimeter&&(c.wP1P2===_.size.a||c.wP1P2===_.size.c)){console.log("stockSawing draw");const L=new Fe({name:yt.STOCK,size:new _e({a:t,c:t,b:f.size.b,d:f.size.b,h:c.h,leftDownAngle:180-f.size.rightDownAngle,rightDownAngle:f.size.rightDownAngle,maxLength:t})}),C=u(c,L);m.combination.push(C),c=C,f=L}const z=new Fe(_),g=i(z,f,c);if(c&&c.wP1P2!==t&&(c.perimeter!==_.size.perimeter||c.perimeter===_.size.perimeter&&c.wP1P2!==_.size.a&&c.wP1P2!==_.size.c)){const L=g.wP4P1,C=c.wP2P3,p=g.p1.x-c.p2.x+t,V=L*C*Math.sign(180-z.size.leftDownAngle-f.size.rightDownAngle),E=new Fe({name:yt.STOCK,size:new _e({a:p,c:t,b:L,d:C,h:c.h,leftDownAngle:180-f.size.rightDownAngle,rightDownAngle:180-z.size.leftDownAngle,maxLength:t})}),F={...c.p2},j={x:F.x+p,y:F.y},R={x:c.p3.x,y:E.size.h},D={x:R.x+t,y:R.y},A=new _t({name:yt.REMAINS,square:V,p1:F,p2:j,p3:D,p4:R,wP1P2:E.size.a,wP2P3:E.size.b,wP3P4:E.size.c,wP4P1:E.size.d,h:E.size.h,colorContourLegend:"gray",colorBody:"lightgray",isShowSideContour:!1,baseSpace:10,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4});m.combination.push(A),f=E,c=A;const X=i(z,f,c);X&&m.combination.push(X),f=z,c=X}else g&&m.combination.push(g),f=z,c=g}),o.push(m)}),o},Ht=(t,e)=>{const n=u=>u/t.wDivider+t.halfXBoard,a=u=>u/t.hDivider+t.halfYBoard,i=(u,s)=>{s.setLineDash([5,3]),s.textBaseline="bottom",s.lineDashOffset=1,s.strokeStyle=u.colorContourLegend,s.fillStyle=u.colorTextLegend,s.beginPath();const l=(x,z,g,L=0,C=0)=>{s.setLineDash([5,3]),s.beginPath(),s.moveTo(n(x.x),a(x.y)),s.lineTo(n(x.x)+L,a(x.y)+C),s.lineTo(n(z.x)+L,a(z.y)+C),s.lineTo(n(z.x),a(z.y)),s.stroke(),s.closePath()},m=(x,z,g,L=-u.baseSpace)=>{l(x,z,g,0,L);const C=parseFloat(g.toFixed(1)),p=` ${C} мм`,V=L>0?L+15:L-5,E=C>100?p.length:-5,F={x:(n(z.x)+n(x.x))/2-E,y:(a(z.y)+a(x.y))/2+V};s.fillText(p,F.x,F.y)},c=(x,z,g,L=30)=>{l(x,z,g,L);const C=L>0?L*3:L*4,p={x:(n(z.x)+n(x.x))/2+C,y:(a(z.y)+a(x.y))/2};s.fillText(` ${g} мм`,p.x,p.y)},f=(x,z,g)=>{m(x,z,g,u.baseSpace)},_=(x,z,g)=>{c(x,z,g,-u.baseSpace)};u.isShowBaseContour&&(m(u.p1,u.p2,u.wP1P2),f(u.p3,u.p4,u.wP3P4)),u.isShowSideContour&&(c(u.p2,u.p3,u.wP2P3),_(u.p4,u.p1,u.wP4P1))};if(e.strokeStyle=t.colorContour,e.fillStyle=t.colorBody,e.beginPath(),e.setLineDash([]),e.moveTo(n(t.p1.x),a(t.p1.y)),e.lineTo(n(t.p1.x),a(t.p1.y)),e.lineTo(n(t.p2.x),a(t.p2.y)),e.lineTo(n(t.p3.x),a(t.p3.y)),e.lineTo(n(t.p4.x),a(t.p4.y)),e.lineTo(n(t.p1.x),a(t.p1.y)),e.stroke(),e.fill(),t.isShowBodyText){e.fillStyle=t.colorTextLegend;const u=t.isHorizontalFlipped?"( ⇆ )":"",s=t.isVerticalFlipped?"( ⇅ )":"",l=hs(t.square),m=` S=${l} м² ${u} ${s}`;if(t.name===yt.REMAINS&&l>0){const f={x:n(t.p1.x)+10,y:a(t.h)/2-10};e.fillText(m,f.x,f.y),e.setLineDash([5,3]),e.beginPath(),e.moveTo(f.x,f.y),e.lineTo(n(t.p1.x+40),a(t.p1.y)),e.stroke(),e.closePath()}else{const c=(n(t.p2.x)+n(t.p1.x))/2-m.length*2,f=(n(t.p3.x)+n(t.p4.x))/2,_={x:2*c*f/(c+f),y:a(t.h)/2+t.halfYBoard/2};e.fillText(m,_.x,_.y)}e.closePath()}i(t,e)},gs=(t,e,n)=>{},Cn=t=>{for(;t!=null&&t.firstChild&&t.lastChild;)t.removeChild(t.lastChild)},ds=t=>new _t({name:"rawPiece",square:t.square,p1:{x:0,y:0},p2:{x:t.size.a,y:0},p3:{x:t.size.a,y:t.size.h},p4:{x:0,y:t.size.h},wP1P2:t.size.a,wP2P3:t.size.b,wP3P4:t.size.c,wP4P1:t.size.d,h:t.size.h,colorBody:"lightgray",isShowBodyText:!1,isShowSideContour:!1,baseSpace:60,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4}),Sn=(t,e=1200,n=300)=>{const a=t.appendChild(document.createElement("div"));a.className="flex flex-row justify-around items-center";const o=a.appendChild(document.createElement("canvas")),i=o.getContext("2d");return o.width=e,o.height=n,i};function cs(t,e,n,a){const o=document.getElementById(t);o&&(Cn(o),fs(e,n,a).forEach((i,u)=>{gs(i.num);const s=Sn(o);Ht(ds(n),s),i.combination.forEach((l,m)=>{Ht(l,s)}),s.beginPath(),s.fillStyle="black",s.fillText(`ROW N ${u} COLS ${i.combination.length}`,20,20),s.stroke(),s.fill(),s.closePath()}))}function ms(t,e){const n=document.getElementById(t);if(n){Cn(n);const a=Sn(n,1e3,200),o={x:0,y:0},i={x:o.x+e.size.a,y:0},u={x:i.x,y:e.size.h},s=e.isRect?u:kn(i.x,i.y,u.y,e.size.b,e.size.differenceBases),l={x:s.x-e.size.c,y:s.y},m=new _t({name:e.name,square:e.square,p1:o,p2:i,p3:s,p4:l,wP1P2:e.size.a,wP2P3:e.size.b,wP3P4:e.size.c,wP4P1:e.size.d,h:e.size.h,isHorizontalFlipped:e.isHorizontalFlipped,isVerticalFlipped:e.isVerticalFlipped});Ht(m,a)}}function vn(t,e,n){const a=t.slice();return a[22]=e[n],a[23]=e,a[24]=n,a}function zn(t){let e,n,a=t[24]+1+"",o,i,u,s,l,m,c,f,_,x,z,g,L,C,p,V,E,F,j,R,D,A,X,H,pe,Ie,we,ee,Me,be,se,re,Oe,te,ne,de,ve,ue,ce;function M(y){t[10](y,t[22])}let ze={type:"text",id:"namePiece",placeholder:"Наименования детали..."};t[22].blank.name!==void 0&&(ze.value=t[22].blank.name),s=new Be({props:ze}),he.push(()=>fe(s,"value",M));function ot(y){t[11](y,t[22])}let Ge={type:"number",numSettings:{min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength},id:"lengthAPiece",placeholder:"Длина верхнего основания детали..."};t[22].blank.size.a!==void 0&&(Ge.value=t[22].blank.size.a),f=new Be({props:Ge}),he.push(()=>fe(f,"value",ot));function Ee(y){t[12](y,t[22])}let Ke={id:"lengthBPiece",type:"number",numSettings:{min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength},disabled:!0,placeholder:"Длина правой стороны детали..."};t[22].blank.size.b!==void 0&&(Ke.value=t[22].blank.size.b),g=new Be({props:Ke}),he.push(()=>fe(g,"value",Ee));function rt(y){t[13](y,t[22])}let De={id:"lengthCPiece",type:"number",numSettings:{min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength},placeholder:"Длина нижнего основания детали..."};t[22].blank.size.c!==void 0&&(De.value=t[22].blank.size.c),V=new Be({props:De}),he.push(()=>fe(V,"value",rt));function ut(y){t[14](y,t[22])}let Ze={id:"lengthDPiece",type:"number",disabled:!0,numSettings:{min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength},placeholder:"Длина левой стороны детали..."};t[22].blank.size.d!==void 0&&(Ze.value=t[22].blank.size.d),R=new Be({props:Ze}),he.push(()=>fe(R,"value",ut));function Te(y){t[15](y,t[22])}let Je={id:"leftDownAngle",type:"number",numSettings:{min:t[22].blank.size.minAngle,max:t[22].blank.size.maxAngle},placeholder:"Левый угол при нижнем основании детали..."};t[22].blank.size.leftDownAngle!==void 0&&(Je.value=t[22].blank.size.leftDownAngle),H=new Be({props:Je}),he.push(()=>fe(H,"value",Te));function ht(y){t[16](y,t[22])}let ye={id:"rightDownAngle",type:"number",disabled:!0,numSettings:{min:t[22].blank.size.minAngle,max:t[22].blank.size.maxAngle},placeholder:"Правый угол при нижнем основании детали..."};t[22].blank.size.rightDownAngle!==void 0&&(ye.value=t[22].blank.size.rightDownAngle),ee=new Be({props:ye}),he.push(()=>fe(ee,"value",ht));function ft(y){t[17](y,t[22])}let Qe={id:"volumePiece",type:"number",numSettings:{min:t[22].minVolume,max:t[22].maxVolume},placeholder:"Количество деталей данного типа..."};return t[22].volume!==void 0&&(Qe.value=t[22].volume),re=new Be({props:Qe}),he.push(()=>fe(re,"value",ft)),{c(){e=w("tr"),n=w("th"),o=K(a),i=P(),u=w("td"),J(s.$$.fragment),m=P(),c=w("td"),J(f.$$.fragment),x=P(),z=w("td"),J(g.$$.fragment),C=P(),p=w("td"),J(V.$$.fragment),F=P(),j=w("td"),J(R.$$.fragment),A=P(),X=w("td"),J(H.$$.fragment),Ie=P(),we=w("td"),J(ee.$$.fragment),be=P(),se=w("td"),J(re.$$.fragment),te=P(),ne=w("tr"),de=w("td"),ve=w("div"),ue=P(),this.h()},l(y){e=b(y,"TR",{class:!0});var T=v(e);n=b(T,"TH",{scope:!0,class:!0});var Le=v(n);o=Z(Le,a),Le.forEach(d),i=B(T),u=b(T,"TD",{class:!0});var ie=v(u);Q(s.$$.fragment,ie),ie.forEach(d),m=B(T),c=b(T,"TD",{class:!0});var Ae=v(c);Q(f.$$.fragment,Ae),Ae.forEach(d),x=B(T),z=b(T,"TD",{class:!0});var ke=v(z);Q(g.$$.fragment,ke),ke.forEach(d),C=B(T),p=b(T,"TD",{class:!0});var ae=v(p);Q(V.$$.fragment,ae),ae.forEach(d),F=B(T),j=b(T,"TD",{class:!0});var Ce=v(j);Q(R.$$.fragment,Ce),Ce.forEach(d),A=B(T),X=b(T,"TD",{class:!0});var Se=v(X);Q(H.$$.fragment,Se),Se.forEach(d),Ie=B(T),we=b(T,"TD",{class:!0});var le=v(we);Q(ee.$$.fragment,le),le.forEach(d),be=B(T),se=b(T,"TD",{class:!0});var We=v(se);Q(re.$$.fragment,We),We.forEach(d),T.forEach(d),te=B(y),ne=b(y,"TR",{class:!0});var Ne=v(ne);de=b(Ne,"TD",{class:!0,colspan:!0});var Pe=v(de);ve=b(Pe,"DIV",{id:!0,class:!0}),v(ve).forEach(d),Pe.forEach(d),ue=B(Ne),Ne.forEach(d),this.h()},h(){r(n,"scope","row"),r(n,"class","px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"),r(u,"class","min-w-[150px] pr-6 py-4 border-r"),r(c,"class","px-6 py-4"),r(z,"class","px-6 py-4"),r(p,"class","px-6 py-4"),r(j,"class","px-6 py-4"),r(X,"class","px-6 py-4"),r(we,"class","px-6 py-4"),r(se,"class","w-[20px] border-l px-6 py-4"),r(e,"class","bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-[gray]/5 dark:hover:bg-gray-600"),r(ve,"id","containerPieceCanvas"+t[24]),r(ve,"class","flex flex-col"),r(de,"class","px-6 py-4"),r(de,"colspan","200"),r(ne,"class","bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-[gray]/5 dark:hover:bg-gray-600")},m(y,T){oe(y,e,T),h(e,n),h(n,o),h(e,i),h(e,u),W(s,u,null),h(e,m),h(e,c),W(f,c,null),h(e,x),h(e,z),W(g,z,null),h(e,C),h(e,p),W(V,p,null),h(e,F),h(e,j),W(R,j,null),h(e,A),h(e,X),W(H,X,null),h(e,Ie),h(e,we),W(ee,we,null),h(e,be),h(e,se),W(re,se,null),oe(y,te,T),oe(y,ne,T),h(ne,de),h(de,ve),h(ne,ue),ce=!0},p(y,T){t=y;const Le={};!l&&T&4&&(l=!0,Le.value=t[22].blank.name,ge(()=>l=!1)),s.$set(Le);const ie={};T&4&&(ie.numSettings={min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength}),!_&&T&4&&(_=!0,ie.value=t[22].blank.size.a,ge(()=>_=!1)),f.$set(ie);const Ae={};T&4&&(Ae.numSettings={min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength}),!L&&T&4&&(L=!0,Ae.value=t[22].blank.size.b,ge(()=>L=!1)),g.$set(Ae);const ke={};T&4&&(ke.numSettings={min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength}),!E&&T&4&&(E=!0,ke.value=t[22].blank.size.c,ge(()=>E=!1)),V.$set(ke);const ae={};T&4&&(ae.numSettings={min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength}),!D&&T&4&&(D=!0,ae.value=t[22].blank.size.d,ge(()=>D=!1)),R.$set(ae);const Ce={};T&4&&(Ce.numSettings={min:t[22].blank.size.minAngle,max:t[22].blank.size.maxAngle}),!pe&&T&4&&(pe=!0,Ce.value=t[22].blank.size.leftDownAngle,ge(()=>pe=!1)),H.$set(Ce);const Se={};T&4&&(Se.numSettings={min:t[22].blank.size.minAngle,max:t[22].blank.size.maxAngle}),!Me&&T&4&&(Me=!0,Se.value=t[22].blank.size.rightDownAngle,ge(()=>Me=!1)),ee.$set(Se);const le={};T&4&&(le.numSettings={min:t[22].minVolume,max:t[22].maxVolume}),!Oe&&T&4&&(Oe=!0,le.value=t[22].volume,ge(()=>Oe=!1)),re.$set(le)},i(y){ce||(N(s.$$.fragment,y),N(f.$$.fragment,y),N(g.$$.fragment,y),N(V.$$.fragment,y),N(R.$$.fragment,y),N(H.$$.fragment,y),N(ee.$$.fragment,y),N(re.$$.fragment,y),ce=!0)},o(y){U(s.$$.fragment,y),U(f.$$.fragment,y),U(g.$$.fragment,y),U(V.$$.fragment,y),U(R.$$.fragment,y),U(H.$$.fragment,y),U(ee.$$.fragment,y),U(re.$$.fragment,y),ce=!1},d(y){y&&d(e),$(s),$(f),$(g),$(V),$(R),$(H),$(ee),$(re),y&&d(te),y&&d(ne)}}}function _s(t){let e;return{c(){e=w("div"),this.h()},l(n){e=b(n,"DIV",{id:!0,class:!0}),v(e).forEach(d),this.h()},h(){r(e,"id","containerWorkPieceCanvas"),r(e,"class","flex flex-col")},m(n,a){oe(n,e,a)},p:He,d(n){n&&d(e)}}}function ps(t){let e,n,a;return{c(){e=w("div"),this.h()},l(o){e=b(o,"DIV",{id:!0,contenteditable:!0}),v(e).forEach(d),this.h()},h(){r(e,"id","log"),r(e,"contenteditable","true"),t[3]===void 0&&Un(()=>t[18].call(e))},m(o,i){oe(o,e,i),t[3]!==void 0&&(e.innerHTML=t[3]),n||(a=pt(e,"input",t[18]),n=!0)},p(o,i){i&8&&o[3]!==e.innerHTML&&(e.innerHTML=o[3])},d(o){o&&d(e),n=!1,a()}}}function ws(t){let e;return{c(){e=w("div"),this.h()},l(n){e=b(n,"DIV",{id:!0,class:!0}),v(e).forEach(d),this.h()},h(){r(e,"id","containerOptimumCombinationsCanvas"),r(e,"class","flex flex-col")},m(n,a){oe(n,e,a)},p:He,d(n){n&&d(e)}}}function bs(t){let e,n,a,o,i,u,s,l,m,c,f,_,x,z,g,L,C,p,V,E,F,j,R,D,A,X,H,pe,Ie,we,ee,Me,be,se,re,Oe,te,ne,de,ve,ue,ce,M,ze,ot,Ge,Ee,Ke,rt,De,ut,Ze,Te,Je,ht,ye,ft,Qe,y,T,Le,ie,Ae,ke,ae,Ce,Se,le,We,Ne,Pe,kt,Xe,Ct,St,$e,Ve,xt,wt,Et,je,Tt,Lt,et,qe,Pt,tt,Re,bt,Bt,It;function xn(k){t[6](k)}let Mt={label:"Имя",id:"nameWorkPiece",type:"text",placeholder:"Имя исходной заготовки...",required:!0};t[1].name!==void 0&&(Mt.value=t[1].name),z=new Dt({props:Mt}),he.push(()=>fe(z,"value",xn)),p=new Dt({props:{label:"Длина, мм.",id:"lengthRawPiece",type:"number",placeholder:"Длина исходной заготовки(в миллиметрах)...",value:t[1].size.a,onChange:t[7],required:!0}});function En(k){t[8](k)}let Ot={label:"Ширина (h), мм.",id:"widthRawPiece",type:"number",placeholder:"Ширина исходной заготовки (в миллиметрах)...",required:!0};t[1].size.h!==void 0&&(Ot.value=t[1].size.h),F=new Dt({props:Ot}),he.push(()=>fe(F,"value",En));function Tn(k){t[9](k)}let Nt={label:"Припуск, мм.",id:"stockSawing",type:"number",placeholder:"Припуск при распиле (в миллиметрах)...",required:!0};t[0]!==void 0&&(Nt.value=t[0]),A=new Dt({props:Nt}),he.push(()=>fe(A,"value",Tn)),ee=new Qn({props:{src:jn,class:"max-h-72 m-auto"}});let Ue=t[2],I=[];for(let k=0;k<Ue.length;k+=1)I[k]=zn(vn(t,Ue,k));const Ln=k=>U(I[k],1,1,()=>{I[k]=null});return Ve=new Vt({props:{title:"Варианты раскроя",isOpen:!0,$$slots:{default:[_s]},$$scope:{ctx:t}}}),qe=new Vt({props:{title:"Результаты вычислений",$$slots:{default:[ps]},$$scope:{ctx:t}}}),Re=new Vt({props:{title:"Оптимальные варианты раскроя",$$slots:{default:[ws]},$$scope:{ctx:t}}}),{c(){e=w("div"),n=w("div"),a=w("main"),o=w("div"),i=w("div"),u=w("section"),s=w("div"),l=w("h2"),m=K("Параметры исходной заготовки для распила"),c=P(),f=w("form"),_=w("div"),x=w("div"),J(z.$$.fragment),L=P(),C=w("div"),J(p.$$.fragment),V=P(),E=w("div"),J(F.$$.fragment),R=P(),D=w("div"),J(A.$$.fragment),H=P(),pe=w("h2"),Ie=K("Схема детали"),we=P(),J(ee.$$.fragment),Me=P(),be=w("div"),se=w("button"),re=K("Запустить расчет"),Oe=P(),te=w("div"),ne=w("h2"),de=K("Список требуемых деталей из заказа"),ve=P(),ue=w("table"),ce=w("thead"),M=w("tr"),ze=w("th"),ot=K("№"),Ge=P(),Ee=w("th"),Ke=K("Имя"),rt=P(),De=w("th"),ut=K("Длина верхнего основания (a), мм."),Ze=P(),Te=w("th"),Je=K("Длина правой стороны (b), мм."),ht=P(),ye=w("th"),ft=K("Длина нижнего основания (c), мм."),Qe=P(),y=w("th"),T=K("Длина левой стороны (d), мм."),Le=P(),ie=w("th"),Ae=K("Левый угол при нижнем основании (f), °"),ke=P(),ae=w("th"),Ce=K("Правый угол при нижнем основании (e), °"),Se=P(),le=w("th"),We=K("Количество, шт."),Ne=P(),Pe=w("tbody");for(let k=0;k<I.length;k+=1)I[k].c();kt=P(),Xe=w("button"),Ct=K("+ Добавить деталь"),St=P(),$e=w("div"),J(Ve.$$.fragment),xt=P(),wt=w("hr"),Et=P(),je=w("h2"),Tt=K("Результаты"),Lt=P(),et=w("div"),J(qe.$$.fragment),Pt=P(),tt=w("div"),J(Re.$$.fragment),this.h()},l(k){e=b(k,"DIV",{class:!0});var q=v(e);n=b(q,"DIV",{class:!0});var xe=v(n);a=b(xe,"MAIN",{class:!0});var nt=v(a);o=b(nt,"DIV",{class:!0});var gt=v(o);i=b(gt,"DIV",{class:!0});var O=v(i);u=b(O,"SECTION",{class:!0});var dt=v(u);s=b(dt,"DIV",{class:!0});var Ye=v(s);l=b(Ye,"H2",{class:!0});var ct=v(l);m=Z(ct,"Параметры исходной заготовки для распила"),ct.forEach(d),c=B(Ye),f=b(Ye,"FORM",{action:!0});var Y=v(f);_=b(Y,"DIV",{class:!0});var me=v(_);x=b(me,"DIV",{class:!0});var Xt=v(x);Q(z.$$.fragment,Xt),Xt.forEach(d),L=B(me),C=b(me,"DIV",{class:!0});var Ut=v(C);Q(p.$$.fragment,Ut),Ut.forEach(d),V=B(me),E=b(me,"DIV",{class:!0});var Yt=v(E);Q(F.$$.fragment,Yt),Yt.forEach(d),R=B(me),D=b(me,"DIV",{class:!0});var Gt=v(D);Q(A.$$.fragment,Gt),Gt.forEach(d),me.forEach(d),Y.forEach(d),Ye.forEach(d),dt.forEach(d),H=B(O),pe=b(O,"H2",{class:!0});var Kt=v(pe);Ie=Z(Kt,"Схема детали"),Kt.forEach(d),we=B(O),Q(ee.$$.fragment,O),Me=B(O),be=b(O,"DIV",{class:!0});var Zt=v(be);se=b(Zt,"BUTTON",{class:!0});var Jt=v(se);re=Z(Jt,"Запустить расчет"),Jt.forEach(d),Zt.forEach(d),Oe=B(O),te=b(O,"DIV",{class:!0});var st=v(te);ne=b(st,"H2",{class:!0});var Qt=v(ne);de=Z(Qt,"Список требуемых деталей из заказа"),Qt.forEach(d),ve=B(st),ue=b(st,"TABLE",{class:!0});var vt=v(ue);ce=b(vt,"THEAD",{class:!0});var Wt=v(ce);M=b(Wt,"TR",{});var G=v(M);ze=b(G,"TH",{scope:!0,class:!0});var $t=v(ze);ot=Z($t,"№"),$t.forEach(d),Ge=B(G),Ee=b(G,"TH",{scope:!0,class:!0});var jt=v(Ee);Ke=Z(jt,"Имя"),jt.forEach(d),rt=B(G),De=b(G,"TH",{scope:!0,class:!0});var en=v(De);ut=Z(en,"Длина верхнего основания (a), мм."),en.forEach(d),Ze=B(G),Te=b(G,"TH",{scope:!0,class:!0});var tn=v(Te);Je=Z(tn,"Длина правой стороны (b), мм."),tn.forEach(d),ht=B(G),ye=b(G,"TH",{scope:!0,class:!0});var nn=v(ye);ft=Z(nn,"Длина нижнего основания (c), мм."),nn.forEach(d),Qe=B(G),y=b(G,"TH",{scope:!0,class:!0});var sn=v(y);T=Z(sn,"Длина левой стороны (d), мм."),sn.forEach(d),Le=B(G),ie=b(G,"TH",{scope:!0,class:!0});var an=v(ie);Ae=Z(an,"Левый угол при нижнем основании (f), °"),an.forEach(d),ke=B(G),ae=b(G,"TH",{scope:!0,class:!0});var ln=v(ae);Ce=Z(ln,"Правый угол при нижнем основании (e), °"),ln.forEach(d),Se=B(G),le=b(G,"TH",{scope:!0,class:!0});var on=v(le);We=Z(on,"Количество, шт."),on.forEach(d),G.forEach(d),Wt.forEach(d),Ne=B(vt),Pe=b(vt,"TBODY",{});var rn=v(Pe);for(let Ft=0;Ft<I.length;Ft+=1)I[Ft].l(rn);rn.forEach(d),vt.forEach(d),kt=B(st),Xe=b(st,"BUTTON",{class:!0});var un=v(Xe);Ct=Z(un,"+ Добавить деталь"),un.forEach(d),st.forEach(d),St=B(O),$e=b(O,"DIV",{class:!0});var hn=v($e);Q(Ve.$$.fragment,hn),hn.forEach(d),xt=B(O),wt=b(O,"HR",{class:!0}),Et=B(O),je=b(O,"H2",{class:!0});var fn=v(je);Tt=Z(fn,"Результаты"),fn.forEach(d),Lt=B(O),et=b(O,"DIV",{class:!0});var gn=v(et);Q(qe.$$.fragment,gn),gn.forEach(d),Pt=B(O),tt=b(O,"DIV",{class:!0});var dn=v(tt);Q(Re.$$.fragment,dn),dn.forEach(d),O.forEach(d),gt.forEach(d),nt.forEach(d),xe.forEach(d),q.forEach(d),this.h()},h(){r(l,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),r(x,"class","sm:col-span-2"),r(C,"class","w-full"),r(E,"class","w-full"),r(D,"class","w-full"),r(_,"class","grid gap-4 sm:grid-cols-2 sm:gap-6"),r(f,"action","#"),r(s,"class","py-8 px-4 mx-auto max-w-2xl lg:py-16"),r(u,"class","bg-white dark:bg-gray-900"),r(pe,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),r(se,"class","inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center float-right text-white bg-primary-600 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-700"),r(be,"class","relative overflow-x-auto"),r(ne,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),r(ze,"scope","col"),r(ze,"class","px-6 py-3"),r(Ee,"scope","col"),r(Ee,"class","px-6 py-3"),r(De,"scope","col"),r(De,"class","px-6 py-3"),r(Te,"scope","col"),r(Te,"class","px-6 py-3"),r(ye,"scope","col"),r(ye,"class","px-6 py-3"),r(y,"scope","col"),r(y,"class","px-6 py-3"),r(ie,"scope","col"),r(ie,"class","px-6 py-3"),r(ae,"scope","col"),r(ae,"class","px-6 py-3"),r(le,"scope","col"),r(le,"class","px-6 py-3"),r(ce,"class","text-xs text-gray-600 uppercase bg-gray-50 dark:bg-gray-600 dark:text-gray-400"),r(ue,"class","w-full text-sm text-left text-gray-500 dark:text-gray-400"),r(Xe,"class","inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center float-right text-white bg-primary-600 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-700"),r(te,"class","relative overflow-x-auto"),r($e,"class","mt-5"),r(wt,"class","my-10"),r(je,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),r(et,"class","mt-5"),r(tt,"class","mt-5"),r(i,"class","flex-auto max-w-8xl min-w-0 pt-6 lg:px-8 lg:pt-8 pb:12 xl:pb-24 lg:pb-16"),r(o,"class","flex w-full"),r(a,"class","flex-auto w-full min-w-0 lg:static lg:max-h-full lg:overflow-visible"),r(n,"class","lg:flex"),r(e,"class","w-full px-4 mx-auto max-w-8xl")},m(k,q){oe(k,e,q),h(e,n),h(n,a),h(a,o),h(o,i),h(i,u),h(u,s),h(s,l),h(l,m),h(s,c),h(s,f),h(f,_),h(_,x),W(z,x,null),h(_,L),h(_,C),W(p,C,null),h(_,V),h(_,E),W(F,E,null),h(_,R),h(_,D),W(A,D,null),h(i,H),h(i,pe),h(pe,Ie),h(i,we),W(ee,i,null),h(i,Me),h(i,be),h(be,se),h(se,re),h(i,Oe),h(i,te),h(te,ne),h(ne,de),h(te,ve),h(te,ue),h(ue,ce),h(ce,M),h(M,ze),h(ze,ot),h(M,Ge),h(M,Ee),h(Ee,Ke),h(M,rt),h(M,De),h(De,ut),h(M,Ze),h(M,Te),h(Te,Je),h(M,ht),h(M,ye),h(ye,ft),h(M,Qe),h(M,y),h(y,T),h(M,Le),h(M,ie),h(ie,Ae),h(M,ke),h(M,ae),h(ae,Ce),h(M,Se),h(M,le),h(le,We),h(ue,Ne),h(ue,Pe);for(let xe=0;xe<I.length;xe+=1)I[xe]&&I[xe].m(Pe,null);h(te,kt),h(te,Xe),h(Xe,Ct),h(i,St),h(i,$e),W(Ve,$e,null),h(i,xt),h(i,wt),h(i,Et),h(i,je),h(je,Tt),h(i,Lt),h(i,et),W(qe,et,null),h(i,Pt),h(i,tt),W(Re,tt,null),bt=!0,Bt||(It=[pt(se,"click",t[5]),pt(Xe,"click",t[4])],Bt=!0)},p(k,[q]){const xe={};!g&&q&2&&(g=!0,xe.value=k[1].name,ge(()=>g=!1)),z.$set(xe);const nt={};q&2&&(nt.value=k[1].size.a),q&2&&(nt.onChange=k[7]),p.$set(nt);const gt={};!j&&q&2&&(j=!0,gt.value=k[1].size.h,ge(()=>j=!1)),F.$set(gt);const O={};if(!X&&q&1&&(X=!0,O.value=k[0],ge(()=>X=!1)),A.$set(O),q&4){Ue=k[2];let Y;for(Y=0;Y<Ue.length;Y+=1){const me=vn(k,Ue,Y);I[Y]?(I[Y].p(me,q),N(I[Y],1)):(I[Y]=zn(me),I[Y].c(),N(I[Y],1),I[Y].m(Pe,null))}for(Yn(),Y=Ue.length;Y<I.length;Y+=1)Ln(Y);Mn()}const dt={};q&33554432&&(dt.$$scope={dirty:q,ctx:k}),Ve.$set(dt);const Ye={};q&33554440&&(Ye.$$scope={dirty:q,ctx:k}),qe.$set(Ye);const ct={};q&33554432&&(ct.$$scope={dirty:q,ctx:k}),Re.$set(ct)},i(k){if(!bt){N(z.$$.fragment,k),N(p.$$.fragment,k),N(F.$$.fragment,k),N(A.$$.fragment,k),N(ee.$$.fragment,k);for(let q=0;q<Ue.length;q+=1)N(I[q]);N(Ve.$$.fragment,k),N(qe.$$.fragment,k),N(Re.$$.fragment,k),bt=!0}},o(k){U(z.$$.fragment,k),U(p.$$.fragment,k),U(F.$$.fragment,k),U(A.$$.fragment,k),U(ee.$$.fragment,k),I=I.filter(Boolean);for(let q=0;q<I.length;q+=1)U(I[q]);U(Ve.$$.fragment,k),U(qe.$$.fragment,k),U(Re.$$.fragment,k),bt=!1},d(k){k&&d(e),$(z),$(p),$(F),$(A),$(ee),On(I,k),$(Ve),$(qe),$(Re),Bt=!1,yn(It)}}}let mt=200;function vs(t,e,n){let a=5,o=new Fe({name:"Основная",size:new _e({a:5e3,c:5e3,h:mt,maxLength:4900})}),i=[new zt({blank:new Fe({name:"Д. №1",size:new _e({a:500,c:1e3,leftDownAngle:90,rightDownAngle:0,h:mt,maxLength:o.size.maxLength})}),volume:10}),new zt({blank:new Fe({name:"Д. №2",size:new _e({a:800,c:800,leftDownAngle:80,h:mt,maxLength:o.size.maxLength})}),volume:20}),new zt({blank:new Fe({name:"Д. №3",size:new _e({a:1e3,c:600,leftDownAngle:45,h:mt,maxLength:o.size.maxLength})}),volume:30})];Nn(()=>{i.forEach((D,A)=>{ms(`containerPieceCanvas${A}`,D.blank)})});const u=()=>{const D=new zt({blank:new Fe({name:`Д. №${i.length+1}`,size:new _e({a:0,c:0,h:mt})}),volume:0});n(2,i=[...i,D])};let s,l="";const m=D=>{const A=[],X=H=>H.volume>0&&H.blank.size.a>0&&H.blank.size.c>0;return D.forEach(H=>{H.blank.size.h=o.size.h,X(H)&&A.push(H)}),A},c=()=>{if(a>=0&&o.name.length>0&&o.size.a&&o.size.c&&o.size.h)if(n(2,i=m(i)),i.length){s=is({stockSawing:a,rawWorkPiece:o,listOrders:i}),console.log(s);const D=s.cuttingCombinations.map((A,X)=>({num:X+1,volume:0,cuttingCombination:A}));cs("containerWorkPieceCanvas",a,o,D),n(3,l=s.listLogMessages.map(A=>A.includes("===>")?`<p class='mt-2 font-bold'>${A}</p>`:`<p '>${A}</p>`).join(""))}else alert("Внимание! Нет валидных деталей для выполнения алгоритма. Скорее всего не все поля были заполнены.");else alert("Внимание! Не корректно заполнены параметры исходной заготовки.")};Xn(()=>{c()});function f(D){t.$$.not_equal(o.name,D)&&(o.name=D,n(1,o))}const _=D=>o.size.changeBothBases(D);function x(D){t.$$.not_equal(o.size.h,D)&&(o.size.h=D,n(1,o))}function z(D){a=D,n(0,a)}function g(D,A){t.$$.not_equal(A.blank.name,D)&&(A.blank.name=D,n(2,i))}function L(D,A){t.$$.not_equal(A.blank.size.a,D)&&(A.blank.size.a=D,n(2,i))}function C(D,A){t.$$.not_equal(A.blank.size.b,D)&&(A.blank.size.b=D,n(2,i))}function p(D,A){t.$$.not_equal(A.blank.size.c,D)&&(A.blank.size.c=D,n(2,i))}function V(D,A){t.$$.not_equal(A.blank.size.d,D)&&(A.blank.size.d=D,n(2,i))}function E(D,A){t.$$.not_equal(A.blank.size.leftDownAngle,D)&&(A.blank.size.leftDownAngle=D,n(2,i))}function F(D,A){t.$$.not_equal(A.blank.size.rightDownAngle,D)&&(A.blank.size.rightDownAngle=D,n(2,i))}function j(D,A){t.$$.not_equal(A.volume,D)&&(A.volume=D,n(2,i))}function R(){l=this.innerHTML,n(3,l)}return[a,o,i,l,u,c,f,_,x,z,g,L,C,p,V,E,F,j,R]}class As extends it{constructor(e){super(),at(this,e,vs,bs,lt,{})}}export{As as component};
