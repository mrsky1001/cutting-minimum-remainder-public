var Wn=Object.defineProperty;var Kn=(t,e,n)=>e in t?Wn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var w=(t,e,n)=>(Kn(t,typeof e!="symbol"?e+"":e,n),n);import{S as ht,i as ct,s as ut,e as Pn,b as le,G as Le,h as D,C as An,E as Nt,F as yn,k as v,l as x,W as Fn,P as Gn,a2 as Ot,a as R,m as z,c as I,n as d,X as p,I as Zn,q as Y,Z as Sn,r as W,_ as kn,L as vt,u as Vn,M as Jn,N as Qn,O as jn,g as O,d as M,K as ei,R as qn,w as ce,a3 as ue,y as K,z as G,A as Z,a4 as fe,B as J,f as ti,a0 as ni,j as ii,o as si,T as oi,v as ai}from"../chunks/index.d389ee78.js";import{c as At}from"../chunks/Indicator.svelte_svelte_type_style_lang.e2c519f7.js";function li(t){let e,n,a,l=[t[11],{class:n=At(t[5],t[3],t[4],t[8],t[10].class)},{src:a=t[1]},{srcset:t[2]},{alt:t[7]}],o={};for(let i=0;i<l.length;i+=1)o=Nt(o,l[i]);return{c(){e=v("img"),this.h()},l(i){e=x(i,"IMG",{class:!0,src:!0,srcset:!0,alt:!0}),this.h()},h(){Fn(e,o)},m(i,s){le(i,e,s)},p(i,s){Fn(e,o=Gn(l,[s&2048&&i[11],s&1336&&n!==(n=At(i[5],i[3],i[4],i[8],i[10].class))&&{class:n},s&2&&!Ot(e.src,a=i[1])&&{src:a},s&4&&{srcset:i[2]},s&128&&{alt:i[7]}]))},d(i){i&&D(e)}}}function ri(t){let e,n,a,l,o,i;return{c(){e=v("figure"),n=v("img"),o=R(),i=v("figcaption"),this.h()},l(s){e=x(s,"FIGURE",{class:!0});var r=z(e);n=x(r,"IMG",{class:!0,src:!0,srcset:!0,alt:!0}),o=I(r),i=x(r,"FIGCAPTION",{class:!0});var _=z(i);_.forEach(D),r.forEach(D),this.h()},h(){d(n,"class",a=At(t[5],t[3],t[4],t[8],t[10].class)),Ot(n.src,l=t[1])||d(n,"src",l),d(n,"srcset",t[2]),d(n,"alt",t[7]),d(i,"class",t[9]),d(e,"class",t[6])},m(s,r){le(s,e,r),p(e,n),p(e,o),p(e,i),i.innerHTML=t[0]},p(s,r){r&1336&&a!==(a=At(s[5],s[3],s[4],s[8],s[10].class))&&d(n,"class",a),r&2&&!Ot(n.src,l=s[1])&&d(n,"src",l),r&4&&d(n,"srcset",s[2]),r&128&&d(n,"alt",s[7]),r&1&&(i.innerHTML=s[0]),r&512&&d(i,"class",s[9]),r&64&&d(e,"class",s[6])},d(s){s&&D(e)}}}function hi(t){let e;function n(o,i){return o[0]?ri:li}let a=n(t),l=a(t);return{c(){l.c(),e=Pn()},l(o){l.l(o),e=Pn()},m(o,i){l.m(o,i),le(o,e,i)},p(o,[i]){a===(a=n(o))&&l?l.p(o,i):(l.d(1),l=a(o),l&&(l.c(),l.m(e.parentNode,e)))},i:Le,o:Le,d(o){l.d(o),o&&D(e)}}}function ci(t,e,n){const a=["caption","src","srcset","size","alignment","imgClass","figClass","alt","effect","captionClass"];let l=An(e,a),{caption:o=void 0}=e,{src:i=void 0}=e,{srcset:s=void 0}=e,{size:r="max-w-full"}=e,{alignment:_=""}=e,{imgClass:m="h-auto"}=e,{figClass:c="max-w-lg"}=e,{alt:u=""}=e,{effect:g=""}=e,{captionClass:h="mt-2 text-sm text-center text-gray-500 dark:text-gray-400"}=e;return t.$$set=f=>{n(10,e=Nt(Nt({},e),yn(f))),n(11,l=An(e,a)),"caption"in f&&n(0,o=f.caption),"src"in f&&n(1,i=f.src),"srcset"in f&&n(2,s=f.srcset),"size"in f&&n(3,r=f.size),"alignment"in f&&n(4,_=f.alignment),"imgClass"in f&&n(5,m=f.imgClass),"figClass"in f&&n(6,c=f.figClass),"alt"in f&&n(7,u=f.alt),"effect"in f&&n(8,g=f.effect),"captionClass"in f&&n(9,h=f.captionClass)},e=yn(e),[o,i,s,r,_,m,c,u,g,h,e,l]}class ui extends ht{constructor(e){super(),ct(this,e,ci,hi,ut,{caption:0,src:1,srcset:2,size:3,alignment:4,imgClass:5,figClass:6,alt:7,effect:8,captionClass:9})}}let Ye=class Mt{constructor(e){w(this,"_a",0);w(this,"_b",0);w(this,"_c",0);w(this,"_d",0);w(this,"_h",0);w(this,"_leftDownAngle",0);w(this,"_leftDownAngleRad",0);w(this,"_rightDownAngle",0);w(this,"_rightDownAngleRad",0);w(this,"minLength");w(this,"maxLength");w(this,"minAngle");w(this,"maxAngle");w(this,"_fractionDigits",3);this._a=e.a,this._b=e.b??this._b,this._c=e.c,this._d=e.d??this._d,this._h=e.h,this._leftDownAngle=e.leftDownAngle??this._leftDownAngle,this._rightDownAngle=e.rightDownAngle??this._rightDownAngle,this.minLength=e.minLength??10,this.maxLength=e.maxLength,this.minAngle=e.minAngle??10,this.maxAngle=e.maxAngle??162,this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this._rightDownAngleRad=this._toRadians(this._rightDownAngle),this.recalculation()}changeBothBases(e){this.a=e,this.c=e}_toRadians(e){return parseFloat((e*(Math.PI/180)).toFixed(3))}_toDegree(e){return parseFloat((e*180/Math.PI).toFixed(3))}recalculation(){this._h&&(this._leftDownAngleRad&&(this.d=this._h/Math.sin(this._leftDownAngleRad)),this._a&&this._c&&(this._rightDownAngleRad=Math.abs(Math.atan(this._h/this.differenceBases)),this._rightDownAngle=this.differenceBases>0?180-this._toDegree(this._rightDownAngleRad):this._toDegree(this._rightDownAngleRad)),this._rightDownAngleRad&&(this.b=this._h/Math.sin(this._rightDownAngleRad)))}get differenceBases(){const e=this._a,n=this._c,a=this._leftDownAngle>=90?this.segmentLeftUp:-1*this.segmentLeftUp;return e-a-n}get segmentLeftUp(){const e=Math.abs(this._leftDownAngle-90);return Math.sqrt(this._h*this._h+this._d*this._d-2*this._h*this._d*Math.cos(this._toRadians(e)))}flipHorizontal(){const e=new Mt(this);this._leftDownAngle=e.rightDownAngle,this._rightDownAngle=e.leftDownAngle,this._b=e.d,this._d=e.b}flipVertical(){const e=new Mt(this);this._leftDownAngle=180-e.leftDownAngle,this._rightDownAngle=180-e.rightDownAngle,this._a=e.c,this._c=e.a}get isRect(){return this.a===this.c&&this.leftDownAngle===90&&this.rightDownAngle===90}get perimeter(){return this._a+this._b+this._c+this._d}get a(){return this._a}set a(e){this._a=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get b(){return this._b}set b(e){this._b=parseFloat(Number(e).toFixed(this._fractionDigits))}get c(){return this._c}set c(e){this._c=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get d(){return this._d}set d(e){this._d=parseFloat(Number(e).toFixed(this._fractionDigits))}get h(){return this._h}set h(e){this._h=parseFloat(Number(e).toFixed(this._fractionDigits))}get leftDownAngle(){return parseFloat(Number(this._leftDownAngle).toFixed(0))}set leftDownAngle(e){this._leftDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this.recalculation()}get rightDownAngle(){return parseFloat(Number(this._rightDownAngle).toFixed(0))}set rightDownAngle(e){this._rightDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._rightDownAngleRad=this._toRadians(this._rightDownAngle)}},We=class{constructor(e){w(this,"name");w(this,"size");w(this,"_isHorizontalFlipped",!1);w(this,"_isVerticalFlipped",!1);this.name=e.name,this.size=new Ye(e.size)}get isRect(){return this.size.isRect}get square(){return this.size.h*((this.size.a+this.size.c)/2)}get isHorizontalFlipped(){return this._isHorizontalFlipped}get isVerticalFlipped(){return this._isVerticalFlipped}flipHorizontal(){this.size.flipHorizontal(),this._isHorizontalFlipped=!0}flipVertical(){this.size.flipVertical(),this._isVerticalFlipped=!0}};function fi(t){let e,n,a,l,o,i,s,r,_,m,c,u,g,h,f,b,C;const y=t[5].default,S=Zn(y,t,t[4],null);return{c(){e=v("div"),n=v("h2"),a=v("button"),l=v("span"),o=Y(t[1]),i=R(),s=Sn("svg"),r=Sn("path"),m=R(),c=v("div"),u=v("div"),S&&S.c(),this.h()},l(k){e=x(k,"DIV",{id:!0,"data-accordion":!0});var B=z(e);n=x(B,"H2",{id:!0});var j=z(n);a=x(j,"BUTTON",{type:!0,class:!0,"data-accordion-target":!0,"aria-expanded":!0,"aria-controls":!0});var X=z(a);l=x(X,"SPAN",{});var P=z(l);o=W(P,t[1]),P.forEach(D),i=I(X),s=kn(X,"svg",{"data-accordion-icon":!0,class:!0,"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0});var E=z(s);r=kn(E,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),z(r).forEach(D),E.forEach(D),X.forEach(D),j.forEach(D),m=I(B),c=x(B,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var ee=z(c);u=x(ee,"DIV",{class:!0});var q=z(u);S&&S.l(q),q.forEach(D),ee.forEach(D),B.forEach(D),this.h()},h(){d(r,"stroke","currentColor"),d(r,"stroke-linecap","round"),d(r,"stroke-linejoin","round"),d(r,"stroke-width","2"),d(r,"d","M9 5 5 1 1 5"),d(s,"data-accordion-icon",""),d(s,"class",_="w-3 h-3 "+(t[0]?"rotate-180":"")+" shrink-0"),d(s,"aria-hidden","true"),d(s,"xmlns","http://www.w3.org/2000/svg"),d(s,"fill","none"),d(s,"viewBox","0 0 10 6"),d(a,"type","button"),d(a,"class",t[2]),d(a,"data-accordion-target","#accordion-collapse-body-1"),d(a,"aria-expanded","true"),d(a,"aria-controls","accordion-collapse-body-1"),d(n,"id","accordion-collapse-heading-1"),d(u,"class","p-5 border border-gray-200 dark:border-gray-700 dark:bg-gray-900"),d(c,"id","accordion-collapse-body-1"),d(c,"class",g=t[0]?"":"hidden"),d(c,"aria-labelledby","accordion-collapse-heading-1"),d(e,"id","accordion-collapse"),d(e,"data-accordion",h=t[0]?"open":"collapse")},m(k,B){le(k,e,B),p(e,n),p(n,a),p(a,l),p(l,o),p(a,i),p(a,s),p(s,r),p(e,m),p(e,c),p(c,u),S&&S.m(u,null),f=!0,b||(C=vt(a,"click",t[6]),b=!0)},p(k,[B]){(!f||B&2)&&Vn(o,k[1]),(!f||B&1&&_!==(_="w-3 h-3 "+(k[0]?"rotate-180":"")+" shrink-0"))&&d(s,"class",_),(!f||B&4)&&d(a,"class",k[2]),S&&S.p&&(!f||B&16)&&Jn(S,y,k,k[4],f?jn(y,k[4],B,null):Qn(k[4]),null),(!f||B&1&&g!==(g=k[0]?"":"hidden"))&&d(c,"class",g),(!f||B&1&&h!==(h=k[0]?"open":"collapse"))&&d(e,"data-accordion",h)},i(k){f||(O(S,k),f=!0)},o(k){M(S,k),f=!1},d(k){k&&D(e),S&&S.d(k),b=!1,C()}}}function di(t,e,n){let{$$slots:a={},$$scope:l}=e,{title:o=""}=e,{isOpen:i=!1}=e;const s=()=>n(0,i=!i);let r="flex items-center justify-between w-full p-5 font-medium text-left border border-gray-200 rounded-xl focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800";const _=()=>s();return t.$$set=m=>{"title"in m&&n(1,o=m.title),"isOpen"in m&&n(0,i=m.isOpen),"$$scope"in m&&n(4,l=m.$$scope)},t.$$.update=()=>{if(t.$$.dirty&5){const m="rounded-xl",c="rounded-t-xl",u=" bg-gray-100";i?(n(2,r=r.replace(m,c)),n(2,r+=u)):(n(2,r=r.replace(c,m)),n(2,r=r.replace(u,"")))}},[i,o,r,s,l,a,_]}class qt extends ht{constructor(e){super(),ct(this,e,di,fi,ut,{title:1,isOpen:0})}}class Dt{constructor(e){w(this,"blank");w(this,"_volume");w(this,"minVolume");w(this,"maxVolume");this.blank=new We(e.blank),this._volume=e.volume,this.minVolume=e.minVolume??1,this.maxVolume=e.maxVolume??100}get volume(){return this._volume}set volume(e){this._volume=Number(e)}}const gi="_app/immutable/assets/workPiece.ba374e36.png";function mi(t){let e,n,a;return{c(){e=v("input"),this.h()},l(l){e=x(l,"INPUT",{id:!0,type:!0,name:!0,placeholder:!0,class:!0}),this.h()},h(){d(e,"id",t[1]),d(e,"type","text"),d(e,"name",t[1]),e.disabled=t[3],e.required=t[4],d(e,"placeholder",t[2]),e.value=t[0],d(e,"class",t[5])},m(l,o){le(l,e,o),n||(a=[ei(t[6].call(null,e)),vt(e,"change",t[11])],n=!0)},p(l,[o]){o&2&&d(e,"id",l[1]),o&2&&d(e,"name",l[1]),o&8&&(e.disabled=l[3]),o&16&&(e.required=l[4]),o&4&&d(e,"placeholder",l[2]),o&1&&e.value!==l[0]&&(e.value=l[0]),o&32&&d(e,"class",l[5])},i:Le,o:Le,d(l){l&&D(e),n=!1,qn(a)}}}function _i(t,e,n){let{id:a=""}=e,{placeholder:l=""}=e,{type:o="text"}=e,{disabled:i=!1}=e,{numSettings:s}=e,{required:r=!1}=e,{value:_}=e,{onChange:m=void 0}=e;const c=f=>{f.type=o};let u=`border border-gray-300 text-gray-900 text-sm rounded-lg focus:bg-[white] focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700
                                                         dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500`;i&&(u+=" bg-gray-100");const g=(f,b)=>{let C=o==="number"?Number(b):b;const y=" text-red-800 border border-red-300";(k=>!(s&&(s.min&&k<s.min||s.max&&k>s.max)))(C)?n(0,_=C):u.includes(y)||(n(5,u+=y),setTimeout(()=>{n(5,u=u.replace(y,""))},1e3)),f.value=_},h=f=>g(f.target,f.target.value);return t.$$set=f=>{"id"in f&&n(1,a=f.id),"placeholder"in f&&n(2,l=f.placeholder),"type"in f&&n(8,o=f.type),"disabled"in f&&n(3,i=f.disabled),"numSettings"in f&&n(9,s=f.numSettings),"required"in f&&n(4,r=f.required),"value"in f&&n(0,_=f.value),"onChange"in f&&n(10,m=f.onChange)},[_,a,l,i,r,u,c,g,o,s,m,h]}class Te extends ht{constructor(e){super(),ct(this,e,_i,mi,ut,{id:1,placeholder:2,type:8,disabled:3,numSettings:9,required:4,value:0,onChange:10})}}class rt{constructor(e){w(this,"_a",0);w(this,"_b",0);w(this,"_c",0);w(this,"_d",0);w(this,"_h",0);w(this,"_leftDownAngle",0);w(this,"_leftDownAngleRad",0);w(this,"_rightDownAngle",0);w(this,"_rightDownAngleRad",0);w(this,"minLength");w(this,"maxLength");w(this,"minAngle");w(this,"maxAngle");w(this,"_fractionDigits",3);this._a=e.a,this._b=e.b??this._b,this._c=e.c,this._d=e.d??this._d,this._h=e.h,this._leftDownAngle=e.leftDownAngle??this._leftDownAngle,this._rightDownAngle=e.rightDownAngle??this._rightDownAngle,this.minLength=e.minLength??10,this.maxLength=e.maxLength,this.minAngle=e.minAngle??10,this.maxAngle=e.maxAngle??162,this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this._rightDownAngleRad=this._toRadians(this._rightDownAngle),this.recalculation()}changeBothBases(e){this.a=e,this.c=e}_toRadians(e){return parseFloat((e*(Math.PI/180)).toFixed(3))}_toDegree(e){return parseFloat((e*180/Math.PI).toFixed(3))}recalculation(){this._h&&(this._leftDownAngleRad&&(this.d=this._h/Math.sin(this._leftDownAngleRad)),this._a&&this._c&&(this._rightDownAngleRad=Math.abs(Math.atan(this._h/this.differenceBases)),this._rightDownAngle=this.differenceBases>0?180-this._toDegree(this._rightDownAngleRad):this._toDegree(this._rightDownAngleRad)),this._rightDownAngleRad&&(this.b=this._h/Math.sin(this._rightDownAngleRad)))}get differenceBases(){const e=this._a,n=this._c,a=this._leftDownAngle>=90?this.segmentLeftUp:-1*this.segmentLeftUp;return e-a-n}get segmentLeftUp(){const e=Math.abs(this._leftDownAngle-90);return Math.sqrt(this._h*this._h+this._d*this._d-2*this._h*this._d*Math.cos(this._toRadians(e)))}flipHorizontal(){const e=new rt(this);this._leftDownAngle=e.rightDownAngle,this._rightDownAngle=e.leftDownAngle,this._b=e.d,this._d=e.b}flipVertical(){const e=new rt(this);this._leftDownAngle=180-e.leftDownAngle,this._rightDownAngle=180-e.rightDownAngle,this._a=e.c,this._c=e.a}get isRect(){return this.a===this.c&&this.leftDownAngle===90&&this.rightDownAngle===90}get perimeter(){return this._a+this._b+this._c+this._d}get a(){return this._a}set a(e){this._a=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get b(){return this._b}set b(e){this._b=parseFloat(Number(e).toFixed(this._fractionDigits))}get c(){return this._c}set c(e){this._c=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get d(){return this._d}set d(e){this._d=parseFloat(Number(e).toFixed(this._fractionDigits))}get h(){return this._h}set h(e){this._h=parseFloat(Number(e).toFixed(this._fractionDigits))}get leftDownAngle(){return parseFloat(Number(this._leftDownAngle).toFixed(0))}set leftDownAngle(e){this._leftDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this.recalculation()}get rightDownAngle(){return parseFloat(Number(this._rightDownAngle).toFixed(0))}set rightDownAngle(e){this._rightDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._rightDownAngleRad=this._toRadians(this._rightDownAngle)}}class Lt{constructor(e){w(this,"name");w(this,"size");w(this,"_isHorizontalFlipped",!1);w(this,"_isVerticalFlipped",!1);this.name=e.name,this.size=new rt(e.size)}get isRect(){return this.size.isRect}get square(){return this.size.h*((this.size.a+this.size.c)/2)}get isHorizontalFlipped(){return this._isHorizontalFlipped}get isVerticalFlipped(){return this._isVerticalFlipped}flipHorizontal(){this.size.flipHorizontal(),this._isHorizontalFlipped=!0}flipVertical(){this.size.flipVertical(),this._isVerticalFlipped=!0}}let Xt=class{constructor(e){w(this,"_name");w(this,"_square");w(this,"_p1");w(this,"_p2");w(this,"_p3");w(this,"_p4");w(this,"_wP1P2");w(this,"_wP2P3");w(this,"_wP3P4");w(this,"_wP4P1");w(this,"_h");w(this,"_colorBody");w(this,"_colorContour");w(this,"_colorTextLegend");w(this,"_colorContourLegend");w(this,"isHorizontalFlipped");w(this,"isVerticalFlipped");w(this,"isShowBodyText");w(this,"isShowBaseContour");w(this,"isShowSideContour");w(this,"baseSpace");w(this,"sideSpace");w(this,"halfYBoard");w(this,"halfXBoard");w(this,"wDivider");w(this,"hDivider");this._name=e.name,this._square=e.square,this._p1={x:e.p1.x,y:e.p1.y},this._p2={x:e.p2.x,y:e.p2.y},this._p3={x:e.p3.x,y:e.p3.y},this._p4={x:e.p4.x,y:e.p4.y},this._wP1P2=e.wP1P2,this._wP2P3=e.wP2P3,this._wP3P4=e.wP3P4,this._wP4P1=e.wP4P1,this._h=e.h,this.isHorizontalFlipped=e.isHorizontalFlipped!==void 0?e.isHorizontalFlipped:!1,this.isVerticalFlipped=e.isVerticalFlipped!==void 0?e.isVerticalFlipped:!1,this.isShowBodyText=e.isShowBodyText!==void 0?e.isShowBodyText:!0,this.isShowBaseContour=e.isShowBaseContour!==void 0?e.isShowBaseContour:!0,this.isShowSideContour=e.isShowSideContour!==void 0?e.isShowSideContour:!0,this.baseSpace=e.baseSpace??20,this.sideSpace=e.sideSpace??20,this.halfXBoard=e.halfXBoard??250,this.halfYBoard=e.halfYBoard??50,this.wDivider=e.wDivider??2,this.hDivider=e.hDivider??2,this._colorBody=e.colorBody??"#d1ffd8",this._colorContour=e.colorContour??"#B70A02",this._colorTextLegend=e.colorTextLegend??"black",this._colorContourLegend=e.colorContourLegend??"gray"}get perimeter(){return this._wP1P2+this._wP2P3+this._wP3P4+this._wP4P1}get colorTextLegend(){return this._colorTextLegend}get colorContourLegend(){return this._colorContourLegend}get colorBody(){return this._colorBody}get name(){return this._name}get square(){return this._square}get p1(){return this._p1}get p2(){return this._p2}get p3(){return this._p3}get p4(){return this._p4}get wP1P2(){return this._wP1P2}get wP2P3(){return this._wP2P3}get wP3P4(){return this._wP3P4}get wP4P1(){return this._wP4P1}get h(){return this._h}get colorContour(){return this._colorContourLegend}};const Ht={REMAINS:"Ост.",STOCK:"п."},pi=(t,e,n,a,l)=>{const o=l>0?1:-1;return{x:t-o*Math.sqrt(Math.abs(a*a-(e-n)*(e-n))),y:n}};function En(t,e,n){e&&((c,u)=>{if(c.size.rightDownAngle<90){if(u.size.leftDownAngle>=90){const g=c.size.rightDownAngle+u.size.leftDownAngle;if(u.size.rightDownAngle>=90){const h=c.size.rightDownAngle+u.size.rightDownAngle;(g>=h||h>180)&&g<=180||h<=180&&u.flipHorizontal()}else if(u.size.rightDownAngle<90){const h=c.size.rightDownAngle+180-u.size.rightDownAngle;(g>=h||h>180)&&g<=180||h<=180&&(u.flipHorizontal(),u.flipVertical())}}else if(u.size.leftDownAngle<90){const g=c.size.rightDownAngle+180-u.size.leftDownAngle;if(u.size.rightDownAngle>=90){const h=c.size.rightDownAngle+u.size.rightDownAngle;(g>=h||h>180)&&g<=180?u.flipVertical():h<=180&&u.flipHorizontal()}else if(u.size.rightDownAngle<90){const h=c.size.rightDownAngle+180-u.size.rightDownAngle;(g>=h||h>180)&&g<=180?u.flipVertical():h<=180&&(u.flipHorizontal(),u.flipVertical())}}}else if(c.size.rightDownAngle>90){if(u.size.leftDownAngle>=90){const g=c.size.rightDownAngle+180-u.size.leftDownAngle;if(u.size.rightDownAngle>=90){const h=c.size.rightDownAngle+180-u.size.rightDownAngle;(g>=h||h>180)&&g<=180?u.flipVertical():h<=180&&(u.flipVertical(),u.flipHorizontal())}else if(u.size.rightDownAngle<90){const h=c.size.rightDownAngle+180-u.size.rightDownAngle;(g>=h||h>180)&&g<=180?u.flipVertical():h<=180&&u.flipHorizontal()}}else if(u.size.leftDownAngle<90){const g=c.size.rightDownAngle+u.size.leftDownAngle;if(u.size.rightDownAngle>=90){const h=c.size.rightDownAngle+180-u.size.rightDownAngle;(g>=h||h>180)&&g<=180||h<=180&&(u.flipVertical(),u.flipHorizontal())}else if(u.size.rightDownAngle<90){const h=c.size.rightDownAngle+u.size.rightDownAngle;(g>=h||h>180)&&g<=180||h<=180&&u.flipHorizontal()}}}})(e,t);const l=(c,u,g,h,f)=>{const b=c.x-f.x;b>0&&(u.x+=b,g.x+=b,h.x+=b,f.x+=b)},i={x:n?n.p2.x:0,y:0},s={x:i.x+t.size.a,y:0},r={x:s.x,y:t.size.h},_=t.isRect?r:pi(s.x,s.y,r.y,t.size.b,t.size.differenceBases),m={x:_.x-t.size.c,y:_.y};return n&&l(n.p3,i,s,_,m),new Xt({name:t.name,square:t.square,p1:i,p2:s,p3:_,p4:m,wP1P2:t.size.a,wP2P3:t.size.b,wP3P4:t.size.c,wP4P1:t.size.d,h:t.size.h,isHorizontalFlipped:t.isHorizontalFlipped,isVerticalFlipped:t.isVerticalFlipped,colorContourLegend:"gray",colorBody:"#d1ffd8",isShowSideContour:!1,baseSpace:30,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4})}function Ln(t,e){const n=[],a=(i,s)=>{const r=parseFloat(i.perimeter.toFixed(0)),_=parseFloat(s.perimeter.toFixed(0)),m=parseFloat(i.wP1P2.toFixed(0)),c=parseFloat(i.wP2P3.toFixed(0)),u=parseFloat(s.wP1P2.toFixed(0)),g=parseFloat(s.wP3P4.toFixed(0)),h=parseFloat(s.wP4P1.toFixed(0));return r===_&&(m===u||m===g)&&c===h},l=(i,s,r)=>{const _=new Lt({name:Ht.STOCK,size:new rt({a:i,c:i,b:r.size.b,d:r.size.b,h:s.h,leftDownAngle:180-r.size.rightDownAngle,rightDownAngle:r.size.rightDownAngle,maxLength:i})}),m={...s.p2},c={x:m.x+_.size.a,y:m.y},u={...s.p3},g={x:u.x+_.size.c,y:u.y};return{piece:_,drawPiece:new Xt({name:_.name,square:_.square,p1:m,p2:c,p3:g,p4:u,wP1P2:_.size.a,wP2P3:_.size.b,wP3P4:_.size.c,wP4P1:_.size.d,h:_.size.h,colorContourLegend:"gray",colorBody:"lightgray",isShowBodyText:!1,isShowSideContour:!1,baseSpace:5,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4})}},o=(i,s,r,_,m)=>{const c=m.wP4P1,u=s.wP2P3,g=180-_.size.leftDownAngle-r.size.rightDownAngle,h=g>0?m.p1.x-s.p2.x+i:m.p4.x-s.p3.x+i,f=c*u*Math.sign(Math.abs(g));f<0&&(console.log("S",f),console.log("a, b, c"),console.log(c,u,h));const b=new Lt({name:Ht.STOCK,size:new rt({a:g>0?h:i,c:g>0?i:h,b:c,d:u,h:s.h,leftDownAngle:180-r.size.rightDownAngle,rightDownAngle:180-_.size.leftDownAngle,maxLength:i})}),C={...s.p2},y=g>0?{x:C.x+h,y:C.y}:{x:C.x+i,y:C.y},S={x:s.p3.x,y:b.size.h},k=g>0?{x:S.x+i,y:S.y}:{x:S.x+h,y:S.y},B=new Xt({name:Ht.REMAINS,square:f,p1:C,p2:y,p3:k,p4:S,wP1P2:b.size.a,wP2P3:b.size.b,wP3P4:b.size.c,wP4P1:b.size.d,h:b.size.h,colorContourLegend:"gray",colorBody:"lightgray",isShowSideContour:!1,baseSpace:10,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4});return{piece:b,drawPiece:B}};return e.forEach((i,s)=>{const r={num:i.num,volume:i.volume,combination:[]};let _,m;const c=u=>{r.combination.push(u.drawPiece),m=u.piece,_=u.drawPiece};i.cuttingCombination.forEach((u,g)=>{const h=new Lt(u);let f=En(h,m,_);if(m&&g>0){const b=a(_,f);if(t&&b){const C=l(t,_,m);c(C)}else if(!b){const C=o(t,_,m,h,f);c(C)}f=En(h,m,_)}c({piece:h,drawPiece:f})}),n.push(r)}),n}function wi(t,e,n,a){const l=a.map((s,r)=>({num:r+1,volume:0,cuttingCombination:s})),o=[];return{drawCombinations:Ln(t,l).filter((s,r)=>{let _=0,m=0;return s.combination.forEach(c=>{_+=c.wP1P2,m+=c.wP3P4}),_<=e&&m<=n?(o.push(a[s.num-1]),!0):!1}),cuttingCombination:o}}function bi(t,e,n){const a=[],l=[],o=e.map(r=>r.blank.square+n),i=Math.min(...o),s=(r,_,m,c)=>{for(let u=r;u<_.length;u++){const g=_[u].blank.square+n,h=m-g;c.push(_[u].blank),h>=i?s(u,_,h,c):h<i&&h>=0&&a.push([...c]),c.pop()}};return s(0,e,t,l),a}function Di(t,e,n){const l=[];return e.forEach(o=>{if(o.basisIndex<=t&&o.b>0){const i=parseFloat(o.b.toFixed(0));l.push({num:o.basisIndex+1,volume:i,cuttingCombination:n[o.basisIndex]})}}),l.sort((o,i)=>o.num-i.num)}class Hn{constructor(e){w(this,"head",0);w(this,"body",[]);w(this,"tail",0);e&&(this.head=e.head,this.body=[...e.body],this.tail=e.tail)}}const vi=(t,e)=>{const n=[];return e.forEach(a=>{const l=new Hn;l.head=a.blank.square,t.forEach(o=>{l.body.push(o.filter(i=>i.square===a.blank.square).length)}),l.tail=a.volume,n.push(l)}),n},xi=t=>{const e=t.map(l=>new Hn(l)),n=t.map(()=>0),a=(l,o)=>(o[l]=-1,o);return t.forEach((l,o)=>{const i=l.body.concat(a(o,[...n]));e[o].body=i.map(s=>s*-1),e[o].tail*=-1}),e};function Ke(t,e=3){return parseFloat((t*1e-6).toFixed(e))}function $t(t,e=!1){const n=[],a=t[0].body.length,l=()=>{let o="V |";for(let i=1;i<=a;i++)o+=` X${i} `;return o+="| P",o};return n.push(l()),t.forEach(o=>{let i=`${parseFloat(o.head.toFixed(3))} |`;o.body.forEach(s=>{i+=s>-1?` ${s}  `:`${s}  `}),i+=e?`= ${o.tail}`:`>= ${o.tail}`,n.push(i)}),n}const Re=t=>{const n=[];let a="|  c  |  b  | ";t.rows[0].rowCoefficients.forEach((s,r)=>{a+=` X${r+1} `}),n.push(a),t.rows.forEach(s=>{const r=parseFloat(s.b.toFixed(2));let _=s.b>=0?`| X${s.basisIndex+1} | ${r} | `:`| X${s.basisIndex+1} | ${r} | `;s.rowCoefficients.forEach(m=>{const c=parseFloat(m.toFixed(2));_+=m>-1?` ${c} `:`${c} `}),n.push(_)});const l=t.rowF;let i=`| F  | ${parseFloat(l.b.toFixed(2))} | `;return l.rowCoefficients.forEach(s=>{const r=parseFloat(s.toFixed(2));i+=s>-1?` ${r} `:`${r} `}),n.push(i),n};function zi(t,e){const o=[`Площадь не обрезанной заготовки: (${t.size.a} * ${t.size.h}) = ${parseFloat(t.square.toFixed(3))} мм² = ${Ke(t.square,3)} м²`,"Имя | Площадь мм²| Объем"];return e.forEach(i=>{const s=`${i.blank.name} | ${parseFloat(i.blank.square.toFixed(3))} | ${i.volume}`;o.push(s)}),o}function Tn(t,e,n,a,l=!1){const i=[],s=parseFloat(e.square.toFixed(3));i.push("===> Результаты вычисления задачи поиска решения оптимального раскроя"),i.push(`
===> Исходные данные`),i.push(`Площадь сырья для раскроя: ${s} мм² =  ${Ke(s,3)} м²`),i.push("Заказ:"),n.forEach((b,C)=>{const y=parseFloat(b.blank.square.toFixed(3));i.push(`N${C+1}. Площадь обреза: ${y} мм² =  ${Ke(y,3)} м²; Количество: ${b.volume} шт.`)}),i.push(`
===> Варианты раскроя изделия исходя из начальных условий (матрица).`),i.push("X - варианты раскроя."),i.push("V - площадь обреза."),i.push("Пересечение V/X -  количество распилов длины V по отношению к длине сырья для раскроя."),$t(a).forEach(b=>i.push(b)),i.push(`
===> Оптимальный раскрой материала`);let r=0,_=0;const m=a[0].body.length-1,c=l?0:1;t.rows.forEach(b=>{if(b.basisIndex<=m&&b.b>0){const C=parseFloat(b.b.toFixed(c)),y=`Количество распилов варианта X${b.basisIndex+1}: ${C} шт.`;i.push(y),r+=b.b,a.forEach(S=>{const k=S.body[b.basisIndex];k&&(_+=b.b*k*S.head)})}});const u=parseFloat((r*e.square).toFixed(3)),g=parseFloat(r.toFixed(c)),h=parseFloat(_.toFixed(3)),f=parseFloat((u-_).toFixed(3));return i.push(`
Количество заготовок для распила: ${g} шт.`),i.push(`Полезная площадь распилов: ${h} мм²  = ${Ke(h,3)} м²`),i.push(`Общая площадь требуемых заготовок для распилов: ${u} мм² =  ${Ke(u,3)} м²`),i.push(`Остатки: ${f} мм² = ${Ke(f,3)} м²`),i}class Kt{constructor(e){w(this,"basisIndex",0);w(this,"rowCoefficients",[]);w(this,"b",0);e&&(this.basisIndex=e.basisIndex,this.rowCoefficients=[...e.rowCoefficients],this.b=e.b)}}class Ut{constructor(e){w(this,"rowCoefficients",[]);w(this,"b",0);e&&(this.rowCoefficients=[...e.rowCoefficients],this.b=e.b)}}class qe{constructor(e){w(this,"rows",[]);w(this,"rowF",new Ut);e&&(this.rowF=new Ut(e.rowF),this.rows=e.rows.map(n=>new Kt(n)))}}const Ci=t=>{const e=new qe,n=[];for(let a=t.length;a>0;a--)n.push(t[0].body.length-a);return n.forEach((a,l)=>{const o=t[l],i=new Kt({basisIndex:a,rowCoefficients:o.body,b:o.tail});e.rows.push(i)}),e.rowF=new Ut({b:0,rowCoefficients:[]}),t[0].body.forEach((a,l)=>{const o=n.includes(l);e.rowF.rowCoefficients.push(o?0:1)}),e},Gt=(t,e)=>{const n=e.rowIndex,a=e.colIndex,l=new qe(t);l.rows[n].basisIndex=a;const o=t.rows[n],i=o.rowCoefficients,s=i[a];t.rows.forEach((m,c)=>{const u=l.rows[c];if(c!==n){const g=m.rowCoefficients[a],h=o.b;u.b=m.b-g*h/s,u.rowCoefficients=m.rowCoefficients.map((f,b)=>{if(b===a)return 0;{const C=o.rowCoefficients[b];return f-g*C/s}})}else u.b=m.b/s,u.rowCoefficients=m.rowCoefficients.map(g=>g/s)});const r=l.rowF,_=t.rowF.rowCoefficients[a];return r.b=t.rowF.b-o.b*_/s,t.rowF.rowCoefficients.forEach((m,c)=>{c!==a?r.rowCoefficients[c]=m-i[c]*_/s:r.rowCoefficients[c]=0}),l};function Pi(t,e){const n=(s,r=!0)=>{const _=g=>{let h=0;const f=g.rows;return f.forEach((b,C)=>{if(r&&b.b<0){const y=f[h].b>=0?0:f[h].b*-1;h=b.b*-1>y?C:h}else if(!r){const y=f[h].b>=0?f[h].b:f[h].b*-1;h=(b.b>=0?b.b:b.b*-1)>y?C:h}}),h},m=(g,h)=>{const f=h.rows[g].rowCoefficients;let b=0;return f.forEach((C,y)=>{const S=f[b]>=0?f[b]:f[b]*-1;b=(C>=0?C:C*-1)>S?y:b}),b},c=_(s),u=m(c,s);return{rowIndex:c,colIndex:u}},a=s=>![...s.rows].filter(r=>r.b<0).length;let l=1,o=new qe(t),i=a(o);for(;!i;){e.push(`
===> Начало итерации N${l}`),e.push(`
===> Этап 2. Шаг 1. Исходная таблица`),e.push(...Re(o)),e.push(`
===> Этап 2. Шаг 2. Проверка свободных членов на допустимость решения`),e.push(`Все свободные члены >= 0 ? Ответ:${i}`);const s=n(o);e.push(`
===> Этап 2. Шаг 3. Поиск ведущей строки и столбца`),e.push(`Строка: ${s.rowIndex}, столбец: ${s.colIndex}`),o=Gt(o,s),e.push(`
===> Этап 2. Шаг 4. Расчет новой симплекс таблицы `),e.push(...Re(o)),e.push(`
===> Конец итерации N${l}`),i=a(o),l++}return o}function Ai(t,e){const n=(s,r=!0)=>{const _=(g,h)=>{let f=0;return h.forEach((b,C)=>{const y=b.b/b.rowCoefficients[g];if(y>=0){const S=h[f].b/h[f].rowCoefficients[g];f=y<S||S<0?C:f}}),f},c=(g=>{let h=0;return g.forEach((f,b)=>{if(r&&f<0){const C=g[h]*-1;h=f*-1>C?b:h}else if(!r){const C=g[h]>=0?g[h]:g[h]*-1;h=(f>=0?f:f*-1)>C?b:h}}),h})(s.rowF.rowCoefficients);return{rowIndex:_(c,s.rows),colIndex:c}},a=s=>![...s.rowF.rowCoefficients].filter(r=>r<0).length;let l=1,o=new qe(t),i=a(o);for(;!i;){e.push(`
===> Начало итерации N${l}`),e.push(`
===> Этап 3. Шаг 1. Исходная таблица`),e.push(...Re(o)),e.push(`
===> Этап 3. Шаг 2. Проверка коэффициентов функции F на допустимость решения.`),e.push(`Все коэффициентов >= 0 ? Ответ:${i}`);const s=n(o);e.push(`
===> Этап 3. Шаг 3. Поиск ведущей строки и столбца для коэффициентов функции F`),e.push(`Строка: ${s.rowIndex}, столбец: ${s.colIndex}`),o=Gt(o,s),e.push(`
===> Этап 3. Шаг 4. Расчет новой симплекс таблицы `),e.push(...Re(o)),e.push(`
===> Конец итерации N${l}`),i=a(o),l++}return o}function yi(t,e){const n=m=>!m.rows.filter(c=>+c.b.toFixed(2)%1!==0).length,a=(m,c=2)=>{const u=new qe(m);return u.rows.forEach(g=>{g.b=Number(g.b.toFixed(c)),g.rowCoefficients=g.rowCoefficients.map(h=>Number(h.toFixed(c)))}),u.rowF.rowCoefficients=u.rowF.rowCoefficients.map(g=>Number(g.toFixed(c))),u},l=m=>{const c=f=>{let b=0,C=0;return f.rows.forEach((y,S)=>{const k=y.b%1;k>b&&(b=k,C=S)}),e.push(`Максимальная дробная часть:${b}`),e.push(`Индекс максимальной дробной части:${C}`),C},u=f=>{const b=f%1;return f>=0?-b:b<0?-1-b:b},g=c(m),h=new Kt(m.rows[g]);return h.b=u(h.b),h.rowCoefficients=[...h.rowCoefficients.map(f=>u(f)),1],h},o=m=>{const c=(u,g)=>{let h=0;return g.forEach((f,b)=>{const C=u/f;if(C>0){const y=f/g[h];h=C<y||y<0?b:h}}),h};return{rowIndex:r.rows.length-1,colIndex:c(m.b,m.rowCoefficients)}},i=(m,c)=>{const u=h=>{const f=new qe(h);return f.rows.forEach(b=>b.rowCoefficients.push(0)),f.rowF.rowCoefficients.push(0),f},g=new qe(m);return r=u(r),g.rows.push(c),g};let s=1,r=new qe(t),_=n(r);for(e.push(`
===> Этап 4. Шаг 0. Проверка свободных членов на целочисленность.`),e.push(`Все свободные члены b целые ? Ответ:${_}`),r=a(r);!_;){e.push(`
===> Начало итерации N${s}`),e.push(`
===> Этап 4. Шаг 1. Исходная таблица`),e.push(...Re(r)),e.push(`
===> Этап 4. Шаг 2. Формирование нового ограничения`);const m=l(r);r=i(r,m),e.push(...Re(r)),e.push(`
===> Этап 4. Шаг 3. Поиск ведущей строки и столбца`);const c=o(m);e.push(`
===> Этап 4. Шаг 4. Расчет новой симплекс таблицы `),r=a(Gt(r,c)),e.push(...Re(r)),e.push(`
===> Этап 4. Шаг 4. Проверка свободных членов на целочисленность.`),_=n(r),e.push(`Все свободные члены b целые ? Ответ: ${_}`),e.push(`
===> Конец итерации N${s}`),s>100&&(_=!0,e.push(`
===> Внимание! Завершилось после 100 итераций`)),s++}return r}const Fi=t=>{const e=t.stockSawing*2*t.rawWorkPiece.size.h,n=[];n.push(`
===> Этап 0. Подготовка данных и коэффициентов `),n.push(`Припуск распила: ${t.stockSawing}`),n.push(`Площадь припуска распила: ${e} мм² = ${Ke(e)} м²`),n.push(`
Таблица заготовок и их параметров`),n.push(...zi(t.rawWorkPiece,t.listOrders));const a=bi(t.rawWorkPiece.square,t.listOrders,e),l=wi(t.stockSawing,t.rawWorkPiece.size.a,t.rawWorkPiece.size.c,a),o=l.cuttingCombination;n.push(`
===> Этап 0. Шаг 1. Варианты раскроя изделия исходя из начальных условий.`),n.push(`Количество комбинаций: ${l.cuttingCombination.length}`),console.log(l),console.log(n),console.log(o),n.push(`
===> Этап 1. Переход к канонической форме задачи линейного программирования путем введения неотрицательных дополнительных балансовых переменных.`);const i=vi(o,t.listOrders);n.push(`
===> Этап 1. Шаг 1. Получение матрицы коэффициентов`),n.push(...$t(i));const s=xi(i);n.push(`
===> Этап 1. Шаг 2. Переход к канонической форме задачи линейного программирования путем введения неотрицательных дополнительных балансовых переменных.`),n.push(...$t(s,!0)),n.push(`
===> Этап 2.  Проверка симплекс таблицы на допустимость решения. Расчет новой симплекс таблицы. `),n.push(`
===> Этап 2. Шаг 0. Инициализация симплекс таблицы`);const r=Ci(s);n.push(...Re(r));const _=Pi(r,n);n.push(`
===> Этап 3. Основной алгоритм решения задачи ЛП симплекс-методом. Расчет новой симплекс таблицы. `);const m=Ai(_,n);n.push(...Re(m)),n.push(...Tn(m,t.rawWorkPiece,t.listOrders,i).map(h=>`
${h}`)),n.push(`
===> Этап 4. Алгоритм поиска целочисленного решения ЗЛП методом Гомори `);const c=yi(m,n);n.push(...Tn(c,t.rawWorkPiece,t.listOrders,i,!0).map(h=>`
${h}`));const u=Di(i[0].body.length-1,c.rows,o),g=Ln(t.stockSawing,u);return console.log(g),{listLogMessages:n,drawCombinations:l.drawCombinations,optimumDrawCombinations:g}};function Si(t){let e,n;return{c(){e=v("label"),n=Y(t[1]),this.h()},l(a){e=x(a,"LABEL",{for:!0,class:!0});var l=z(e);n=W(l,t[1]),l.forEach(D),this.h()},h(){d(e,"for",t[0]),d(e,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white")},m(a,l){le(a,e,l),p(e,n)},p(a,[l]){l&2&&Vn(n,a[1]),l&1&&d(e,"for",a[0])},i:Le,o:Le,d(a){a&&D(e)}}}function ki(t,e,n){let{forName:a}=e,{text:l}=e;return t.$$set=o=>{"forName"in o&&n(0,a=o.forName),"text"in o&&n(1,l=o.text)},[a,l]}class Ei extends ht{constructor(e){super(),ct(this,e,ki,Si,ut,{forName:0,text:1})}}function Ti(t){let e,n,a,l,o;e=new Ei({props:{forName:t[1],text:t[6]}});function i(r){t[7](r)}let s={id:t[1],type:t[3],placeholder:t[2],required:t[4],onChange:t[5]};return t[0]!==void 0&&(s.value=t[0]),a=new Te({props:s}),ce.push(()=>ue(a,"value",i)),{c(){K(e.$$.fragment),n=R(),K(a.$$.fragment)},l(r){G(e.$$.fragment,r),n=I(r),G(a.$$.fragment,r)},m(r,_){Z(e,r,_),le(r,n,_),Z(a,r,_),o=!0},p(r,[_]){const m={};_&2&&(m.forName=r[1]),_&64&&(m.text=r[6]),e.$set(m);const c={};_&2&&(c.id=r[1]),_&8&&(c.type=r[3]),_&4&&(c.placeholder=r[2]),_&16&&(c.required=r[4]),_&32&&(c.onChange=r[5]),!l&&_&1&&(l=!0,c.value=r[0],fe(()=>l=!1)),a.$set(c)},i(r){o||(O(e.$$.fragment,r),O(a.$$.fragment,r),o=!0)},o(r){M(e.$$.fragment,r),M(a.$$.fragment,r),o=!1},d(r){J(e,r),r&&D(n),J(a,r)}}}function Ri(t,e,n){let{id:a=""}=e,{placeholder:l=""}=e,{type:o="text"}=e,{required:i=!1}=e,{value:s}=e,{onChange:r=void 0}=e,{label:_=""}=e;function m(c){s=c,n(0,s)}return t.$$set=c=>{"id"in c&&n(1,a=c.id),"placeholder"in c&&n(2,l=c.placeholder),"type"in c&&n(3,o=c.type),"required"in c&&n(4,i=c.required),"value"in c&&n(0,s=c.value),"onChange"in c&&n(5,r=c.onChange),"label"in c&&n(6,_=c.label)},[s,a,l,o,i,r,_,m]}class Pt extends ht{constructor(e){super(),ct(this,e,Ri,Ti,ut,{id:1,placeholder:2,type:3,required:4,value:0,onChange:5,label:6})}}class Nn{constructor(e){w(this,"_name");w(this,"_square");w(this,"_p1");w(this,"_p2");w(this,"_p3");w(this,"_p4");w(this,"_wP1P2");w(this,"_wP2P3");w(this,"_wP3P4");w(this,"_wP4P1");w(this,"_h");w(this,"_colorBody");w(this,"_colorContour");w(this,"_colorTextLegend");w(this,"_colorContourLegend");w(this,"isHorizontalFlipped");w(this,"isVerticalFlipped");w(this,"isShowBodyText");w(this,"isShowBaseContour");w(this,"isShowSideContour");w(this,"baseSpace");w(this,"sideSpace");w(this,"halfYBoard");w(this,"halfXBoard");w(this,"wDivider");w(this,"hDivider");this._name=e.name,this._square=e.square,this._p1={x:e.p1.x,y:e.p1.y},this._p2={x:e.p2.x,y:e.p2.y},this._p3={x:e.p3.x,y:e.p3.y},this._p4={x:e.p4.x,y:e.p4.y},this._wP1P2=e.wP1P2,this._wP2P3=e.wP2P3,this._wP3P4=e.wP3P4,this._wP4P1=e.wP4P1,this._h=e.h,this.isHorizontalFlipped=e.isHorizontalFlipped!==void 0?e.isHorizontalFlipped:!1,this.isVerticalFlipped=e.isVerticalFlipped!==void 0?e.isVerticalFlipped:!1,this.isShowBodyText=e.isShowBodyText!==void 0?e.isShowBodyText:!0,this.isShowBaseContour=e.isShowBaseContour!==void 0?e.isShowBaseContour:!0,this.isShowSideContour=e.isShowSideContour!==void 0?e.isShowSideContour:!0,this.baseSpace=e.baseSpace??20,this.sideSpace=e.sideSpace??20,this.halfXBoard=e.halfXBoard??250,this.halfYBoard=e.halfYBoard??50,this.wDivider=e.wDivider??2,this.hDivider=e.hDivider??2,this._colorBody=e.colorBody??"#d1ffd8",this._colorContour=e.colorContour??"#B70A02",this._colorTextLegend=e.colorTextLegend??"black",this._colorContourLegend=e.colorContourLegend??"gray"}get perimeter(){return this._wP1P2+this._wP2P3+this._wP3P4+this._wP4P1}get colorTextLegend(){return this._colorTextLegend}get colorContourLegend(){return this._colorContourLegend}get colorBody(){return this._colorBody}get name(){return this._name}get square(){return this._square}get p1(){return this._p1}get p2(){return this._p2}get p3(){return this._p3}get p4(){return this._p4}get wP1P2(){return this._wP1P2}get wP2P3(){return this._wP2P3}get wP3P4(){return this._wP3P4}get wP4P1(){return this._wP4P1}get h(){return this._h}get colorContour(){return this._colorContourLegend}}const Ii=(t,e,n,a,l)=>{const o=l>0?1:-1;return{x:t-o*Math.sqrt(Math.abs(a*a-(e-n)*(e-n))),y:n}};function Bi(t,e=3){return parseFloat((t*1e-6).toFixed(e))}const Yt={REMAINS:"Ост.",STOCK:"п."};function On(t,e=1200,n=300){const a=t.appendChild(document.createElement("div"));a.className="flex flex-row justify-around items-center";const l=a.appendChild(document.createElement("canvas")),o=l.getContext("2d");return l.width=e,l.height=n,o}function Wt(t,e){const n=i=>i/t.wDivider+t.halfXBoard,a=i=>i/t.hDivider+t.halfYBoard,o=(i,s)=>{s.setLineDash([5,3]),s.textBaseline="bottom",s.lineDashOffset=1,s.strokeStyle=i.colorContourLegend,s.fillStyle=i.colorTextLegend,s.beginPath();const r=(g,h,f,b=0,C=0)=>{s.setLineDash([5,3]),s.beginPath(),s.moveTo(n(g.x),a(g.y)),s.lineTo(n(g.x)+b,a(g.y)+C),s.lineTo(n(h.x)+b,a(h.y)+C),s.lineTo(n(h.x),a(h.y)),s.stroke(),s.closePath()},_=(g,h,f,b=-i.baseSpace)=>{r(g,h,f,0,b);const C=parseFloat(f.toFixed(1)),y=` ${C} мм`,S=b>0?b+15:b-5,k=C>100?y.length:-5,B={x:(n(h.x)+n(g.x))/2-k,y:(a(h.y)+a(g.y))/2+S};s.fillText(y,B.x,B.y)},m=(g,h,f,b=30)=>{r(g,h,f,b);const C=b>0?b*3:b*4,y={x:(n(h.x)+n(g.x))/2+C,y:(a(h.y)+a(g.y))/2};s.fillText(` ${f} мм`,y.x,y.y)},c=(g,h,f)=>{_(g,h,f,i.baseSpace)},u=(g,h,f)=>{m(g,h,f,-i.baseSpace)};i.isShowBaseContour&&(_(i.p1,i.p2,i.wP1P2),c(i.p3,i.p4,i.wP3P4)),i.isShowSideContour&&(m(i.p2,i.p3,i.wP2P3),u(i.p4,i.p1,i.wP4P1))};if(e.strokeStyle=t.colorContour,e.fillStyle=t.colorBody,e.beginPath(),e.setLineDash([]),e.moveTo(n(t.p1.x),a(t.p1.y)),e.lineTo(n(t.p1.x),a(t.p1.y)),e.lineTo(n(t.p2.x),a(t.p2.y)),e.lineTo(n(t.p3.x),a(t.p3.y)),e.lineTo(n(t.p4.x),a(t.p4.y)),e.lineTo(n(t.p1.x),a(t.p1.y)),e.stroke(),e.fill(),t.isShowBodyText){e.fillStyle=t.colorTextLegend;const i=t.isHorizontalFlipped?"( ⇆ )":"",s=t.isVerticalFlipped?"( ⇅ )":"",r=Bi(t.square),_=` S=${r} м² ${i} ${s}`;if(t.name===Yt.REMAINS&&r>0){const m=t.wP1P2>=t.wP3P4?n(t.p1.x)+10:n(t.p4.x),c=t.wP1P2>=t.wP3P4?a(t.h)/2-10:a(t.h)+50,u={x:m,y:c};e.fillText(_,u.x,u.y),e.setLineDash([5,3]),e.beginPath(),t.wP1P2>=t.wP3P4?(e.moveTo(u.x,u.y),e.lineTo(n(t.p1.x+40),a(t.p1.y))):(e.moveTo(u.x+10,u.y-10),e.lineTo(n(t.p4.x+40),a(t.p4.y))),e.stroke(),e.closePath()}else{const m=(n(t.p2.x)+n(t.p1.x))/2-_.length*2,c=(n(t.p3.x)+n(t.p4.x))/2,u={x:2*m*c/(m+c),y:a(t.h)/2+t.halfYBoard/2};e.fillText(_,u.x,u.y)}e.closePath()}o(t,e)}function Mn(t){for(;t!=null&&t.firstChild&&t.lastChild;)t.removeChild(t.lastChild)}function Rn(t,e,n,a){const l=i=>new Nn({name:"rawPiece",square:i.square,p1:{x:0,y:0},p2:{x:i.size.a,y:0},p3:{x:i.size.a,y:i.size.h},p4:{x:0,y:i.size.h},wP1P2:i.size.a,wP2P3:i.size.b,wP3P4:i.size.c,wP4P1:i.size.d,h:i.size.h,colorBody:"lightgray",isShowBodyText:!1,isShowSideContour:!1,baseSpace:60,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4}),o=document.getElementById(t);o&&(Mn(o),a.forEach(i=>{i.num;const s=On(o);Wt(l(n),s),i.combination.forEach(m=>{Wt(m,s)}),s.beginPath(),s.font="bold 14pt Arial",s.fillStyle="black";const r=i.volume?" (x"+i.volume+")":"",_=i.combination.filter(m=>m.name!==Yt.REMAINS&&m.name!==Yt.STOCK).length;s.fillText(`Вариант №${i.num}${r}.  Деталей ${_}`,20,20),s.stroke(),s.fill(),s.closePath()}))}function Vi(t,e){const n=document.getElementById(t);if(n){Mn(n);const a=On(n,1e3,200),l={x:0,y:0},o={x:l.x+e.size.a,y:0},i={x:o.x,y:e.size.h},s=e.isRect?i:Ii(o.x,o.y,i.y,e.size.b,e.size.differenceBases),r={x:s.x-e.size.c,y:s.y},_=new Nn({name:e.name,square:e.square,p1:l,p2:o,p3:s,p4:r,wP1P2:e.size.a,wP2P3:e.size.b,wP3P4:e.size.c,wP4P1:e.size.d,h:e.size.h,isHorizontalFlipped:e.isHorizontalFlipped,isVerticalFlipped:e.isVerticalFlipped});Wt(_,a)}}function In(t,e,n){const a=t.slice();return a[22]=e[n],a[23]=e,a[24]=n,a}function Bn(t){let e,n,a=t[24]+1+"",l,o,i,s,r,_,m,c,u,g,h,f,b,C,y,S,k,B,j,X,P,E,ee,q,_e,He,pe,Q,Ne,we,ie,re,Oe,te,ne,de,be,he,ge;function H(A){t[10](A,t[22])}let De={type:"text",id:"namePiece",placeholder:"Наименования детали..."};t[22].blank.name!==void 0&&(De.value=t[22].blank.name),s=new Te({props:De}),ce.push(()=>ue(s,"value",H));function ft(A){t[11](A,t[22])}let Ge={type:"number",numSettings:{min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength},id:"lengthAPiece",placeholder:"Длина верхнего основания детали..."};t[22].blank.size.a!==void 0&&(Ge.value=t[22].blank.size.a),c=new Te({props:Ge}),ce.push(()=>ue(c,"value",ft));function Fe(A){t[12](A,t[22])}let Ze={id:"lengthBPiece",type:"number",numSettings:{min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength},disabled:!0,placeholder:"Длина правой стороны детали..."};t[22].blank.size.b!==void 0&&(Ze.value=t[22].blank.size.b),f=new Te({props:Ze}),ce.push(()=>ue(f,"value",Fe));function dt(A){t[13](A,t[22])}let ve={id:"lengthCPiece",type:"number",numSettings:{min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength},placeholder:"Длина нижнего основания детали..."};t[22].blank.size.c!==void 0&&(ve.value=t[22].blank.size.c),S=new Te({props:ve}),ce.push(()=>ue(S,"value",dt));function gt(A){t[14](A,t[22])}let Je={id:"lengthDPiece",type:"number",disabled:!0,numSettings:{min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength},placeholder:"Длина левой стороны детали..."};t[22].blank.size.d!==void 0&&(Je.value=t[22].blank.size.d),X=new Te({props:Je}),ce.push(()=>ue(X,"value",gt));function Se(A){t[15](A,t[22])}let Qe={id:"leftDownAngle",type:"number",numSettings:{min:t[22].blank.size.minAngle,max:t[22].blank.size.maxAngle},placeholder:"Левый угол при нижнем основании детали..."};t[22].blank.size.leftDownAngle!==void 0&&(Qe.value=t[22].blank.size.leftDownAngle),q=new Te({props:Qe}),ce.push(()=>ue(q,"value",Se));function mt(A){t[16](A,t[22])}let xe={id:"rightDownAngle",type:"number",disabled:!0,numSettings:{min:t[22].blank.size.minAngle,max:t[22].blank.size.maxAngle},placeholder:"Правый угол при нижнем основании детали..."};t[22].blank.size.rightDownAngle!==void 0&&(xe.value=t[22].blank.size.rightDownAngle),Q=new Te({props:xe}),ce.push(()=>ue(Q,"value",mt));function _t(A){t[17](A,t[22])}let je={id:"volumePiece",type:"number",numSettings:{min:t[22].minVolume,max:t[22].maxVolume},placeholder:"Количество деталей данного типа..."};return t[22].volume!==void 0&&(je.value=t[22].volume),re=new Te({props:je}),ce.push(()=>ue(re,"value",_t)),{c(){e=v("tr"),n=v("th"),l=Y(a),o=R(),i=v("td"),K(s.$$.fragment),_=R(),m=v("td"),K(c.$$.fragment),g=R(),h=v("td"),K(f.$$.fragment),C=R(),y=v("td"),K(S.$$.fragment),B=R(),j=v("td"),K(X.$$.fragment),E=R(),ee=v("td"),K(q.$$.fragment),He=R(),pe=v("td"),K(Q.$$.fragment),we=R(),ie=v("td"),K(re.$$.fragment),te=R(),ne=v("tr"),de=v("td"),be=v("div"),he=R(),this.h()},l(A){e=x(A,"TR",{class:!0});var T=z(e);n=x(T,"TH",{scope:!0,class:!0});var ke=z(n);l=W(ke,a),ke.forEach(D),o=I(T),i=x(T,"TD",{class:!0});var se=z(i);G(s.$$.fragment,se),se.forEach(D),_=I(T),m=x(T,"TD",{class:!0});var ze=z(m);G(c.$$.fragment,ze),ze.forEach(D),g=I(T),h=x(T,"TD",{class:!0});var Ce=z(h);G(f.$$.fragment,Ce),Ce.forEach(D),C=I(T),y=x(T,"TD",{class:!0});var oe=z(y);G(S.$$.fragment,oe),oe.forEach(D),B=I(T),j=x(T,"TD",{class:!0});var Pe=z(j);G(X.$$.fragment,Pe),Pe.forEach(D),E=I(T),ee=x(T,"TD",{class:!0});var Ae=z(ee);G(q.$$.fragment,Ae),Ae.forEach(D),He=I(T),pe=x(T,"TD",{class:!0});var ae=z(pe);G(Q.$$.fragment,ae),ae.forEach(D),we=I(T),ie=x(T,"TD",{class:!0});var et=z(ie);G(re.$$.fragment,et),et.forEach(D),T.forEach(D),te=I(A),ne=x(A,"TR",{class:!0});var Me=z(ne);de=x(Me,"TD",{class:!0,colspan:!0});var Ee=z(de);be=x(Ee,"DIV",{id:!0,class:!0}),z(be).forEach(D),Ee.forEach(D),he=I(Me),Me.forEach(D),this.h()},h(){d(n,"scope","row"),d(n,"class","px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"),d(i,"class","min-w-[150px] pr-6 py-4 border-r"),d(m,"class","px-6 py-4"),d(h,"class","px-6 py-4"),d(y,"class","px-6 py-4"),d(j,"class","px-6 py-4"),d(ee,"class","px-6 py-4"),d(pe,"class","px-6 py-4"),d(ie,"class","w-[20px] border-l px-6 py-4"),d(e,"class","bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-[gray]/5 dark:hover:bg-gray-600"),d(be,"id","containerPieceCanvas"+t[24]),d(be,"class","flex flex-col"),d(de,"class","px-6 py-4"),d(de,"colspan","200"),d(ne,"class","bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-[gray]/5 dark:hover:bg-gray-600")},m(A,T){le(A,e,T),p(e,n),p(n,l),p(e,o),p(e,i),Z(s,i,null),p(e,_),p(e,m),Z(c,m,null),p(e,g),p(e,h),Z(f,h,null),p(e,C),p(e,y),Z(S,y,null),p(e,B),p(e,j),Z(X,j,null),p(e,E),p(e,ee),Z(q,ee,null),p(e,He),p(e,pe),Z(Q,pe,null),p(e,we),p(e,ie),Z(re,ie,null),le(A,te,T),le(A,ne,T),p(ne,de),p(de,be),p(ne,he),ge=!0},p(A,T){t=A;const ke={};!r&&T&4&&(r=!0,ke.value=t[22].blank.name,fe(()=>r=!1)),s.$set(ke);const se={};T&4&&(se.numSettings={min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength}),!u&&T&4&&(u=!0,se.value=t[22].blank.size.a,fe(()=>u=!1)),c.$set(se);const ze={};T&4&&(ze.numSettings={min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength}),!b&&T&4&&(b=!0,ze.value=t[22].blank.size.b,fe(()=>b=!1)),f.$set(ze);const Ce={};T&4&&(Ce.numSettings={min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength}),!k&&T&4&&(k=!0,Ce.value=t[22].blank.size.c,fe(()=>k=!1)),S.$set(Ce);const oe={};T&4&&(oe.numSettings={min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength}),!P&&T&4&&(P=!0,oe.value=t[22].blank.size.d,fe(()=>P=!1)),X.$set(oe);const Pe={};T&4&&(Pe.numSettings={min:t[22].blank.size.minAngle,max:t[22].blank.size.maxAngle}),!_e&&T&4&&(_e=!0,Pe.value=t[22].blank.size.leftDownAngle,fe(()=>_e=!1)),q.$set(Pe);const Ae={};T&4&&(Ae.numSettings={min:t[22].blank.size.minAngle,max:t[22].blank.size.maxAngle}),!Ne&&T&4&&(Ne=!0,Ae.value=t[22].blank.size.rightDownAngle,fe(()=>Ne=!1)),Q.$set(Ae);const ae={};T&4&&(ae.numSettings={min:t[22].minVolume,max:t[22].maxVolume}),!Oe&&T&4&&(Oe=!0,ae.value=t[22].volume,fe(()=>Oe=!1)),re.$set(ae)},i(A){ge||(O(s.$$.fragment,A),O(c.$$.fragment,A),O(f.$$.fragment,A),O(S.$$.fragment,A),O(X.$$.fragment,A),O(q.$$.fragment,A),O(Q.$$.fragment,A),O(re.$$.fragment,A),ge=!0)},o(A){M(s.$$.fragment,A),M(c.$$.fragment,A),M(f.$$.fragment,A),M(S.$$.fragment,A),M(X.$$.fragment,A),M(q.$$.fragment,A),M(Q.$$.fragment,A),M(re.$$.fragment,A),ge=!1},d(A){A&&D(e),J(s),J(c),J(f),J(S),J(X),J(q),J(Q),J(re),A&&D(te),A&&D(ne)}}}function qi(t){let e;return{c(){e=v("div"),this.h()},l(n){e=x(n,"DIV",{id:!0,class:!0}),z(e).forEach(D),this.h()},h(){d(e,"id","containerWorkPieceCanvas"),d(e,"class","flex flex-col")},m(n,a){le(n,e,a)},p:Le,d(n){n&&D(e)}}}function Li(t){let e,n,a;return{c(){e=v("div"),this.h()},l(l){e=x(l,"DIV",{id:!0,contenteditable:!0}),z(e).forEach(D),this.h()},h(){d(e,"id","log"),d(e,"contenteditable","true"),t[3]===void 0&&oi(()=>t[18].call(e))},m(l,o){le(l,e,o),t[3]!==void 0&&(e.innerHTML=t[3]),n||(a=vt(e,"input",t[18]),n=!0)},p(l,o){o&8&&l[3]!==e.innerHTML&&(e.innerHTML=l[3])},d(l){l&&D(e),n=!1,a()}}}function Hi(t){let e;return{c(){e=v("div"),this.h()},l(n){e=x(n,"DIV",{id:!0,class:!0}),z(e).forEach(D),this.h()},h(){d(e,"id","containerOptimumCombinationsCanvas"),d(e,"class","flex flex-col")},m(n,a){le(n,e,a)},p:Le,d(n){n&&D(e)}}}function Ni(t){let e,n,a,l,o,i,s,r,_,m,c,u,g,h,f,b,C,y,S,k,B,j,X,P,E,ee,q,_e,He,pe,Q,Ne,we,ie,re,Oe,te,ne,de,be,he,ge,H,De,ft,Ge,Fe,Ze,dt,ve,gt,Je,Se,Qe,mt,xe,_t,je,A,T,ke,se,ze,Ce,oe,Pe,Ae,ae,et,Me,Ee,yt,Xe,Ft,St,tt,Ie,kt,xt,Et,nt,Tt,Rt,it,Be,It,st,Ve,zt,Bt,Zt;function Xn(F){t[6](F)}let Jt={label:"Имя",id:"nameWorkPiece",type:"text",placeholder:"Имя исходной заготовки...",required:!0};t[1].name!==void 0&&(Jt.value=t[1].name),h=new Pt({props:Jt}),ce.push(()=>ue(h,"value",Xn)),y=new Pt({props:{label:"Длина, мм.",id:"lengthRawPiece",type:"number",placeholder:"Длина исходной заготовки(в миллиметрах)...",value:t[1].size.a,onChange:t[7],required:!0}});function $n(F){t[8](F)}let Qt={label:"Ширина (h), мм.",id:"widthRawPiece",type:"number",placeholder:"Ширина исходной заготовки (в миллиметрах)...",required:!0};t[1].size.h!==void 0&&(Qt.value=t[1].size.h),B=new Pt({props:Qt}),ce.push(()=>ue(B,"value",$n));function Un(F){t[9](F)}let jt={label:"Припуск, мм.",id:"stockSawing",type:"number",placeholder:"Припуск при распиле (в миллиметрах)...",required:!0};t[0]!==void 0&&(jt.value=t[0]),E=new Pt({props:jt}),ce.push(()=>ue(E,"value",Un)),Q=new ui({props:{src:gi,class:"max-h-72 m-auto"}});let $e=t[2],L=[];for(let F=0;F<$e.length;F+=1)L[F]=Bn(In(t,$e,F));const Yn=F=>M(L[F],1,1,()=>{L[F]=null});return Ie=new qt({props:{title:"Варианты раскроя",isOpen:!0,$$slots:{default:[qi]},$$scope:{ctx:t}}}),Be=new qt({props:{title:"Результаты вычислений",$$slots:{default:[Li]},$$scope:{ctx:t}}}),Ve=new qt({props:{title:"Оптимальные варианты раскроя",$$slots:{default:[Hi]},$$scope:{ctx:t}}}),{c(){e=v("div"),n=v("div"),a=v("main"),l=v("div"),o=v("div"),i=v("section"),s=v("div"),r=v("h2"),_=Y("Параметры исходной заготовки для распила"),m=R(),c=v("form"),u=v("div"),g=v("div"),K(h.$$.fragment),b=R(),C=v("div"),K(y.$$.fragment),S=R(),k=v("div"),K(B.$$.fragment),X=R(),P=v("div"),K(E.$$.fragment),q=R(),_e=v("h2"),He=Y("Схема детали"),pe=R(),K(Q.$$.fragment),Ne=R(),we=v("div"),ie=v("button"),re=Y("Запустить расчет"),Oe=R(),te=v("div"),ne=v("h2"),de=Y("Список требуемых деталей из заказа"),be=R(),he=v("table"),ge=v("thead"),H=v("tr"),De=v("th"),ft=Y("№"),Ge=R(),Fe=v("th"),Ze=Y("Имя"),dt=R(),ve=v("th"),gt=Y("Длина верхнего основания (a), мм."),Je=R(),Se=v("th"),Qe=Y("Длина правой стороны (b), мм."),mt=R(),xe=v("th"),_t=Y("Длина нижнего основания (c), мм."),je=R(),A=v("th"),T=Y("Длина левой стороны (d), мм."),ke=R(),se=v("th"),ze=Y("Левый угол при нижнем основании (f), °"),Ce=R(),oe=v("th"),Pe=Y("Правый угол при нижнем основании (e), °"),Ae=R(),ae=v("th"),et=Y("Количество, шт."),Me=R(),Ee=v("tbody");for(let F=0;F<L.length;F+=1)L[F].c();yt=R(),Xe=v("button"),Ft=Y("+ Добавить деталь"),St=R(),tt=v("div"),K(Ie.$$.fragment),kt=R(),xt=v("hr"),Et=R(),nt=v("h2"),Tt=Y("Результаты"),Rt=R(),it=v("div"),K(Be.$$.fragment),It=R(),st=v("div"),K(Ve.$$.fragment),this.h()},l(F){e=x(F,"DIV",{class:!0});var V=z(e);n=x(V,"DIV",{class:!0});var ye=z(n);a=x(ye,"MAIN",{class:!0});var ot=z(a);l=x(ot,"DIV",{class:!0});var pt=z(l);o=x(pt,"DIV",{class:!0});var N=z(o);i=x(N,"SECTION",{class:!0});var wt=z(i);s=x(wt,"DIV",{class:!0});var Ue=z(s);r=x(Ue,"H2",{class:!0});var bt=z(r);_=W(bt,"Параметры исходной заготовки для распила"),bt.forEach(D),m=I(Ue),c=x(Ue,"FORM",{action:!0});var $=z(c);u=x($,"DIV",{class:!0});var me=z(u);g=x(me,"DIV",{class:!0});var en=z(g);G(h.$$.fragment,en),en.forEach(D),b=I(me),C=x(me,"DIV",{class:!0});var tn=z(C);G(y.$$.fragment,tn),tn.forEach(D),S=I(me),k=x(me,"DIV",{class:!0});var nn=z(k);G(B.$$.fragment,nn),nn.forEach(D),X=I(me),P=x(me,"DIV",{class:!0});var sn=z(P);G(E.$$.fragment,sn),sn.forEach(D),me.forEach(D),$.forEach(D),Ue.forEach(D),wt.forEach(D),q=I(N),_e=x(N,"H2",{class:!0});var on=z(_e);He=W(on,"Схема детали"),on.forEach(D),pe=I(N),G(Q.$$.fragment,N),Ne=I(N),we=x(N,"DIV",{class:!0});var an=z(we);ie=x(an,"BUTTON",{class:!0});var ln=z(ie);re=W(ln,"Запустить расчет"),ln.forEach(D),an.forEach(D),Oe=I(N),te=x(N,"DIV",{class:!0});var at=z(te);ne=x(at,"H2",{class:!0});var rn=z(ne);de=W(rn,"Список требуемых деталей из заказа"),rn.forEach(D),be=I(at),he=x(at,"TABLE",{class:!0});var Ct=z(he);ge=x(Ct,"THEAD",{class:!0});var hn=z(ge);H=x(hn,"TR",{});var U=z(H);De=x(U,"TH",{scope:!0,class:!0});var cn=z(De);ft=W(cn,"№"),cn.forEach(D),Ge=I(U),Fe=x(U,"TH",{scope:!0,class:!0});var un=z(Fe);Ze=W(un,"Имя"),un.forEach(D),dt=I(U),ve=x(U,"TH",{scope:!0,class:!0});var fn=z(ve);gt=W(fn,"Длина верхнего основания (a), мм."),fn.forEach(D),Je=I(U),Se=x(U,"TH",{scope:!0,class:!0});var dn=z(Se);Qe=W(dn,"Длина правой стороны (b), мм."),dn.forEach(D),mt=I(U),xe=x(U,"TH",{scope:!0,class:!0});var gn=z(xe);_t=W(gn,"Длина нижнего основания (c), мм."),gn.forEach(D),je=I(U),A=x(U,"TH",{scope:!0,class:!0});var mn=z(A);T=W(mn,"Длина левой стороны (d), мм."),mn.forEach(D),ke=I(U),se=x(U,"TH",{scope:!0,class:!0});var _n=z(se);ze=W(_n,"Левый угол при нижнем основании (f), °"),_n.forEach(D),Ce=I(U),oe=x(U,"TH",{scope:!0,class:!0});var pn=z(oe);Pe=W(pn,"Правый угол при нижнем основании (e), °"),pn.forEach(D),Ae=I(U),ae=x(U,"TH",{scope:!0,class:!0});var wn=z(ae);et=W(wn,"Количество, шт."),wn.forEach(D),U.forEach(D),hn.forEach(D),Me=I(Ct),Ee=x(Ct,"TBODY",{});var bn=z(Ee);for(let Vt=0;Vt<L.length;Vt+=1)L[Vt].l(bn);bn.forEach(D),Ct.forEach(D),yt=I(at),Xe=x(at,"BUTTON",{class:!0});var Dn=z(Xe);Ft=W(Dn,"+ Добавить деталь"),Dn.forEach(D),at.forEach(D),St=I(N),tt=x(N,"DIV",{class:!0});var vn=z(tt);G(Ie.$$.fragment,vn),vn.forEach(D),kt=I(N),xt=x(N,"HR",{class:!0}),Et=I(N),nt=x(N,"H2",{class:!0});var xn=z(nt);Tt=W(xn,"Результаты"),xn.forEach(D),Rt=I(N),it=x(N,"DIV",{class:!0});var zn=z(it);G(Be.$$.fragment,zn),zn.forEach(D),It=I(N),st=x(N,"DIV",{class:!0});var Cn=z(st);G(Ve.$$.fragment,Cn),Cn.forEach(D),N.forEach(D),pt.forEach(D),ot.forEach(D),ye.forEach(D),V.forEach(D),this.h()},h(){d(r,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),d(g,"class","sm:col-span-2"),d(C,"class","w-full"),d(k,"class","w-full"),d(P,"class","w-full"),d(u,"class","grid gap-4 sm:grid-cols-2 sm:gap-6"),d(c,"action","#"),d(s,"class","py-8 px-4 mx-auto max-w-2xl lg:py-16"),d(i,"class","bg-white dark:bg-gray-900"),d(_e,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),d(ie,"class","inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center float-right text-white bg-primary-600 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-700"),d(we,"class","relative overflow-x-auto"),d(ne,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),d(De,"scope","col"),d(De,"class","px-6 py-3"),d(Fe,"scope","col"),d(Fe,"class","px-6 py-3"),d(ve,"scope","col"),d(ve,"class","px-6 py-3"),d(Se,"scope","col"),d(Se,"class","px-6 py-3"),d(xe,"scope","col"),d(xe,"class","px-6 py-3"),d(A,"scope","col"),d(A,"class","px-6 py-3"),d(se,"scope","col"),d(se,"class","px-6 py-3"),d(oe,"scope","col"),d(oe,"class","px-6 py-3"),d(ae,"scope","col"),d(ae,"class","px-6 py-3"),d(ge,"class","text-xs text-gray-600 uppercase bg-gray-50 dark:bg-gray-600 dark:text-gray-400"),d(he,"class","w-full text-sm text-left text-gray-500 dark:text-gray-400"),d(Xe,"class","inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center float-right text-white bg-primary-600 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-700"),d(te,"class","relative overflow-x-auto"),d(tt,"class","mt-5"),d(xt,"class","my-10"),d(nt,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),d(it,"class","mt-5"),d(st,"class","mt-5"),d(o,"class","flex-auto max-w-8xl min-w-0 pt-6 lg:px-8 lg:pt-8 pb:12 xl:pb-24 lg:pb-16"),d(l,"class","flex w-full"),d(a,"class","flex-auto w-full min-w-0 lg:static lg:max-h-full lg:overflow-visible"),d(n,"class","lg:flex"),d(e,"class","w-full px-4 mx-auto max-w-8xl")},m(F,V){le(F,e,V),p(e,n),p(n,a),p(a,l),p(l,o),p(o,i),p(i,s),p(s,r),p(r,_),p(s,m),p(s,c),p(c,u),p(u,g),Z(h,g,null),p(u,b),p(u,C),Z(y,C,null),p(u,S),p(u,k),Z(B,k,null),p(u,X),p(u,P),Z(E,P,null),p(o,q),p(o,_e),p(_e,He),p(o,pe),Z(Q,o,null),p(o,Ne),p(o,we),p(we,ie),p(ie,re),p(o,Oe),p(o,te),p(te,ne),p(ne,de),p(te,be),p(te,he),p(he,ge),p(ge,H),p(H,De),p(De,ft),p(H,Ge),p(H,Fe),p(Fe,Ze),p(H,dt),p(H,ve),p(ve,gt),p(H,Je),p(H,Se),p(Se,Qe),p(H,mt),p(H,xe),p(xe,_t),p(H,je),p(H,A),p(A,T),p(H,ke),p(H,se),p(se,ze),p(H,Ce),p(H,oe),p(oe,Pe),p(H,Ae),p(H,ae),p(ae,et),p(he,Me),p(he,Ee);for(let ye=0;ye<L.length;ye+=1)L[ye]&&L[ye].m(Ee,null);p(te,yt),p(te,Xe),p(Xe,Ft),p(o,St),p(o,tt),Z(Ie,tt,null),p(o,kt),p(o,xt),p(o,Et),p(o,nt),p(nt,Tt),p(o,Rt),p(o,it),Z(Be,it,null),p(o,It),p(o,st),Z(Ve,st,null),zt=!0,Bt||(Zt=[vt(ie,"click",t[5]),vt(Xe,"click",t[4])],Bt=!0)},p(F,[V]){const ye={};!f&&V&2&&(f=!0,ye.value=F[1].name,fe(()=>f=!1)),h.$set(ye);const ot={};V&2&&(ot.value=F[1].size.a),V&2&&(ot.onChange=F[7]),y.$set(ot);const pt={};!j&&V&2&&(j=!0,pt.value=F[1].size.h,fe(()=>j=!1)),B.$set(pt);const N={};if(!ee&&V&1&&(ee=!0,N.value=F[0],fe(()=>ee=!1)),E.$set(N),V&4){$e=F[2];let $;for($=0;$<$e.length;$+=1){const me=In(F,$e,$);L[$]?(L[$].p(me,V),O(L[$],1)):(L[$]=Bn(me),L[$].c(),O(L[$],1),L[$].m(Ee,null))}for(ai(),$=$e.length;$<L.length;$+=1)Yn($);ti()}const wt={};V&33554432&&(wt.$$scope={dirty:V,ctx:F}),Ie.$set(wt);const Ue={};V&33554440&&(Ue.$$scope={dirty:V,ctx:F}),Be.$set(Ue);const bt={};V&33554432&&(bt.$$scope={dirty:V,ctx:F}),Ve.$set(bt)},i(F){if(!zt){O(h.$$.fragment,F),O(y.$$.fragment,F),O(B.$$.fragment,F),O(E.$$.fragment,F),O(Q.$$.fragment,F);for(let V=0;V<$e.length;V+=1)O(L[V]);O(Ie.$$.fragment,F),O(Be.$$.fragment,F),O(Ve.$$.fragment,F),zt=!0}},o(F){M(h.$$.fragment,F),M(y.$$.fragment,F),M(B.$$.fragment,F),M(E.$$.fragment,F),M(Q.$$.fragment,F),L=L.filter(Boolean);for(let V=0;V<L.length;V+=1)M(L[V]);M(Ie.$$.fragment,F),M(Be.$$.fragment,F),M(Ve.$$.fragment,F),zt=!1},d(F){F&&D(e),J(h),J(y),J(B),J(E),J(Q),ni(L,F),J(Ie),J(Be),J(Ve),Bt=!1,qn(Zt)}}}let lt=200;function Oi(t,e,n){let a=5,l=new We({name:"Основная",size:new Ye({a:5e3,c:5e3,h:lt,maxLength:4900})}),o=[new Dt({blank:new We({name:"Д. №1",size:new Ye({a:500,c:1e3,leftDownAngle:90,rightDownAngle:0,h:lt,maxLength:l.size.maxLength})}),volume:10}),new Dt({blank:new We({name:"Д. №2",size:new Ye({a:700,c:1400,leftDownAngle:45,h:lt,maxLength:l.size.maxLength})}),volume:15}),new Dt({blank:new We({name:"Д. №2",size:new Ye({a:700,c:700,leftDownAngle:80,h:lt,maxLength:l.size.maxLength})}),volume:20}),new Dt({blank:new We({name:"Д. №3",size:new Ye({a:1e3,c:600,leftDownAngle:45,h:lt,maxLength:l.size.maxLength})}),volume:30})];ii(()=>{o.forEach((P,E)=>{Vi(`containerPieceCanvas${E}`,P.blank)})});const i=()=>{const P=new Dt({blank:new We({name:`Д. №${o.length+1}`,size:new Ye({a:0,c:0,h:lt})}),volume:0});n(2,o=[...o,P])};let s,r="";const _=P=>{const E=[],ee=q=>q.volume>0&&q.blank.size.a>0&&q.blank.size.c>0;return P.forEach(q=>{q.blank.size.h=l.size.h,ee(q)&&E.push(q)}),E},m=()=>{a>=0&&l.name.length>0&&l.size.a&&l.size.c&&l.size.h?(n(2,o=_(o)),o.length?(s=Fi({stockSawing:a,rawWorkPiece:l,listOrders:o}),console.log(s),Rn("containerWorkPieceCanvas",a,l,s.drawCombinations),Rn("containerOptimumCombinationsCanvas",a,l,s.optimumDrawCombinations),n(3,r=s.listLogMessages.map(P=>P.includes("===>")?`<p class='mt-2 font-bold'>${P}</p>`:`<p '>${P}</p>`).join(""))):alert("Внимание! Нет валидных деталей для выполнения алгоритма. Скорее всего не все поля были заполнены.")):alert("Внимание! Не корректно заполнены параметры исходной заготовки.")};si(()=>{m()});function c(P){t.$$.not_equal(l.name,P)&&(l.name=P,n(1,l))}const u=P=>l.size.changeBothBases(P);function g(P){t.$$.not_equal(l.size.h,P)&&(l.size.h=P,n(1,l))}function h(P){a=P,n(0,a)}function f(P,E){t.$$.not_equal(E.blank.name,P)&&(E.blank.name=P,n(2,o))}function b(P,E){t.$$.not_equal(E.blank.size.a,P)&&(E.blank.size.a=P,n(2,o))}function C(P,E){t.$$.not_equal(E.blank.size.b,P)&&(E.blank.size.b=P,n(2,o))}function y(P,E){t.$$.not_equal(E.blank.size.c,P)&&(E.blank.size.c=P,n(2,o))}function S(P,E){t.$$.not_equal(E.blank.size.d,P)&&(E.blank.size.d=P,n(2,o))}function k(P,E){t.$$.not_equal(E.blank.size.leftDownAngle,P)&&(E.blank.size.leftDownAngle=P,n(2,o))}function B(P,E){t.$$.not_equal(E.blank.size.rightDownAngle,P)&&(E.blank.size.rightDownAngle=P,n(2,o))}function j(P,E){t.$$.not_equal(E.volume,P)&&(E.volume=P,n(2,o))}function X(){r=this.innerHTML,n(3,r)}return[a,l,o,r,i,m,c,u,g,h,f,b,C,y,S,k,B,j,X]}class Wi extends ht{constructor(e){super(),ct(this,e,Oi,Ni,ut,{})}}export{Wi as component};
