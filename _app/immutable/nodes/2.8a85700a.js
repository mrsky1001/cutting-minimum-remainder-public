var ei=Object.defineProperty;var ti=(t,e,n)=>e in t?ei(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var w=(t,e,n)=>(ti(t,typeof e!="symbol"?e+"":e,n),n);import{S as ft,i as dt,s as gt,e as En,b as se,G as He,h as D,C as Tn,E as Yt,F as In,k as z,l as x,W as Rn,P as ni,a2 as Kt,a as R,m as P,c as B,n as m,X as _,I as ii,q as J,Z as Bn,r as Q,_ as Vn,L as ut,u as Mn,M as si,N as oi,O as ai,g as M,d as $,K as li,R as $n,w as fe,a3 as de,y as U,z as Y,A as K,a4 as ge,B as G,f as ri,a0 as hi,j as ci,o as ui,T as Xn,v as fi}from"../chunks/index.d389ee78.js";import{c as It}from"../chunks/Indicator.svelte_svelte_type_style_lang.e2c519f7.js";function di(t){let e,n,o,a=[t[11],{class:n=It(t[5],t[3],t[4],t[8],t[10].class)},{src:o=t[1]},{srcset:t[2]},{alt:t[7]}],s={};for(let r=0;r<a.length;r+=1)s=Yt(s,a[r]);return{c(){e=z("img"),this.h()},l(r){e=x(r,"IMG",{class:!0,src:!0,srcset:!0,alt:!0}),this.h()},h(){Rn(e,s)},m(r,i){se(r,e,i)},p(r,i){Rn(e,s=ni(a,[i&2048&&r[11],i&1336&&n!==(n=It(r[5],r[3],r[4],r[8],r[10].class))&&{class:n},i&2&&!Kt(e.src,o=r[1])&&{src:o},i&4&&{srcset:r[2]},i&128&&{alt:r[7]}]))},d(r){r&&D(e)}}}function gi(t){let e,n,o,a,s,r;return{c(){e=z("figure"),n=z("img"),s=R(),r=z("figcaption"),this.h()},l(i){e=x(i,"FIGURE",{class:!0});var l=P(e);n=x(l,"IMG",{class:!0,src:!0,srcset:!0,alt:!0}),s=B(l),r=x(l,"FIGCAPTION",{class:!0});var d=P(r);d.forEach(D),l.forEach(D),this.h()},h(){m(n,"class",o=It(t[5],t[3],t[4],t[8],t[10].class)),Kt(n.src,a=t[1])||m(n,"src",a),m(n,"srcset",t[2]),m(n,"alt",t[7]),m(r,"class",t[9]),m(e,"class",t[6])},m(i,l){se(i,e,l),_(e,n),_(e,s),_(e,r),r.innerHTML=t[0]},p(i,l){l&1336&&o!==(o=It(i[5],i[3],i[4],i[8],i[10].class))&&m(n,"class",o),l&2&&!Kt(n.src,a=i[1])&&m(n,"src",a),l&4&&m(n,"srcset",i[2]),l&128&&m(n,"alt",i[7]),l&1&&(r.innerHTML=i[0]),l&512&&m(r,"class",i[9]),l&64&&m(e,"class",i[6])},d(i){i&&D(e)}}}function mi(t){let e;function n(s,r){return s[0]?gi:di}let o=n(t),a=o(t);return{c(){a.c(),e=En()},l(s){a.l(s),e=En()},m(s,r){a.m(s,r),se(s,e,r)},p(s,[r]){o===(o=n(s))&&a?a.p(s,r):(a.d(1),a=o(s),a&&(a.c(),a.m(e.parentNode,e)))},i:He,o:He,d(s){a.d(s),s&&D(e)}}}function pi(t,e,n){const o=["caption","src","srcset","size","alignment","imgClass","figClass","alt","effect","captionClass"];let a=Tn(e,o),{caption:s=void 0}=e,{src:r=void 0}=e,{srcset:i=void 0}=e,{size:l="max-w-full"}=e,{alignment:d=""}=e,{imgClass:u="h-auto"}=e,{figClass:h="max-w-lg"}=e,{alt:p=""}=e,{effect:f=""}=e,{captionClass:g="mt-2 text-sm text-center text-gray-500 dark:text-gray-400"}=e;return t.$$set=c=>{n(10,e=Yt(Yt({},e),In(c))),n(11,a=Tn(e,o)),"caption"in c&&n(0,s=c.caption),"src"in c&&n(1,r=c.src),"srcset"in c&&n(2,i=c.srcset),"size"in c&&n(3,l=c.size),"alignment"in c&&n(4,d=c.alignment),"imgClass"in c&&n(5,u=c.imgClass),"figClass"in c&&n(6,h=c.figClass),"alt"in c&&n(7,p=c.alt),"effect"in c&&n(8,f=c.effect),"captionClass"in c&&n(9,g=c.captionClass)},e=In(e),[s,r,i,l,d,u,h,p,f,g,e,a]}class _i extends ft{constructor(e){super(),dt(this,e,pi,mi,gt,{caption:0,src:1,srcset:2,size:3,alignment:4,imgClass:5,figClass:6,alt:7,effect:8,captionClass:9})}}let Ye=class Gt{constructor(e){w(this,"_a",0);w(this,"_b",0);w(this,"_c",0);w(this,"_d",0);w(this,"_h",0);w(this,"_leftDownAngle",0);w(this,"_leftDownAngleRad",0);w(this,"_rightDownAngle",0);w(this,"_rightDownAngleRad",0);w(this,"minLength");w(this,"maxLength");w(this,"minAngle");w(this,"maxAngle");w(this,"_fractionDigits",3);this._a=e.a,this._b=e.b??this._b,this._c=e.c,this._d=e.d??this._d,this._h=e.h,this._leftDownAngle=e.leftDownAngle??this._leftDownAngle,this._rightDownAngle=e.rightDownAngle??this._rightDownAngle,this.minLength=e.minLength??10,this.maxLength=e.maxLength,this.minAngle=e.minAngle??10,this.maxAngle=e.maxAngle??162,this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this._rightDownAngleRad=this._toRadians(this._rightDownAngle),this.recalculation()}changeBothBases(e){this.a=e,this.c=e}_toRadians(e){return parseFloat((e*(Math.PI/180)).toFixed(3))}_toDegree(e){return parseFloat((e*180/Math.PI).toFixed(3))}recalculation(){this._h&&(this._leftDownAngleRad&&(this.d=this._h/Math.sin(this._leftDownAngleRad)),this._a&&this._c&&(this._rightDownAngleRad=Math.abs(Math.atan(this._h/this.differenceBases)),this._rightDownAngle=this.differenceBases>0?180-this._toDegree(this._rightDownAngleRad):this._toDegree(this._rightDownAngleRad)),this._rightDownAngleRad&&(this.b=this._h/Math.sin(this._rightDownAngleRad)))}get differenceBases(){const e=this._a,n=this._c,o=this._leftDownAngle>=90?this.segmentLeftUp:-1*this.segmentLeftUp;return e-o-n}get segmentLeftUp(){const e=Math.abs(this._leftDownAngle-90);return Math.sqrt(this._h*this._h+this._d*this._d-2*this._h*this._d*Math.cos(this._toRadians(e)))}flipHorizontal(){const e=new Gt(this);this._leftDownAngle=e.rightDownAngle,this._rightDownAngle=e.leftDownAngle,this._b=e.d,this._d=e.b}flipVertical(){const e=new Gt(this);this._leftDownAngle=180-e.leftDownAngle,this._rightDownAngle=180-e.rightDownAngle,this._a=e.c,this._c=e.a}get isRect(){return this.a===this.c&&this.leftDownAngle===90&&this.rightDownAngle===90}get perimeter(){return this._a+this._b+this._c+this._d}get a(){return this._a}set a(e){this._a=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get b(){return this._b}set b(e){this._b=parseFloat(Number(e).toFixed(this._fractionDigits))}get c(){return this._c}set c(e){this._c=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get d(){return this._d}set d(e){this._d=parseFloat(Number(e).toFixed(this._fractionDigits))}get h(){return this._h}set h(e){this._h=parseFloat(Number(e).toFixed(this._fractionDigits))}get leftDownAngle(){return parseFloat(Number(this._leftDownAngle).toFixed(0))}set leftDownAngle(e){this._leftDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this.recalculation()}get rightDownAngle(){return parseFloat(Number(this._rightDownAngle).toFixed(0))}set rightDownAngle(e){this._rightDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._rightDownAngleRad=this._toRadians(this._rightDownAngle)}};function wi(t,e=3){return parseFloat((t*1e-6).toFixed(e))}function bi(t,e,n){return(t+e)/2*n}let Ke=class{constructor(e){w(this,"name");w(this,"size");w(this,"_isHorizontalFlipped",!1);w(this,"_isVerticalFlipped",!1);this.name=e.name,this.size=new Ye(e.size)}get isRect(){return this.size.isRect}get square(){return bi(this.size.a,this.size.c,this.size.h)}get isHorizontalFlipped(){return this._isHorizontalFlipped}get isVerticalFlipped(){return this._isVerticalFlipped}flipHorizontal(){this.size.flipHorizontal(),this._isHorizontalFlipped=!0}flipVertical(){this.size.flipVertical(),this._isVerticalFlipped=!0}};function Di(t){let e,n,o,a,s,r,i,l,d,u,h,p,f,g,c,b,v;const y=t[5].default,k=ii(y,t,t[4],null);return{c(){e=z("div"),n=z("h2"),o=z("button"),a=z("span"),s=J(t[1]),r=R(),i=Bn("svg"),l=Bn("path"),u=R(),h=z("div"),p=z("div"),k&&k.c(),this.h()},l(F){e=x(F,"DIV",{id:!0,"data-accordion":!0});var I=P(e);n=x(I,"H2",{id:!0});var X=P(n);o=x(X,"BUTTON",{type:!0,class:!0,"data-accordion-target":!0,"aria-expanded":!0,"aria-controls":!0});var L=P(o);a=x(L,"SPAN",{});var j=P(a);s=Q(j,t[1]),j.forEach(D),r=B(L),i=Vn(L,"svg",{"data-accordion-icon":!0,class:!0,"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0});var W=P(i);l=Vn(W,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),P(l).forEach(D),W.forEach(D),L.forEach(D),X.forEach(D),u=B(I),h=x(I,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var C=P(h);p=x(C,"DIV",{class:!0});var E=P(p);k&&k.l(E),E.forEach(D),C.forEach(D),I.forEach(D),this.h()},h(){m(l,"stroke","currentColor"),m(l,"stroke-linecap","round"),m(l,"stroke-linejoin","round"),m(l,"stroke-width","2"),m(l,"d","M9 5 5 1 1 5"),m(i,"data-accordion-icon",""),m(i,"class",d="w-3 h-3 "+(t[0]?"rotate-180":"")+" shrink-0"),m(i,"aria-hidden","true"),m(i,"xmlns","http://www.w3.org/2000/svg"),m(i,"fill","none"),m(i,"viewBox","0 0 10 6"),m(o,"type","button"),m(o,"class",t[2]),m(o,"data-accordion-target","#accordion-collapse-body-1"),m(o,"aria-expanded","true"),m(o,"aria-controls","accordion-collapse-body-1"),m(n,"id","accordion-collapse-heading-1"),m(p,"class","p-5 border border-gray-200 dark:border-gray-700 dark:bg-gray-900"),m(h,"id","accordion-collapse-body-1"),m(h,"class",f=t[0]?"":"hidden"),m(h,"aria-labelledby","accordion-collapse-heading-1"),m(e,"id","accordion-collapse"),m(e,"data-accordion",g=t[0]?"open":"collapse")},m(F,I){se(F,e,I),_(e,n),_(n,o),_(o,a),_(a,s),_(o,r),_(o,i),_(i,l),_(e,u),_(e,h),_(h,p),k&&k.m(p,null),c=!0,b||(v=ut(o,"click",t[6]),b=!0)},p(F,[I]){(!c||I&2)&&Mn(s,F[1]),(!c||I&1&&d!==(d="w-3 h-3 "+(F[0]?"rotate-180":"")+" shrink-0"))&&m(i,"class",d),(!c||I&4)&&m(o,"class",F[2]),k&&k.p&&(!c||I&16)&&si(k,y,F,F[4],c?ai(y,F[4],I,null):oi(F[4]),null),(!c||I&1&&f!==(f=F[0]?"":"hidden"))&&m(h,"class",f),(!c||I&1&&g!==(g=F[0]?"open":"collapse"))&&m(e,"data-accordion",g)},i(F){c||(M(k,F),c=!0)},o(F){$(k,F),c=!1},d(F){F&&D(e),k&&k.d(F),b=!1,v()}}}function vi(t,e,n){let{$$slots:o={},$$scope:a}=e,{title:s=""}=e,{isOpen:r=!1}=e;const i=()=>n(0,r=!r);let l="flex items-center justify-between w-full p-5 font-medium text-left border border-gray-200 rounded-xl focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800";const d=()=>i();return t.$$set=u=>{"title"in u&&n(1,s=u.title),"isOpen"in u&&n(0,r=u.isOpen),"$$scope"in u&&n(4,a=u.$$scope)},t.$$.update=()=>{if(t.$$.dirty&5){const u="rounded-xl",h="rounded-t-xl",p=" bg-gray-100";r?(n(2,l=l.replace(u,h)),n(2,l+=p)):(n(2,l=l.replace(h,u)),n(2,l=l.replace(p,"")))}},[r,s,l,i,a,o,d]}class kt extends ft{constructor(e){super(),dt(this,e,vi,Di,gt,{title:1,isOpen:0})}}class Ct{constructor(e){w(this,"blank");w(this,"_volume");w(this,"minVolume");w(this,"maxVolume");this.blank=new Ke(e.blank),this._volume=e.volume,this.minVolume=e.minVolume??1,this.maxVolume=e.maxVolume??100}get volume(){return this._volume}set volume(e){this._volume=Number(e)}}const zi="_app/immutable/assets/workPiece.ba374e36.png";function xi(t){let e,n,o;return{c(){e=z("input"),this.h()},l(a){e=x(a,"INPUT",{id:!0,type:!0,name:!0,placeholder:!0,class:!0}),this.h()},h(){m(e,"id",t[1]),m(e,"type","text"),m(e,"name",t[1]),e.disabled=t[3],e.required=t[4],m(e,"placeholder",t[2]),e.value=t[0],m(e,"class",t[5])},m(a,s){se(a,e,s),n||(o=[li(t[6].call(null,e)),ut(e,"change",t[11])],n=!0)},p(a,[s]){s&2&&m(e,"id",a[1]),s&2&&m(e,"name",a[1]),s&8&&(e.disabled=a[3]),s&16&&(e.required=a[4]),s&4&&m(e,"placeholder",a[2]),s&1&&e.value!==a[0]&&(e.value=a[0]),s&32&&m(e,"class",a[5])},i:He,o:He,d(a){a&&D(e),n=!1,$n(o)}}}function Pi(t,e,n){let{id:o=""}=e,{placeholder:a=""}=e,{type:s="text"}=e,{disabled:r=!1}=e,{numSettings:i}=e,{required:l=!1}=e,{value:d}=e,{onChange:u=void 0}=e;const h=c=>{c.type=s};let p=`border border-gray-300 text-gray-900 text-sm rounded-lg focus:bg-[white] focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700
                                                         dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500`;r&&(p+=" bg-gray-100");const f=(c,b)=>{let v=s==="number"?Number(b):b;const y=" text-red-800 border border-red-300";(F=>!(i&&(i.min&&F<i.min||i.max&&F>i.max)))(v)?n(0,d=v):p.includes(y)||(n(5,p+=y),setTimeout(()=>{n(5,p=p.replace(y,""))},1e3)),c.value=d},g=c=>f(c.target,c.target.value);return t.$$set=c=>{"id"in c&&n(1,o=c.id),"placeholder"in c&&n(2,a=c.placeholder),"type"in c&&n(8,s=c.type),"disabled"in c&&n(3,r=c.disabled),"numSettings"in c&&n(9,i=c.numSettings),"required"in c&&n(4,l=c.required),"value"in c&&n(0,d=c.value),"onChange"in c&&n(10,u=c.onChange)},[d,o,a,r,l,p,h,f,s,i,u,g]}class Te extends ft{constructor(e){super(),dt(this,e,Pi,xi,gt,{id:1,placeholder:2,type:8,disabled:3,numSettings:9,required:4,value:0,onChange:10})}}class We{constructor(e){w(this,"_a",0);w(this,"_b",0);w(this,"_c",0);w(this,"_d",0);w(this,"_h",0);w(this,"_leftDownAngle",0);w(this,"_leftDownAngleRad",0);w(this,"_rightDownAngle",0);w(this,"_rightDownAngleRad",0);w(this,"minLength");w(this,"maxLength");w(this,"minAngle");w(this,"maxAngle");w(this,"_fractionDigits",3);this._a=e.a,this._b=e.b??this._b,this._c=e.c,this._d=e.d??this._d,this._h=e.h,this._leftDownAngle=e.leftDownAngle??this._leftDownAngle,this._rightDownAngle=e.rightDownAngle??this._rightDownAngle,this.minLength=e.minLength??10,this.maxLength=e.maxLength,this.minAngle=e.minAngle??10,this.maxAngle=e.maxAngle??162,this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this._rightDownAngleRad=this._toRadians(this._rightDownAngle),this.recalculation()}changeBothBases(e){this.a=e,this.c=e}_toRadians(e){return parseFloat((e*(Math.PI/180)).toFixed(3))}_toDegree(e){return parseFloat((e*180/Math.PI).toFixed(3))}recalculation(){this._h&&(this._leftDownAngleRad&&(this.d=this._h/Math.sin(this._leftDownAngleRad)),this._a&&this._c&&(this._rightDownAngleRad=Math.abs(Math.atan(this._h/this.differenceBases)),this._rightDownAngle=this.differenceBases>0?180-this._toDegree(this._rightDownAngleRad):this._toDegree(this._rightDownAngleRad)),this._rightDownAngleRad&&(this.b=this._h/Math.sin(this._rightDownAngleRad)))}get differenceBases(){const e=this._a,n=this._c,o=this._leftDownAngle>=90?this.segmentLeftUp:-1*this.segmentLeftUp;return e-o-n}get segmentLeftUp(){const e=Math.abs(this._leftDownAngle-90);return Math.sqrt(this._h*this._h+this._d*this._d-2*this._h*this._d*Math.cos(this._toRadians(e)))}flipHorizontal(){const e=new We(this);this._leftDownAngle=e.rightDownAngle,this._rightDownAngle=e.leftDownAngle,this._b=e.d,this._d=e.b}flipVertical(){const e=new We(this);this._leftDownAngle=180-e.leftDownAngle,this._rightDownAngle=180-e.rightDownAngle,this._a=e.c,this._c=e.a}get isRect(){return this.a===this.c&&this.leftDownAngle===90&&this.rightDownAngle===90}get perimeter(){return this._a+this._b+this._c+this._d}get a(){return this._a}set a(e){this._a=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get b(){return this._b}set b(e){this._b=parseFloat(Number(e).toFixed(this._fractionDigits))}get c(){return this._c}set c(e){this._c=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get d(){return this._d}set d(e){this._d=parseFloat(Number(e).toFixed(this._fractionDigits))}get h(){return this._h}set h(e){this._h=parseFloat(Number(e).toFixed(this._fractionDigits))}get leftDownAngle(){return parseFloat(Number(this._leftDownAngle).toFixed(0))}set leftDownAngle(e){this._leftDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this.recalculation()}get rightDownAngle(){return parseFloat(Number(this._rightDownAngle).toFixed(0))}set rightDownAngle(e){this._rightDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._rightDownAngleRad=this._toRadians(this._rightDownAngle)}}function Ge(t,e=3){return parseFloat((t*1e-6).toFixed(e))}function Wt(t,e,n){return(t+e)/2*n}class Et{constructor(e){w(this,"name");w(this,"size");w(this,"_isHorizontalFlipped",!1);w(this,"_isVerticalFlipped",!1);this.name=e.name,this.size=new We(e.size)}get isRect(){return this.size.isRect}get square(){return Wt(this.size.a,this.size.c,this.size.h)}get isHorizontalFlipped(){return this._isHorizontalFlipped}get isVerticalFlipped(){return this._isVerticalFlipped}flipHorizontal(){this.size.flipHorizontal(),this._isHorizontalFlipped=!0}flipVertical(){this.size.flipVertical(),this._isVerticalFlipped=!0}}let yt=class{constructor(e){w(this,"_name");w(this,"_square");w(this,"_p1");w(this,"_p2");w(this,"_p3");w(this,"_p4");w(this,"_wP1P2");w(this,"_wP2P3");w(this,"_wP3P4");w(this,"_wP4P1");w(this,"_h");w(this,"_colorBody");w(this,"_colorContour");w(this,"_colorTextLegend");w(this,"_colorContourLegend");w(this,"isHorizontalFlipped");w(this,"isVerticalFlipped");w(this,"isShowBodyText");w(this,"isShowBaseContour");w(this,"isShowSideContour");w(this,"baseSpace");w(this,"sideSpace");w(this,"halfYBoard");w(this,"halfXBoard");w(this,"wDivider");w(this,"hDivider");this._name=e.name,this._square=e.square,this._p1={x:e.p1.x,y:e.p1.y},this._p2={x:e.p2.x,y:e.p2.y},this._p3={x:e.p3.x,y:e.p3.y},this._p4={x:e.p4.x,y:e.p4.y},this._wP1P2=e.wP1P2,this._wP2P3=e.wP2P3,this._wP3P4=e.wP3P4,this._wP4P1=e.wP4P1,this._h=e.h,this.isHorizontalFlipped=e.isHorizontalFlipped!==void 0?e.isHorizontalFlipped:!1,this.isVerticalFlipped=e.isVerticalFlipped!==void 0?e.isVerticalFlipped:!1,this.isShowBodyText=e.isShowBodyText!==void 0?e.isShowBodyText:!0,this.isShowBaseContour=e.isShowBaseContour!==void 0?e.isShowBaseContour:!0,this.isShowSideContour=e.isShowSideContour!==void 0?e.isShowSideContour:!0,this.baseSpace=e.baseSpace??20,this.sideSpace=e.sideSpace??20,this.halfXBoard=e.halfXBoard??250,this.halfYBoard=e.halfYBoard??50,this.wDivider=e.wDivider??2,this.hDivider=e.hDivider??2,this._colorBody=e.colorBody??"#d1ffd8",this._colorContour=e.colorContour??"#B70A02",this._colorTextLegend=e.colorTextLegend??"black",this._colorContourLegend=e.colorContourLegend??"gray"}get perimeter(){return this._wP1P2+this._wP2P3+this._wP3P4+this._wP4P1}get colorTextLegend(){return this._colorTextLegend}get colorContourLegend(){return this._colorContourLegend}get colorBody(){return this._colorBody}get name(){return this._name}get square(){return this._square}get p1(){return this._p1}get p2(){return this._p2}get p3(){return this._p3}get p4(){return this._p4}get wP1P2(){return this._wP1P2}get wP2P3(){return this._wP2P3}get wP3P4(){return this._wP3P4}get wP4P1(){return this._wP4P1}get h(){return this._h}get colorContour(){return this._colorContourLegend}};const ht={REMAINS:"Ост.",STOCK:"п."},qn=(t,e,n,o,a)=>{const s=a>0?1:-1;return{x:t-s*Math.sqrt(Math.abs(o*o-(e-n)*(e-n))),y:n}};function Ut(t,e,n){e&&((u,h)=>{if(u.size.rightDownAngle<90){if(h.size.leftDownAngle>=90){const p=u.size.rightDownAngle+h.size.leftDownAngle;if(h.size.rightDownAngle>=90){const f=u.size.rightDownAngle+h.size.rightDownAngle;(p>=f||f>180)&&p<=180||f<=180&&h.flipHorizontal()}else if(h.size.rightDownAngle<90){const f=u.size.rightDownAngle+180-h.size.rightDownAngle;(p>=f||f>180)&&p<=180||f<=180&&(h.flipHorizontal(),h.flipVertical())}}else if(h.size.leftDownAngle<90){const p=u.size.rightDownAngle+180-h.size.leftDownAngle;if(h.size.rightDownAngle>=90){const f=u.size.rightDownAngle+h.size.rightDownAngle;(p>=f||f>180)&&p<=180?h.flipVertical():f<=180&&h.flipHorizontal()}else if(h.size.rightDownAngle<90){const f=u.size.rightDownAngle+180-h.size.rightDownAngle;(p>=f||f>180)&&p<=180?h.flipVertical():f<=180&&(h.flipHorizontal(),h.flipVertical())}}}else if(u.size.rightDownAngle>90){if(h.size.leftDownAngle>=90){const p=u.size.rightDownAngle+180-h.size.leftDownAngle;if(h.size.rightDownAngle>=90){const f=u.size.rightDownAngle+180-h.size.rightDownAngle;(p>=f||f>180)&&p<=180?h.flipVertical():f<=180&&(h.flipVertical(),h.flipHorizontal())}else if(h.size.rightDownAngle<90){const f=u.size.rightDownAngle+180-h.size.rightDownAngle;(p>=f||f>180)&&p<=180?h.flipVertical():f<=180&&h.flipHorizontal()}}else if(h.size.leftDownAngle<90){const p=u.size.rightDownAngle+h.size.leftDownAngle;if(h.size.rightDownAngle>=90){const f=u.size.rightDownAngle+180-h.size.rightDownAngle;(p>=f||f>180)&&p<=180||f<=180&&(h.flipVertical(),h.flipHorizontal())}else if(h.size.rightDownAngle<90){const f=u.size.rightDownAngle+h.size.rightDownAngle;(p>=f||f>180)&&p<=180||f<=180&&h.flipHorizontal()}}}})(e,t);const a=(u,h,p,f,g)=>{const c=u.x-g.x;c>0&&(h.x+=c,p.x+=c,f.x+=c,g.x+=c)},s=n?n.p2.x:0;let r,i,l,d;if(t.size.leftDownAngle<90&&!n)d={x:0,y:t.size.h},r=qn(d.x,d.y,0,t.size.d,-Math.abs(t.size.differenceBases)),i={x:r.x+t.size.a,y:r.y},l={x:d.x+t.size.c,y:d.y};else{r={x:s,y:0},i={x:r.x+t.size.a,y:0};const u={x:i.x,y:t.size.h};l=t.isRect?u:qn(i.x,i.y,u.y,t.size.b,t.size.differenceBases),d={x:l.x-t.size.c,y:l.y}}return n&&a(n.p3,r,i,l,d),new yt({name:t.name,square:t.square,p1:r,p2:i,p3:l,p4:d,wP1P2:t.size.a,wP2P3:t.size.b,wP3P4:t.size.c,wP4P1:t.size.d,h:t.size.h,isHorizontalFlipped:t.isHorizontalFlipped,isVerticalFlipped:t.isVerticalFlipped,colorContourLegend:"gray",colorBody:"#d1ffd8",isShowSideContour:!1,baseSpace:30,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4})}function Un(t,e,n){const o=[],a=(i,l)=>{const d=parseFloat(i.perimeter.toFixed(0)),u=parseFloat(l.perimeter.toFixed(0)),h=parseFloat(i.wP1P2.toFixed(0)),p=parseFloat(i.wP2P3.toFixed(0)),f=parseFloat(l.wP1P2.toFixed(0)),g=parseFloat(l.wP3P4.toFixed(0)),c=parseFloat(l.wP4P1.toFixed(0));return d===u&&(h===f||h===g)&&p===c},s=(i,l,d)=>{const u=new Et({name:ht.STOCK,size:new We({a:i,c:i,b:d.size.b,d:d.size.b,h:l.h,leftDownAngle:180-d.size.rightDownAngle,rightDownAngle:d.size.rightDownAngle,maxLength:i})}),h={...l.p2},p={x:h.x+u.size.a,y:h.y},f={...l.p3},g={x:f.x+u.size.c,y:f.y};return{piece:u,drawPiece:new yt({name:u.name,square:u.square,p1:h,p2:p,p3:g,p4:f,wP1P2:u.size.a,wP2P3:u.size.b,wP3P4:u.size.c,wP4P1:u.size.d,h:u.size.h,colorContourLegend:"gray",colorBody:"lightgray",isShowBodyText:!1,isShowSideContour:!1,baseSpace:5,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4})}},r=(i,l,d,u,h)=>{const p=h.wP4P1,f=l.wP2P3,g=180-u.size.leftDownAngle-d.size.rightDownAngle,c=g>0?h.p1.x-l.p2.x+i:h.p4.x-l.p3.x+i,b=p*f*Math.sign(Math.abs(g)),v=new Et({name:ht.STOCK,size:new We({a:g>0?c:i,c:g>0?i:c,b:p,d:f,h:l.h,leftDownAngle:180-d.size.rightDownAngle,rightDownAngle:180-u.size.leftDownAngle,maxLength:i})}),y={...l.p2},k=g>0?{x:y.x+c,y:y.y}:{x:y.x+i,y:y.y},F={x:l.p3.x,y:v.size.h},I=g>0?{x:F.x+i,y:F.y}:{x:F.x+c,y:F.y},X=new yt({name:ht.REMAINS,square:b,p1:y,p2:k,p3:I,p4:F,wP1P2:v.size.a,wP2P3:v.size.b,wP3P4:v.size.c,wP4P1:v.size.d,h:v.size.h,colorContourLegend:"gray",colorBody:"lightgray",isShowSideContour:!1,baseSpace:10,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4});return{piece:v,drawPiece:X}};return e.forEach(i=>{const l={num:i.num,volume:i.volume,combination:[]};let d,u;const h=p=>{l.combination.push(p.drawPiece),u=p.piece,d=p.drawPiece};i.cuttingCombination.forEach((p,f)=>{const g=new Et(p);let c=Ut(g,u,d);if(u&&f>0){const b=a(d,c);if(t&&b){const v=s(t,d,u);h(v)}else if(!b){const v=r(t,d,u,g,c);h(v)}c=Ut(g,u,d)}else if(f===0&&(c.p1.x>0||c.p4.x>0)){const b=c.p1.x,v=c.p4.x,y=Wt(b,v,c.h),k={x:0,y:0},F={...c.p1},I={x:0,y:c.h},X={...c.p4},L=new Et({name:ht.REMAINS,size:new We({a:b,b:c.wP4P1,c:v,d:c.h,h:c.h,leftDownAngle:90,rightDownAngle:180-g.size.leftDownAngle,maxLength:b})}),j=new yt({name:ht.REMAINS,square:y,p1:k,p2:F,p3:X,p4:I,wP1P2:b,wP2P3:c.wP4P1,wP3P4:v,wP4P1:c.h,h:c.h,colorContourLegend:"gray",colorBody:"lightgray",isShowSideContour:!1,baseSpace:10,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4});h({piece:L,drawPiece:j}),c=Ut(g,u,d)}if(h({piece:g,drawPiece:c}),f===i.cuttingCombination.length-1&&d.p2.x<=n&&d.p3.x<=n){const b=n-d.p2.x,v=n-d.p3.x,y=Wt(b,v,u.size.h),k={...d.p2},F={x:n,y:k.y},I={...d.p3},X={x:n,y:I.y},L=new yt({name:ht.REMAINS,square:y,p1:k,p2:F,p3:X,p4:I,wP1P2:b,wP2P3:d.h,wP3P4:v,wP4P1:u.size.b,h:d.h,colorContourLegend:"gray",colorBody:"lightgray",isShowSideContour:!1,baseSpace:10,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4});l.combination.push(L)}}),o.push(l)}),o}function Ci(t,e,n,o){const a=o.map((i,l)=>({num:l+1,volume:0,cuttingCombination:i})),s=[];return{drawCombinations:Un(t,a,e>n?e:n).filter((i,l)=>{const d=i.combination[i.combination.length-1];return d.p2.x<=e&&d.p3.x<=n?(s.push(o[i.num-1]),i.num=s.length,!0):!1}),cuttingCombination:s}}function yi(t,e,n){const o=[],a=[],s=e.map(l=>l.blank.square+n),r=Math.min(...s),i=(l,d,u,h)=>{for(let p=l;p<d.length;p++){const f=d[p].blank.square+n,g=u-f;h.push(d[p].blank),g>=r?i(p,d,g,h):g<r&&g>=0&&o.push([...h]),h.pop()}};return i(0,e,t,a),o}function Ai(t,e,n){const a=[];return e.forEach(s=>{if(s.basisIndex<=t&&s.b>0){const r=parseFloat(s.b.toFixed(0));a.push({num:s.basisIndex+1,volume:r,cuttingCombination:n[s.basisIndex]})}}),a.sort((s,r)=>s.num-r.num)}class Yn{constructor(e){w(this,"head",0);w(this,"body",[]);w(this,"tail",0);e&&(this.head=e.head,this.body=[...e.body],this.tail=e.tail)}}const Fi=(t,e)=>{const n=[];return e.forEach(o=>{const a=new Yn;a.head=o.blank.square,t.forEach(s=>{a.body.push(s.filter(r=>r.square===o.blank.square).length)}),a.tail=o.volume,n.push(a)}),n},Si=t=>{const e=t.map(a=>new Yn(a)),n=t.map(()=>0),o=(a,s)=>(s[a]=-1,s);return t.forEach((a,s)=>{const r=a.body.concat(o(s,[...n]));e[s].body=r.map(i=>i*-1),e[s].tail*=-1}),e};function Zt(t,e=!1){const n=[],o=t[0].body.length,a=()=>{let s="V |";for(let r=1;r<=o;r++)s+=` X${r} `;return s+="| P",s};return n.push(a()),t.forEach(s=>{let r=`${parseFloat(s.head.toFixed(3))} |`;s.body.forEach(i=>{r+=i>-1?` ${i}  `:`${i}  `}),r+=e?`= ${s.tail}`:`>= ${s.tail}`,n.push(r)}),n}const Ie=t=>{const n=[];let o="N |  c  |  b  | ";t.rows[0].rowCoefficients.forEach((i,l)=>{o+=` X${l+1} `}),n.push(o),t.rows.forEach((i,l)=>{const d=parseFloat(i.b.toFixed(2));let u=i.b>=0?`${l+1} | X${i.basisIndex+1} | ${d} | `:`${l+1} | X${i.basisIndex+1} | ${d} | `;i.rowCoefficients.forEach(h=>{const p=parseFloat(h.toFixed(2));u+=h>-1?` ${p} `:`${p} `}),n.push(u)});const a=t.rowF;let r=`| F  | ${parseFloat(a.b.toFixed(2))} | `;return a.rowCoefficients.forEach(i=>{const l=parseFloat(i.toFixed(2));r+=i>-1?` ${l} `:`${l} `}),n.push(r),n};function ki(t,e){const s=[`Площадь не обрезанной заготовки: (${t.size.a} * ${t.size.h}) = ${parseFloat(t.square.toFixed(3))} мм² = ${Ge(t.square,3)} м²`,"Имя | Площадь мм²| Объем"];return e.forEach(r=>{const i=`${r.blank.name} | ${parseFloat(r.blank.square.toFixed(3))} | ${r.volume}`;s.push(i)}),s}function Ln(t,e,n,o,a=!1){const r=[],i=parseFloat(e.square.toFixed(3));r.push("===> Результаты вычисления задачи поиска решения оптимального раскроя"),r.push(`
===> Исходные данные`),r.push(`Площадь сырья для раскроя: ${i} мм² =  ${Ge(i,3)} м²`),r.push("Заказ:"),n.forEach((b,v)=>{const y=parseFloat(b.blank.square.toFixed(3));r.push(`N${v+1}. Площадь обреза: ${y} мм² =  ${Ge(y,3)} м²; Количество: ${b.volume} шт.`)}),r.push(`
===> Варианты раскроя изделия исходя из начальных условий (матрица).`),r.push("X - варианты раскроя."),r.push("V - площадь обреза."),r.push("Пересечение V/X -  количество распилов длины V по отношению к длине сырья для раскроя."),Zt(o).forEach(b=>r.push(b)),r.push(`
===> Оптимальный раскрой материала`);let l=0,d=0;const u=o[0].body.length-1,h=a?0:1;t.rows.forEach(b=>{if(b.basisIndex<=u&&b.b>0){const v=parseFloat(b.b.toFixed(h)),y=`Количество распилов варианта X${b.basisIndex+1}: ${v} шт.`;r.push(y),l+=b.b,o.forEach(k=>{const F=k.body[b.basisIndex];F&&(d+=b.b*F*k.head)})}});const p=parseFloat((l*e.square).toFixed(3)),f=parseFloat(l.toFixed(h)),g=parseFloat(d.toFixed(3)),c=parseFloat((p-d).toFixed(3));return r.push(`
Количество заготовок для распила: ${f} шт.`),r.push(`Полезная площадь распилов: ${g} мм²  = ${Ge(g,3)} м²`),r.push(`Общая площадь требуемых заготовок для распилов: ${p} мм² =  ${Ge(p,3)} м²`),r.push(`Остатки: ${c} мм² = ${Ge(c,3)} м²`),r}class en{constructor(e){w(this,"basisIndex",0);w(this,"rowCoefficients",[]);w(this,"b",0);e&&(this.basisIndex=e.basisIndex,this.rowCoefficients=[...e.rowCoefficients],this.b=e.b)}}class Jt{constructor(e){w(this,"rowCoefficients",[]);w(this,"b",0);e&&(this.rowCoefficients=[...e.rowCoefficients],this.b=e.b)}}class Le{constructor(e){w(this,"rows",[]);w(this,"rowF",new Jt);e&&(this.rowF=new Jt(e.rowF),this.rows=e.rows.map(n=>new en(n)))}}const Ei=t=>{const e=new Le,n=[];for(let o=t.length;o>0;o--)n.push(t[0].body.length-o);return n.forEach((o,a)=>{const s=t[a],r=new en({basisIndex:o,rowCoefficients:s.body,b:s.tail});e.rows.push(r)}),e.rowF=new Jt({b:0,rowCoefficients:[]}),t[0].body.forEach((o,a)=>{const s=n.includes(a);e.rowF.rowCoefficients.push(s?0:1)}),e},tn=(t,e)=>{const n=e.rowIndex,o=e.colIndex,a=new Le(t);a.rows[n].basisIndex=o;const s=t.rows[n],r=s.rowCoefficients,i=r[o];t.rows.forEach((u,h)=>{const p=a.rows[h];if(h!==n){const f=u.rowCoefficients[o],g=s.b;p.b=u.b-f*g/i,p.rowCoefficients=u.rowCoefficients.map((c,b)=>{if(b===o)return 0;{const v=s.rowCoefficients[b];return c-f*v/i}})}else p.b=u.b/i,p.rowCoefficients=u.rowCoefficients.map(f=>f/i)});const l=a.rowF,d=t.rowF.rowCoefficients[o];return l.b=t.rowF.b-s.b*d/i,t.rowF.rowCoefficients.forEach((u,h)=>{h!==o?l.rowCoefficients[h]=u-r[h]*d/i:l.rowCoefficients[h]=0}),a};function Ti(t,e){const n=(i,l=!0)=>{const d=f=>{let g=0;const c=f.rows;return c.forEach((b,v)=>{if(l&&b.b<0){const y=c[g].b>=0?0:c[g].b*-1;g=b.b*-1>y?v:g}else if(!l){const y=c[g].b>=0?c[g].b:c[g].b*-1;g=(b.b>=0?b.b:b.b*-1)>y?v:g}}),g},u=(f,g)=>{const c=g.rows[f].rowCoefficients;let b=0;return c.forEach((v,y)=>{const k=c[b]>=0?c[b]:c[b]*-1;b=(v>=0?v:v*-1)>k?y:b}),b},h=d(i),p=u(h,i);return{rowIndex:h,colIndex:p}},o=i=>![...i.rows].filter(l=>l.b<0).length;let a=1,s=new Le(t),r=o(s);for(;!r;){e.push(`
===> Начало итерации N${a}`),e.push(`
===> Этап 2. Шаг 1. Исходная таблица`),e.push(...Ie(s)),e.push(`
===> Этап 2. Шаг 2. Проверка свободных членов на допустимость решения`),e.push(`Все свободные члены >= 0 ? Ответ:${r}`);const i=n(s);e.push(`
===> Этап 2. Шаг 3. Поиск ведущей строки и столбца`),e.push(`Строка: ${i.rowIndex}, столбец: ${i.colIndex}`),s=tn(s,i),e.push(`
===> Этап 2. Шаг 4. Расчет новой симплекс таблицы `),e.push(...Ie(s)),e.push(`
===> Конец итерации N${a}`),r=o(s),a++}return s}function Ii(t,e){const n=(i,l=!0)=>{const d=(f,g)=>{let c=0;return g.forEach((b,v)=>{const y=b.b/b.rowCoefficients[f];if(y>=0){const k=g[c].b/g[c].rowCoefficients[f];c=y<k||k<0?v:c}}),c},h=(f=>{let g=0;return f.forEach((c,b)=>{if(l&&c<0){const v=f[g]*-1;g=c*-1>v?b:g}else if(!l){const v=f[g]>=0?f[g]:f[g]*-1;g=(c>=0?c:c*-1)>v?b:g}}),g})(i.rowF.rowCoefficients);return{rowIndex:d(h,i.rows),colIndex:h}},o=i=>![...i.rowF.rowCoefficients].filter(l=>l<0).length;let a=1,s=new Le(t),r=o(s);for(;!r;){e.push(`
===> Начало итерации N${a}`),e.push(`
===> Этап 3. Шаг 1. Исходная таблица`),e.push(...Ie(s)),e.push(`
===> Этап 3. Шаг 2. Проверка коэффициентов функции F на допустимость решения.`),e.push(`Все коэффициентов >= 0 ? Ответ:${r}`);const i=n(s);e.push(`
===> Этап 3. Шаг 3. Поиск ведущей строки и столбца для коэффициентов функции F`),e.push(`Строка: ${i.rowIndex}, столбец: ${i.colIndex}`),s=tn(s,i),e.push(`
===> Этап 3. Шаг 4. Расчет новой симплекс таблицы `),e.push(...Ie(s)),e.push(`
===> Конец итерации N${a}`),r=o(s),a++}return s}function Ri(t,e){const n=u=>!u.rows.filter(h=>+h.b.toFixed(2)%1!==0).length,o=(u,h=2)=>{const p=new Le(u);return p.rows.forEach(f=>{f.b=Number(f.b.toFixed(h)),f.rowCoefficients=f.rowCoefficients.map(g=>Number(g.toFixed(h)))}),p.rowF.rowCoefficients=p.rowF.rowCoefficients.map(f=>Number(f.toFixed(h))),p},a=u=>{const h=c=>{let b=0,v=0;return c.rows.forEach((y,k)=>{const F=y.b%1;F>b&&(b=F,v=k)}),e.push(`Максимальная дробная часть:${b}`),e.push(`Индекс максимальной дробной части:${v}`),v},p=c=>{const b=c%1;return c>=0?-b:b<0?-1-b:b},f=h(u),g=new en(u.rows[f]);return g.b=p(g.b),g.rowCoefficients=[...g.rowCoefficients.map(c=>p(c)),1],g},s=u=>{const h=(p,f)=>{let g=0;return f.forEach((c,b)=>{const v=p/c;if(v>0){const y=c/f[g];g=v<y||y<0?b:g}}),g};return{rowIndex:l.rows.length-1,colIndex:h(u.b,u.rowCoefficients)}},r=(u,h)=>{const p=g=>{const c=new Le(g);return c.rows.forEach(b=>b.rowCoefficients.push(0)),c.rowF.rowCoefficients.push(0),c},f=new Le(u);return l=p(l),f.rows.push(h),f};let i=1,l=new Le(t),d=n(l);for(e.push(`
===> Этап 4. Шаг 0. Проверка свободных членов на целочисленность.`),e.push(`Все свободные члены b целые ? Ответ:${d}`),l=o(l);!d;){e.push(`
===> Начало итерации N${i}`),e.push(`
===> Этап 4. Шаг 1. Исходная таблица`),e.push(...Ie(l)),e.push(`
===> Этап 4. Шаг 2. Формирование нового ограничения`);const u=a(l);l=r(l,u),e.push(...Ie(l));const h=s(u);e.push(`
===> Этап 4. Шаг 3. Поиск ведущей строки и столбца`),e.push(`Строка: ${h.rowIndex}, столбец: ${h.colIndex}`),e.push(`
===> Этап 4. Шаг 4. Расчет новой симплекс таблицы `),l=o(tn(l,h)),e.push(...Ie(l)),e.push(`
===> Этап 4. Шаг 4. Проверка свободных членов на целочисленность.`),d=n(l),e.push(`Все свободные члены b целые ? Ответ: ${d}`),e.push(`
===> Конец итерации N${i}`),i>30&&(d=!0,e.push(`
===> Внимание! Завершилось после 100 итераций`)),i++}return l}const Bi=t=>{const e=t.stockSawing*2*t.rawWorkPiece.size.h,n=[];n.push(`
===> Этап 0. Подготовка данных и коэффициентов `),n.push(`Припуск распила: ${t.stockSawing}`),n.push(`Площадь припуска распила: ${e} мм² = ${Ge(e)} м²`),n.push(`
Таблица заготовок и их параметров`),n.push(...ki(t.rawWorkPiece,t.listOrders));const o=yi(t.rawWorkPiece.square,t.listOrders,e),a=Ci(t.stockSawing,t.rawWorkPiece.size.a,t.rawWorkPiece.size.c,o),s=a.cuttingCombination;n.push(`
===> Этап 0. Шаг 1. Варианты раскроя изделия исходя из начальных условий.`),n.push(`Количество комбинаций: ${a.cuttingCombination.length}`),console.log(a),console.log(n),console.log(s),n.push(`
===> Этап 1. Переход к канонической форме задачи линейного программирования путем введения неотрицательных дополнительных балансовых переменных.`);const r=Fi(s,t.listOrders);n.push(`
===> Этап 1. Шаг 1. Получение матрицы коэффициентов`),n.push(...Zt(r));const i=Si(r);n.push(`
===> Этап 1. Шаг 2. Переход к канонической форме задачи линейного программирования путем введения неотрицательных дополнительных балансовых переменных.`),n.push(...Zt(i,!0)),n.push(`
===> Этап 2.  Проверка симплекс таблицы на допустимость решения. Расчет новой симплекс таблицы. `),n.push(`
===> Этап 2. Шаг 0. Инициализация симплекс таблицы`);const l=Ei(i);n.push(...Ie(l));const d=Ti(l,n);n.push(`
===> Этап 3. Основной алгоритм решения задачи ЛП симплекс-методом. Расчет новой симплекс таблицы. `);const u=Ii(d,n);n.push(...Ie(u)),n.push(...Ln(u,t.rawWorkPiece,t.listOrders,r).map(g=>`
${g}`)),n.push(`
===> Этап 4. Алгоритм поиска целочисленного решения ЗЛП методом Гомори `);const h=Ri(u,n);n.push(...Ln(h,t.rawWorkPiece,t.listOrders,r,!0).map(g=>`
${g}`));const p=Ai(r[0].body.length-1,h.rows,s),f=Un(t.stockSawing,p,t.rawWorkPiece.size.a);return console.log(f),{listLogMessages:n,drawCombinations:a.drawCombinations,optimumDrawCombinations:f}};function Vi(t){let e,n;return{c(){e=z("label"),n=J(t[1]),this.h()},l(o){e=x(o,"LABEL",{for:!0,class:!0});var a=P(e);n=Q(a,t[1]),a.forEach(D),this.h()},h(){m(e,"for",t[0]),m(e,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white")},m(o,a){se(o,e,a),_(e,n)},p(o,[a]){a&2&&Mn(n,o[1]),a&1&&m(e,"for",o[0])},i:He,o:He,d(o){o&&D(e)}}}function qi(t,e,n){let{forName:o}=e,{text:a}=e;return t.$$set=s=>{"forName"in s&&n(0,o=s.forName),"text"in s&&n(1,a=s.text)},[o,a]}class Li extends ft{constructor(e){super(),dt(this,e,qi,Vi,gt,{forName:0,text:1})}}function Hi(t){let e,n,o,a,s;e=new Li({props:{forName:t[1],text:t[6]}});function r(l){t[7](l)}let i={id:t[1],type:t[3],placeholder:t[2],required:t[4],onChange:t[5]};return t[0]!==void 0&&(i.value=t[0]),o=new Te({props:i}),fe.push(()=>de(o,"value",r)),{c(){U(e.$$.fragment),n=R(),U(o.$$.fragment)},l(l){Y(e.$$.fragment,l),n=B(l),Y(o.$$.fragment,l)},m(l,d){K(e,l,d),se(l,n,d),K(o,l,d),s=!0},p(l,[d]){const u={};d&2&&(u.forName=l[1]),d&64&&(u.text=l[6]),e.$set(u);const h={};d&2&&(h.id=l[1]),d&8&&(h.type=l[3]),d&4&&(h.placeholder=l[2]),d&16&&(h.required=l[4]),d&32&&(h.onChange=l[5]),!a&&d&1&&(a=!0,h.value=l[0],ge(()=>a=!1)),o.$set(h)},i(l){s||(M(e.$$.fragment,l),M(o.$$.fragment,l),s=!0)},o(l){$(e.$$.fragment,l),$(o.$$.fragment,l),s=!1},d(l){G(e,l),l&&D(n),G(o,l)}}}function Ni(t,e,n){let{id:o=""}=e,{placeholder:a=""}=e,{type:s="text"}=e,{required:r=!1}=e,{value:i}=e,{onChange:l=void 0}=e,{label:d=""}=e;function u(h){i=h,n(0,i)}return t.$$set=h=>{"id"in h&&n(1,o=h.id),"placeholder"in h&&n(2,a=h.placeholder),"type"in h&&n(3,s=h.type),"required"in h&&n(4,r=h.required),"value"in h&&n(0,i=h.value),"onChange"in h&&n(5,l=h.onChange),"label"in h&&n(6,d=h.label)},[i,o,a,s,r,l,d,u]}class Tt extends ft{constructor(e){super(),dt(this,e,Ni,Hi,gt,{id:1,placeholder:2,type:3,required:4,value:0,onChange:5,label:6})}}class Kn{constructor(e){w(this,"_name");w(this,"_square");w(this,"_p1");w(this,"_p2");w(this,"_p3");w(this,"_p4");w(this,"_wP1P2");w(this,"_wP2P3");w(this,"_wP3P4");w(this,"_wP4P1");w(this,"_h");w(this,"_colorBody");w(this,"_colorContour");w(this,"_colorTextLegend");w(this,"_colorContourLegend");w(this,"isHorizontalFlipped");w(this,"isVerticalFlipped");w(this,"isShowBodyText");w(this,"isShowBaseContour");w(this,"isShowSideContour");w(this,"baseSpace");w(this,"sideSpace");w(this,"halfYBoard");w(this,"halfXBoard");w(this,"wDivider");w(this,"hDivider");this._name=e.name,this._square=e.square,this._p1={x:e.p1.x,y:e.p1.y},this._p2={x:e.p2.x,y:e.p2.y},this._p3={x:e.p3.x,y:e.p3.y},this._p4={x:e.p4.x,y:e.p4.y},this._wP1P2=e.wP1P2,this._wP2P3=e.wP2P3,this._wP3P4=e.wP3P4,this._wP4P1=e.wP4P1,this._h=e.h,this.isHorizontalFlipped=e.isHorizontalFlipped!==void 0?e.isHorizontalFlipped:!1,this.isVerticalFlipped=e.isVerticalFlipped!==void 0?e.isVerticalFlipped:!1,this.isShowBodyText=e.isShowBodyText!==void 0?e.isShowBodyText:!0,this.isShowBaseContour=e.isShowBaseContour!==void 0?e.isShowBaseContour:!0,this.isShowSideContour=e.isShowSideContour!==void 0?e.isShowSideContour:!0,this.baseSpace=e.baseSpace??20,this.sideSpace=e.sideSpace??20,this.halfXBoard=e.halfXBoard??250,this.halfYBoard=e.halfYBoard??50,this.wDivider=e.wDivider??2,this.hDivider=e.hDivider??2,this._colorBody=e.colorBody??"#d1ffd8",this._colorContour=e.colorContour??"#B70A02",this._colorTextLegend=e.colorTextLegend??"black",this._colorContourLegend=e.colorContourLegend??"gray"}get perimeter(){return this._wP1P2+this._wP2P3+this._wP3P4+this._wP4P1}get colorTextLegend(){return this._colorTextLegend}get colorContourLegend(){return this._colorContourLegend}get colorBody(){return this._colorBody}get name(){return this._name}get square(){return this._square}get p1(){return this._p1}get p2(){return this._p2}get p3(){return this._p3}get p4(){return this._p4}get wP1P2(){return this._wP1P2}get wP2P3(){return this._wP2P3}get wP3P4(){return this._wP3P4}get wP4P1(){return this._wP4P1}get h(){return this._h}get colorContour(){return this._colorContourLegend}}const Oi=(t,e,n,o,a)=>{const s=a>0?1:-1;return{x:t-s*Math.sqrt(Math.abs(o*o-(e-n)*(e-n))),y:n}},Qt={REMAINS:"Ост.",STOCK:"п."};function Gn(t,e=1230,n=300){const o=t.appendChild(document.createElement("div"));o.className="flex flex-row justify-around items-center";const a=o.appendChild(document.createElement("canvas")),s=a.getContext("2d");return a.width=e,a.height=n,s}function jt(t,e){const n=r=>r/t.wDivider+t.halfXBoard,o=r=>r/t.hDivider+t.halfYBoard,s=(r,i)=>{i.setLineDash([5,3]),i.textBaseline="bottom",i.lineDashOffset=1,i.strokeStyle=r.colorContourLegend,i.fillStyle=r.colorTextLegend,i.beginPath();const l=(f,g,c,b=0,v=0)=>{i.setLineDash([5,3]),i.beginPath(),i.moveTo(n(f.x),o(f.y)),i.lineTo(n(f.x)+b,o(f.y)+v),i.lineTo(n(g.x)+b,o(g.y)+v),i.lineTo(n(g.x),o(g.y)),i.stroke(),i.closePath()},d=(f,g,c,b=-r.baseSpace)=>{l(f,g,c,0,b);const v=parseFloat(c.toFixed(1)),y=` ${v} мм`,k=b>0?b+15:b-5,F=v>100?y.length:-5,I={x:(n(g.x)+n(f.x))/2-F,y:(o(g.y)+o(f.y))/2+k};i.fillText(y,I.x,I.y)},u=(f,g,c,b=30)=>{l(f,g,c,b);const v=b>0?b*3:b*4,y={x:(n(g.x)+n(f.x))/2+v,y:(o(g.y)+o(f.y))/2};i.fillText(` ${c} мм`,y.x,y.y)},h=(f,g,c)=>{d(f,g,c,r.baseSpace)},p=(f,g,c)=>{u(f,g,c,-r.baseSpace)};r.isShowBaseContour&&(d(r.p1,r.p2,r.wP1P2),h(r.p3,r.p4,r.wP3P4)),r.isShowSideContour&&(u(r.p2,r.p3,r.wP2P3),p(r.p4,r.p1,r.wP4P1))};if(e.font="8pt Arial",e.strokeStyle=t.colorContour,e.fillStyle=t.colorBody,e.beginPath(),e.setLineDash([]),e.moveTo(n(t.p1.x),o(t.p1.y)),e.lineTo(n(t.p1.x),o(t.p1.y)),e.lineTo(n(t.p2.x),o(t.p2.y)),e.lineTo(n(t.p3.x),o(t.p3.y)),e.lineTo(n(t.p4.x),o(t.p4.y)),e.lineTo(n(t.p1.x),o(t.p1.y)),e.stroke(),e.fill(),t.isShowBodyText){e.fillStyle=t.colorTextLegend;const r=t.isHorizontalFlipped?"( ⇆ )":"",i=t.isVerticalFlipped?"( ⇅ )":"",l=wi(t.square),d=` S=${l} м² ${r} ${i}`;if(t.name===Qt.REMAINS&&l>0){const u=t.wP1P2>=t.wP3P4?n(t.p1.x)+10:n(t.p4.x),h=t.wP1P2>=t.wP3P4?o(t.h)/2-10:o(t.h)+50,p={x:u,y:h};e.fillText(d,p.x,p.y),e.setLineDash([5,3]),e.beginPath(),t.wP1P2>=t.wP3P4?(e.moveTo(p.x,p.y),e.lineTo(n(t.p1.x+40),o(t.p1.y))):(e.moveTo(p.x+10,p.y-10),e.lineTo(n(t.p4.x+40),o(t.p4.y))),e.stroke(),e.closePath()}else{const u=(n(t.p2.x)+n(t.p1.x))/2-d.length*2,h=(n(t.p3.x)+n(t.p4.x))/2,p={x:2*u*h/(u+h),y:o(t.h)/2+t.halfYBoard/2};e.fillText(d,p.x,p.y)}e.closePath()}s(t,e)}function Wn(t){for(;t!=null&&t.firstChild&&t.lastChild;)t.removeChild(t.lastChild)}function Hn(t,e,n,o){const a=i=>new Kn({name:"rawPiece",square:i.square,p1:{x:0,y:0},p2:{x:i.size.a,y:0},p3:{x:i.size.a,y:i.size.h},p4:{x:0,y:i.size.h},wP1P2:i.size.a,wP2P3:i.size.b,wP3P4:i.size.c,wP4P1:i.size.d,h:i.size.h,colorBody:"lightgray",isShowBodyText:!1,isShowSideContour:!1,baseSpace:60,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4}),s=(i,l)=>{i.beginPath(),i.font=" 14pt Arial",i.fillStyle="black";const d=l.volume?" (x"+l.volume+")":"",u=l.combination.filter(h=>h.name!==Qt.REMAINS&&h.name!==Qt.STOCK).length;i.fillText(`Вариант №${l.num}${d}.  Деталей ${u}`,20,20),i.stroke(),i.fill(),i.closePath()},r=document.getElementById(t);r&&(Wn(r),o.forEach(i=>{const l=Gn(r);s(l,i),jt(a(n),l),i.combination.forEach(d=>{jt(d,l)})}))}function Mi(t,e){const n=document.getElementById(t);if(n){Wn(n);const o=Gn(n,1e3,200),a={x:0,y:0},s={x:a.x+e.size.a,y:0},r={x:s.x,y:e.size.h},i=e.isRect?r:Oi(s.x,s.y,r.y,e.size.b,e.size.differenceBases),l={x:i.x-e.size.c,y:i.y},d=new Kn({name:e.name,square:e.square,p1:a,p2:s,p3:i,p4:l,wP1P2:e.size.a,wP2P3:e.size.b,wP3P4:e.size.c,wP4P1:e.size.d,h:e.size.h,isHorizontalFlipped:e.isHorizontalFlipped,isVerticalFlipped:e.isVerticalFlipped});jt(d,o)}}function Nn(t,e,n){const o=t.slice();return o[24]=e[n],o[25]=e,o[26]=n,o}function On(t){let e,n,o=t[26]+1+"",a,s,r,i,l,d,u,h,p,f,g,c,b,v,y,k,F,I,X,L,j,W,C,E,ce,te,_e,ee,Ne,we,oe,he,Oe,ne,ie,me,be,ue,pe;function O(S){t[11](S,t[24])}let De={type:"text",id:"namePiece",placeholder:"Наименования детали..."};t[24].blank.name!==void 0&&(De.value=t[24].blank.name),i=new Te({props:De}),fe.push(()=>de(i,"value",O));function mt(S){t[12](S,t[24])}let Ze={type:"number",numSettings:{min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength},id:"lengthAPiece",placeholder:"Длина верхнего основания детали..."};t[24].blank.size.a!==void 0&&(Ze.value=t[24].blank.size.a),h=new Te({props:Ze}),fe.push(()=>de(h,"value",mt));function Fe(S){t[13](S,t[24])}let Je={id:"lengthBPiece",type:"number",numSettings:{min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength},disabled:!0,placeholder:"Длина правой стороны детали..."};t[24].blank.size.b!==void 0&&(Je.value=t[24].blank.size.b),c=new Te({props:Je}),fe.push(()=>de(c,"value",Fe));function pt(S){t[14](S,t[24])}let ve={id:"lengthCPiece",type:"number",numSettings:{min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength},placeholder:"Длина нижнего основания детали..."};t[24].blank.size.c!==void 0&&(ve.value=t[24].blank.size.c),k=new Te({props:ve}),fe.push(()=>de(k,"value",pt));function _t(S){t[15](S,t[24])}let Qe={id:"lengthDPiece",type:"number",disabled:!0,numSettings:{min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength},placeholder:"Длина левой стороны детали..."};t[24].blank.size.d!==void 0&&(Qe.value=t[24].blank.size.d),L=new Te({props:Qe}),fe.push(()=>de(L,"value",_t));function Se(S){t[16](S,t[24])}let je={id:"leftDownAngle",type:"number",numSettings:{min:t[24].blank.size.minAngle,max:t[24].blank.size.maxAngle},placeholder:"Левый угол при нижнем основании детали..."};t[24].blank.size.leftDownAngle!==void 0&&(je.value=t[24].blank.size.leftDownAngle),E=new Te({props:je}),fe.push(()=>de(E,"value",Se));function wt(S){t[17](S,t[24])}let ze={id:"rightDownAngle",type:"number",disabled:!0,numSettings:{min:t[24].blank.size.minAngle,max:t[24].blank.size.maxAngle},placeholder:"Правый угол при нижнем основании детали..."};t[24].blank.size.rightDownAngle!==void 0&&(ze.value=t[24].blank.size.rightDownAngle),ee=new Te({props:ze}),fe.push(()=>de(ee,"value",wt));function bt(S){t[18](S,t[24])}let et={id:"volumePiece",type:"number",numSettings:{min:t[24].minVolume,max:t[24].maxVolume},placeholder:"Количество деталей данного типа..."};return t[24].volume!==void 0&&(et.value=t[24].volume),he=new Te({props:et}),fe.push(()=>de(he,"value",bt)),{c(){e=z("tr"),n=z("th"),a=J(o),s=R(),r=z("td"),U(i.$$.fragment),d=R(),u=z("td"),U(h.$$.fragment),f=R(),g=z("td"),U(c.$$.fragment),v=R(),y=z("td"),U(k.$$.fragment),I=R(),X=z("td"),U(L.$$.fragment),W=R(),C=z("td"),U(E.$$.fragment),te=R(),_e=z("td"),U(ee.$$.fragment),we=R(),oe=z("td"),U(he.$$.fragment),ne=R(),ie=z("tr"),me=z("td"),be=z("div"),ue=R(),this.h()},l(S){e=x(S,"TR",{class:!0});var T=P(e);n=x(T,"TH",{scope:!0,class:!0});var ke=P(n);a=Q(ke,o),ke.forEach(D),s=B(T),r=x(T,"TD",{class:!0});var ae=P(r);Y(i.$$.fragment,ae),ae.forEach(D),d=B(T),u=x(T,"TD",{class:!0});var xe=P(u);Y(h.$$.fragment,xe),xe.forEach(D),f=B(T),g=x(T,"TD",{class:!0});var Pe=P(g);Y(c.$$.fragment,Pe),Pe.forEach(D),v=B(T),y=x(T,"TD",{class:!0});var le=P(y);Y(k.$$.fragment,le),le.forEach(D),I=B(T),X=x(T,"TD",{class:!0});var Ce=P(X);Y(L.$$.fragment,Ce),Ce.forEach(D),W=B(T),C=x(T,"TD",{class:!0});var ye=P(C);Y(E.$$.fragment,ye),ye.forEach(D),te=B(T),_e=x(T,"TD",{class:!0});var re=P(_e);Y(ee.$$.fragment,re),re.forEach(D),we=B(T),oe=x(T,"TD",{class:!0});var tt=P(oe);Y(he.$$.fragment,tt),tt.forEach(D),T.forEach(D),ne=B(S),ie=x(S,"TR",{class:!0});var Me=P(ie);me=x(Me,"TD",{class:!0,colspan:!0});var Ee=P(me);be=x(Ee,"DIV",{id:!0,class:!0}),P(be).forEach(D),Ee.forEach(D),ue=B(Me),Me.forEach(D),this.h()},h(){m(n,"scope","row"),m(n,"class","px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"),m(r,"class","min-w-[150px] pr-6 py-4 border-r"),m(u,"class","px-6 py-4"),m(g,"class","px-6 py-4"),m(y,"class","px-6 py-4"),m(X,"class","px-6 py-4"),m(C,"class","px-6 py-4"),m(_e,"class","px-6 py-4"),m(oe,"class","w-[20px] border-l px-6 py-4"),m(e,"class","bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-[gray]/5 dark:hover:bg-gray-600"),m(be,"id","containerPieceCanvas"+t[26]),m(be,"class","flex flex-col"),m(me,"class","px-6 py-4"),m(me,"colspan","200"),m(ie,"class","bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-[gray]/5 dark:hover:bg-gray-600")},m(S,T){se(S,e,T),_(e,n),_(n,a),_(e,s),_(e,r),K(i,r,null),_(e,d),_(e,u),K(h,u,null),_(e,f),_(e,g),K(c,g,null),_(e,v),_(e,y),K(k,y,null),_(e,I),_(e,X),K(L,X,null),_(e,W),_(e,C),K(E,C,null),_(e,te),_(e,_e),K(ee,_e,null),_(e,we),_(e,oe),K(he,oe,null),se(S,ne,T),se(S,ie,T),_(ie,me),_(me,be),_(ie,ue),pe=!0},p(S,T){t=S;const ke={};!l&&T&4&&(l=!0,ke.value=t[24].blank.name,ge(()=>l=!1)),i.$set(ke);const ae={};T&4&&(ae.numSettings={min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength}),!p&&T&4&&(p=!0,ae.value=t[24].blank.size.a,ge(()=>p=!1)),h.$set(ae);const xe={};T&4&&(xe.numSettings={min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength}),!b&&T&4&&(b=!0,xe.value=t[24].blank.size.b,ge(()=>b=!1)),c.$set(xe);const Pe={};T&4&&(Pe.numSettings={min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength}),!F&&T&4&&(F=!0,Pe.value=t[24].blank.size.c,ge(()=>F=!1)),k.$set(Pe);const le={};T&4&&(le.numSettings={min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength}),!j&&T&4&&(j=!0,le.value=t[24].blank.size.d,ge(()=>j=!1)),L.$set(le);const Ce={};T&4&&(Ce.numSettings={min:t[24].blank.size.minAngle,max:t[24].blank.size.maxAngle}),!ce&&T&4&&(ce=!0,Ce.value=t[24].blank.size.leftDownAngle,ge(()=>ce=!1)),E.$set(Ce);const ye={};T&4&&(ye.numSettings={min:t[24].blank.size.minAngle,max:t[24].blank.size.maxAngle}),!Ne&&T&4&&(Ne=!0,ye.value=t[24].blank.size.rightDownAngle,ge(()=>Ne=!1)),ee.$set(ye);const re={};T&4&&(re.numSettings={min:t[24].minVolume,max:t[24].maxVolume}),!Oe&&T&4&&(Oe=!0,re.value=t[24].volume,ge(()=>Oe=!1)),he.$set(re)},i(S){pe||(M(i.$$.fragment,S),M(h.$$.fragment,S),M(c.$$.fragment,S),M(k.$$.fragment,S),M(L.$$.fragment,S),M(E.$$.fragment,S),M(ee.$$.fragment,S),M(he.$$.fragment,S),pe=!0)},o(S){$(i.$$.fragment,S),$(h.$$.fragment,S),$(c.$$.fragment,S),$(k.$$.fragment,S),$(L.$$.fragment,S),$(E.$$.fragment,S),$(ee.$$.fragment,S),$(he.$$.fragment,S),pe=!1},d(S){S&&D(e),G(i),G(h),G(c),G(k),G(L),G(E),G(ee),G(he),S&&D(ne),S&&D(ie)}}}function $i(t){let e;return{c(){e=z("div"),this.h()},l(n){e=x(n,"DIV",{id:!0,class:!0}),P(e).forEach(D),this.h()},h(){m(e,"id","containerWorkPieceCanvas"),m(e,"class","flex flex-col")},m(n,o){se(n,e,o)},p:He,d(n){n&&D(e)}}}function Xi(t){let e,n,o;return{c(){e=z("div"),this.h()},l(a){e=x(a,"DIV",{id:!0,contenteditable:!0}),P(e).forEach(D),this.h()},h(){m(e,"id","log"),m(e,"contenteditable","true"),t[3]===void 0&&Xn(()=>t[19].call(e))},m(a,s){se(a,e,s),t[3]!==void 0&&(e.innerHTML=t[3]),n||(o=ut(e,"input",t[19]),n=!0)},p(a,s){s&8&&a[3]!==e.innerHTML&&(e.innerHTML=a[3])},d(a){a&&D(e),n=!1,o()}}}function Ui(t){let e,n,o;return{c(){e=z("div"),this.h()},l(a){e=x(a,"DIV",{id:!0,contenteditable:!0}),P(e).forEach(D),this.h()},h(){m(e,"id","shortLog"),m(e,"contenteditable","true"),t[4]===void 0&&Xn(()=>t[20].call(e))},m(a,s){se(a,e,s),t[4]!==void 0&&(e.innerHTML=t[4]),n||(o=ut(e,"input",t[20]),n=!0)},p(a,s){s&16&&a[4]!==e.innerHTML&&(e.innerHTML=a[4])},d(a){a&&D(e),n=!1,o()}}}function Yi(t){let e;return{c(){e=z("div"),this.h()},l(n){e=x(n,"DIV",{id:!0,class:!0}),P(e).forEach(D),this.h()},h(){m(e,"id","containerOptimumCombinationsCanvas"),m(e,"class","flex flex-col")},m(n,o){se(n,e,o)},p:He,d(n){n&&D(e)}}}function Ki(t){let e,n,o,a,s,r,i,l,d,u,h,p,f,g,c,b,v,y,k,F,I,X,L,j,W,C,E,ce,te,_e,ee,Ne,we,oe,he,Oe,ne,ie,me,be,ue,pe,O,De,mt,Ze,Fe,Je,pt,ve,_t,Qe,Se,je,wt,ze,bt,et,S,T,ke,ae,xe,Pe,le,Ce,ye,re,tt,Me,Ee,Rt,$e,Bt,Vt,nt,Re,qt,At,Lt,it,Ht,Nt,st,Be,Ot,ot,Ve,Mt,at,qe,Ft,$t,nn;function Zn(A){t[7](A)}let sn={label:"Имя",id:"nameWorkPiece",type:"text",placeholder:"Имя исходной заготовки...",required:!0};t[1].name!==void 0&&(sn.value=t[1].name),g=new Tt({props:sn}),fe.push(()=>de(g,"value",Zn)),y=new Tt({props:{label:"Длина, мм.",id:"lengthRawPiece",type:"number",placeholder:"Длина исходной заготовки(в миллиметрах)...",value:t[1].size.a,onChange:t[8],required:!0}});function Jn(A){t[9](A)}let on={label:"Ширина (h), мм.",id:"widthRawPiece",type:"number",placeholder:"Ширина исходной заготовки (в миллиметрах)...",required:!0};t[1].size.h!==void 0&&(on.value=t[1].size.h),I=new Tt({props:on}),fe.push(()=>de(I,"value",Jn));function Qn(A){t[10](A)}let an={label:"Припуск, мм.",id:"stockSawing",type:"number",placeholder:"Припуск при распиле (в миллиметрах)...",required:!0};t[0]!==void 0&&(an.value=t[0]),W=new Tt({props:an}),fe.push(()=>de(W,"value",Qn)),ee=new _i({props:{src:zi,class:"max-h-72 m-auto"}});let Xe=t[2],H=[];for(let A=0;A<Xe.length;A+=1)H[A]=On(Nn(t,Xe,A));const jn=A=>$(H[A],1,1,()=>{H[A]=null});return Re=new kt({props:{title:"Варианты раскроя",isOpen:!0,$$slots:{default:[$i]},$$scope:{ctx:t}}}),Be=new kt({props:{title:"Результаты вычислений",$$slots:{default:[Xi]},$$scope:{ctx:t}}}),Ve=new kt({props:{title:"Краткие результаты",$$slots:{default:[Ui]},$$scope:{ctx:t}}}),qe=new kt({props:{title:"Оптимальные варианты раскроя",$$slots:{default:[Yi]},$$scope:{ctx:t}}}),{c(){e=z("div"),n=z("div"),o=z("main"),a=z("div"),s=z("div"),r=z("section"),i=z("div"),l=z("h2"),d=J("Параметры исходной заготовки для распила"),u=R(),h=z("form"),p=z("div"),f=z("div"),U(g.$$.fragment),b=R(),v=z("div"),U(y.$$.fragment),k=R(),F=z("div"),U(I.$$.fragment),L=R(),j=z("div"),U(W.$$.fragment),E=R(),ce=z("h2"),te=J("Схема детали"),_e=R(),U(ee.$$.fragment),Ne=R(),we=z("div"),oe=z("button"),he=J("Запустить расчет"),Oe=R(),ne=z("div"),ie=z("h2"),me=J("Список требуемых деталей из заказа"),be=R(),ue=z("table"),pe=z("thead"),O=z("tr"),De=z("th"),mt=J("№"),Ze=R(),Fe=z("th"),Je=J("Имя"),pt=R(),ve=z("th"),_t=J("Длина верхнего основания (a), мм."),Qe=R(),Se=z("th"),je=J("Длина правой стороны (b), мм."),wt=R(),ze=z("th"),bt=J("Длина нижнего основания (c), мм."),et=R(),S=z("th"),T=J("Длина левой стороны (d), мм."),ke=R(),ae=z("th"),xe=J("Левый угол при нижнем основании (f), °"),Pe=R(),le=z("th"),Ce=J("Правый угол при нижнем основании (e), °"),ye=R(),re=z("th"),tt=J("Количество, шт."),Me=R(),Ee=z("tbody");for(let A=0;A<H.length;A+=1)H[A].c();Rt=R(),$e=z("button"),Bt=J("+ Добавить деталь"),Vt=R(),nt=z("div"),U(Re.$$.fragment),qt=R(),At=z("hr"),Lt=R(),it=z("h2"),Ht=J("Результаты"),Nt=R(),st=z("div"),U(Be.$$.fragment),Ot=R(),ot=z("div"),U(Ve.$$.fragment),Mt=R(),at=z("div"),U(qe.$$.fragment),this.h()},l(A){e=x(A,"DIV",{class:!0});var V=P(e);n=x(V,"DIV",{class:!0});var Ae=P(n);o=x(Ae,"MAIN",{class:!0});var lt=P(o);a=x(lt,"DIV",{class:!0});var Dt=P(a);s=x(Dt,"DIV",{class:!0});var q=P(s);r=x(q,"SECTION",{class:!0});var vt=P(r);i=x(vt,"DIV",{class:!0});var Ue=P(i);l=x(Ue,"H2",{class:!0});var zt=P(l);d=Q(zt,"Параметры исходной заготовки для распила"),zt.forEach(D),u=B(Ue),h=x(Ue,"FORM",{action:!0});var xt=P(h);p=x(xt,"DIV",{class:!0});var N=P(p);f=x(N,"DIV",{class:!0});var Pt=P(f);Y(g.$$.fragment,Pt),Pt.forEach(D),b=B(N),v=x(N,"DIV",{class:!0});var ln=P(v);Y(y.$$.fragment,ln),ln.forEach(D),k=B(N),F=x(N,"DIV",{class:!0});var rn=P(F);Y(I.$$.fragment,rn),rn.forEach(D),L=B(N),j=x(N,"DIV",{class:!0});var hn=P(j);Y(W.$$.fragment,hn),hn.forEach(D),N.forEach(D),xt.forEach(D),Ue.forEach(D),vt.forEach(D),E=B(q),ce=x(q,"H2",{class:!0});var cn=P(ce);te=Q(cn,"Схема детали"),cn.forEach(D),_e=B(q),Y(ee.$$.fragment,q),Ne=B(q),we=x(q,"DIV",{class:!0});var un=P(we);oe=x(un,"BUTTON",{class:!0});var fn=P(oe);he=Q(fn,"Запустить расчет"),fn.forEach(D),un.forEach(D),Oe=B(q),ne=x(q,"DIV",{class:!0});var rt=P(ne);ie=x(rt,"H2",{class:!0});var dn=P(ie);me=Q(dn,"Список требуемых деталей из заказа"),dn.forEach(D),be=B(rt),ue=x(rt,"TABLE",{class:!0});var St=P(ue);pe=x(St,"THEAD",{class:!0});var gn=P(pe);O=x(gn,"TR",{});var Z=P(O);De=x(Z,"TH",{scope:!0,class:!0});var mn=P(De);mt=Q(mn,"№"),mn.forEach(D),Ze=B(Z),Fe=x(Z,"TH",{scope:!0,class:!0});var pn=P(Fe);Je=Q(pn,"Имя"),pn.forEach(D),pt=B(Z),ve=x(Z,"TH",{scope:!0,class:!0});var _n=P(ve);_t=Q(_n,"Длина верхнего основания (a), мм."),_n.forEach(D),Qe=B(Z),Se=x(Z,"TH",{scope:!0,class:!0});var wn=P(Se);je=Q(wn,"Длина правой стороны (b), мм."),wn.forEach(D),wt=B(Z),ze=x(Z,"TH",{scope:!0,class:!0});var bn=P(ze);bt=Q(bn,"Длина нижнего основания (c), мм."),bn.forEach(D),et=B(Z),S=x(Z,"TH",{scope:!0,class:!0});var Dn=P(S);T=Q(Dn,"Длина левой стороны (d), мм."),Dn.forEach(D),ke=B(Z),ae=x(Z,"TH",{scope:!0,class:!0});var vn=P(ae);xe=Q(vn,"Левый угол при нижнем основании (f), °"),vn.forEach(D),Pe=B(Z),le=x(Z,"TH",{scope:!0,class:!0});var zn=P(le);Ce=Q(zn,"Правый угол при нижнем основании (e), °"),zn.forEach(D),ye=B(Z),re=x(Z,"TH",{scope:!0,class:!0});var xn=P(re);tt=Q(xn,"Количество, шт."),xn.forEach(D),Z.forEach(D),gn.forEach(D),Me=B(St),Ee=x(St,"TBODY",{});var Pn=P(Ee);for(let Xt=0;Xt<H.length;Xt+=1)H[Xt].l(Pn);Pn.forEach(D),St.forEach(D),Rt=B(rt),$e=x(rt,"BUTTON",{class:!0});var Cn=P($e);Bt=Q(Cn,"+ Добавить деталь"),Cn.forEach(D),rt.forEach(D),Vt=B(q),nt=x(q,"DIV",{class:!0});var yn=P(nt);Y(Re.$$.fragment,yn),yn.forEach(D),qt=B(q),At=x(q,"HR",{class:!0}),Lt=B(q),it=x(q,"H2",{class:!0});var An=P(it);Ht=Q(An,"Результаты"),An.forEach(D),Nt=B(q),st=x(q,"DIV",{class:!0});var Fn=P(st);Y(Be.$$.fragment,Fn),Fn.forEach(D),Ot=B(q),ot=x(q,"DIV",{class:!0});var Sn=P(ot);Y(Ve.$$.fragment,Sn),Sn.forEach(D),Mt=B(q),at=x(q,"DIV",{class:!0});var kn=P(at);Y(qe.$$.fragment,kn),kn.forEach(D),q.forEach(D),Dt.forEach(D),lt.forEach(D),Ae.forEach(D),V.forEach(D),this.h()},h(){m(l,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),m(f,"class","sm:col-span-2"),m(v,"class","w-full"),m(F,"class","w-full"),m(j,"class","w-full"),m(p,"class","grid gap-4 sm:grid-cols-2 sm:gap-6"),m(h,"action","#"),m(i,"class","py-8 px-4 mx-auto max-w-2xl lg:py-16"),m(r,"class","bg-white dark:bg-gray-900"),m(ce,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),m(oe,"class","inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center float-right text-white bg-primary-600 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-700"),m(we,"class","relative overflow-x-auto"),m(ie,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),m(De,"scope","col"),m(De,"class","px-6 py-3"),m(Fe,"scope","col"),m(Fe,"class","px-6 py-3"),m(ve,"scope","col"),m(ve,"class","px-6 py-3"),m(Se,"scope","col"),m(Se,"class","px-6 py-3"),m(ze,"scope","col"),m(ze,"class","px-6 py-3"),m(S,"scope","col"),m(S,"class","px-6 py-3"),m(ae,"scope","col"),m(ae,"class","px-6 py-3"),m(le,"scope","col"),m(le,"class","px-6 py-3"),m(re,"scope","col"),m(re,"class","px-6 py-3"),m(pe,"class","text-xs text-gray-600 uppercase bg-gray-50 dark:bg-gray-600 dark:text-gray-400"),m(ue,"class","w-full text-sm text-left text-gray-500 dark:text-gray-400"),m($e,"class","inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center float-right text-white bg-primary-600 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-700"),m(ne,"class","relative overflow-x-auto"),m(nt,"class","mt-5"),m(At,"class","my-10"),m(it,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),m(st,"class","mt-5"),m(ot,"class","mt-5"),m(at,"class","mt-5"),m(s,"class","flex-auto max-w-8xl min-w-0 pt-6 lg:px-8 lg:pt-8 pb:12 xl:pb-24 lg:pb-16"),m(a,"class","flex w-full"),m(o,"class","flex-auto w-full min-w-0 lg:static lg:max-h-full lg:overflow-visible"),m(n,"class","lg:flex"),m(e,"class","w-full px-4 mx-auto max-w-8xl")},m(A,V){se(A,e,V),_(e,n),_(n,o),_(o,a),_(a,s),_(s,r),_(r,i),_(i,l),_(l,d),_(i,u),_(i,h),_(h,p),_(p,f),K(g,f,null),_(p,b),_(p,v),K(y,v,null),_(p,k),_(p,F),K(I,F,null),_(p,L),_(p,j),K(W,j,null),_(s,E),_(s,ce),_(ce,te),_(s,_e),K(ee,s,null),_(s,Ne),_(s,we),_(we,oe),_(oe,he),_(s,Oe),_(s,ne),_(ne,ie),_(ie,me),_(ne,be),_(ne,ue),_(ue,pe),_(pe,O),_(O,De),_(De,mt),_(O,Ze),_(O,Fe),_(Fe,Je),_(O,pt),_(O,ve),_(ve,_t),_(O,Qe),_(O,Se),_(Se,je),_(O,wt),_(O,ze),_(ze,bt),_(O,et),_(O,S),_(S,T),_(O,ke),_(O,ae),_(ae,xe),_(O,Pe),_(O,le),_(le,Ce),_(O,ye),_(O,re),_(re,tt),_(ue,Me),_(ue,Ee);for(let Ae=0;Ae<H.length;Ae+=1)H[Ae]&&H[Ae].m(Ee,null);_(ne,Rt),_(ne,$e),_($e,Bt),_(s,Vt),_(s,nt),K(Re,nt,null),_(s,qt),_(s,At),_(s,Lt),_(s,it),_(it,Ht),_(s,Nt),_(s,st),K(Be,st,null),_(s,Ot),_(s,ot),K(Ve,ot,null),_(s,Mt),_(s,at),K(qe,at,null),Ft=!0,$t||(nn=[ut(oe,"click",t[6]),ut($e,"click",t[5])],$t=!0)},p(A,[V]){const Ae={};!c&&V&2&&(c=!0,Ae.value=A[1].name,ge(()=>c=!1)),g.$set(Ae);const lt={};V&2&&(lt.value=A[1].size.a),V&2&&(lt.onChange=A[8]),y.$set(lt);const Dt={};!X&&V&2&&(X=!0,Dt.value=A[1].size.h,ge(()=>X=!1)),I.$set(Dt);const q={};if(!C&&V&1&&(C=!0,q.value=A[0],ge(()=>C=!1)),W.$set(q),V&4){Xe=A[2];let N;for(N=0;N<Xe.length;N+=1){const Pt=Nn(A,Xe,N);H[N]?(H[N].p(Pt,V),M(H[N],1)):(H[N]=On(Pt),H[N].c(),M(H[N],1),H[N].m(Ee,null))}for(fi(),N=Xe.length;N<H.length;N+=1)jn(N);ri()}const vt={};V&134217728&&(vt.$$scope={dirty:V,ctx:A}),Re.$set(vt);const Ue={};V&134217736&&(Ue.$$scope={dirty:V,ctx:A}),Be.$set(Ue);const zt={};V&134217744&&(zt.$$scope={dirty:V,ctx:A}),Ve.$set(zt);const xt={};V&134217728&&(xt.$$scope={dirty:V,ctx:A}),qe.$set(xt)},i(A){if(!Ft){M(g.$$.fragment,A),M(y.$$.fragment,A),M(I.$$.fragment,A),M(W.$$.fragment,A),M(ee.$$.fragment,A);for(let V=0;V<Xe.length;V+=1)M(H[V]);M(Re.$$.fragment,A),M(Be.$$.fragment,A),M(Ve.$$.fragment,A),M(qe.$$.fragment,A),Ft=!0}},o(A){$(g.$$.fragment,A),$(y.$$.fragment,A),$(I.$$.fragment,A),$(W.$$.fragment,A),$(ee.$$.fragment,A),H=H.filter(Boolean);for(let V=0;V<H.length;V+=1)$(H[V]);$(Re.$$.fragment,A),$(Be.$$.fragment,A),$(Ve.$$.fragment,A),$(qe.$$.fragment,A),Ft=!1},d(A){A&&D(e),G(g),G(y),G(I),G(W),G(ee),hi(H,A),G(Re),G(Be),G(Ve),G(qe),$t=!1,$n(nn)}}}let ct=200;function Gi(t,e,n){let o=5,a=new Ke({name:"Основная",size:new Ye({a:5e3,c:5e3,h:ct,maxLength:4900})}),s=[new Ct({blank:new Ke({name:"Д. №1",size:new Ye({a:500,c:1e3,leftDownAngle:90,rightDownAngle:0,h:ct,maxLength:a.size.maxLength})}),volume:10}),new Ct({blank:new Ke({name:"Д. №2",size:new Ye({a:700,c:1400,leftDownAngle:45,h:ct,maxLength:a.size.maxLength})}),volume:15}),new Ct({blank:new Ke({name:"Д. №2",size:new Ye({a:2e3,c:500,leftDownAngle:45,h:ct,maxLength:a.size.maxLength})}),volume:18}),new Ct({blank:new Ke({name:"Д. №2",size:new Ye({a:700,c:700,leftDownAngle:80,h:ct,maxLength:a.size.maxLength})}),volume:20})];ci(()=>{s.forEach((C,E)=>{Mi(`containerPieceCanvas${E}`,C.blank)})});const r=()=>{const C=new Ct({blank:new Ke({name:`Д. №${s.length+1}`,size:new Ye({a:0,c:0,h:ct})}),volume:0});n(2,s=[...s,C])};let i,l="",d="";const u=C=>{const E=[],ce=te=>te.volume>0&&te.blank.size.a>0&&te.blank.size.c>0;return C.forEach(te=>{te.blank.size.h=a.size.h,ce(te)&&E.push(te)}),E},h=()=>{o>=0&&a.name.length>0&&a.size.a&&a.size.c&&a.size.h?(n(2,s=u(s)),s.length?(i=Bi({stockSawing:o,rawWorkPiece:a,listOrders:s}),console.log(i),Hn("containerWorkPieceCanvas",o,a,i.drawCombinations),Hn("containerOptimumCombinationsCanvas",o,a,i.optimumDrawCombinations),n(4,d=i.listLogMessages.slice(i.listLogMessages.findLastIndex(C=>C.includes("Результаты вычисления задачи поиска решения оптимального раскроя")),i.listLogMessages.findLastIndex(C=>C.includes("Остатки: "))+1).map(C=>C.includes("===>")?`<p class='mt-2 font-bold'>${C}</p>`:`<p '>${C}</p>`).join("")),n(3,l=i.listLogMessages.map(C=>C.includes("===>")?`<p class='mt-2 font-bold'>${C}</p>`:`<p '>${C}</p>`).join(""))):alert("Внимание! Нет валидных деталей для выполнения алгоритма. Скорее всего не все поля были заполнены.")):alert("Внимание! Не корректно заполнены параметры исходной заготовки.")};ui(()=>{h()});function p(C){t.$$.not_equal(a.name,C)&&(a.name=C,n(1,a))}const f=C=>a.size.changeBothBases(C);function g(C){t.$$.not_equal(a.size.h,C)&&(a.size.h=C,n(1,a))}function c(C){o=C,n(0,o)}function b(C,E){t.$$.not_equal(E.blank.name,C)&&(E.blank.name=C,n(2,s))}function v(C,E){t.$$.not_equal(E.blank.size.a,C)&&(E.blank.size.a=C,n(2,s))}function y(C,E){t.$$.not_equal(E.blank.size.b,C)&&(E.blank.size.b=C,n(2,s))}function k(C,E){t.$$.not_equal(E.blank.size.c,C)&&(E.blank.size.c=C,n(2,s))}function F(C,E){t.$$.not_equal(E.blank.size.d,C)&&(E.blank.size.d=C,n(2,s))}function I(C,E){t.$$.not_equal(E.blank.size.leftDownAngle,C)&&(E.blank.size.leftDownAngle=C,n(2,s))}function X(C,E){t.$$.not_equal(E.blank.size.rightDownAngle,C)&&(E.blank.size.rightDownAngle=C,n(2,s))}function L(C,E){t.$$.not_equal(E.volume,C)&&(E.volume=C,n(2,s))}function j(){l=this.innerHTML,n(3,l)}function W(){d=this.innerHTML,n(4,d)}return[o,a,s,l,d,r,h,p,f,g,c,b,v,y,k,F,I,X,L,j,W]}class es extends ft{constructor(e){super(),dt(this,e,Gi,Ki,gt,{})}}export{es as component};
