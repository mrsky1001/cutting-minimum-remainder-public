var Fn=Object.defineProperty;var qn=(t,e,n)=>e in t?Fn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var L=(t,e,n)=>(qn(t,typeof e!="symbol"?e+"":e,n),n);import{S as it,i as at,s as lt,e as dn,b as oe,G as Ie,h as f,C as gn,E as xt,F as mn,k as b,l as v,W as _n,P as Vn,a2 as St,a as F,m as w,c as q,n as a,X as o,I as xn,q as Z,Z as pn,r as J,_ as bn,L as _t,u as zn,M as Sn,N as Hn,O as Rn,g as N,d as U,K as In,R as kn,w as fe,a3 as de,y as Q,z as W,A as Y,a4 as ge,B as j,f as Bn,a0 as Mn,j as On,o as Nn,T as Un,v as Gn}from"../chunks/index.d389ee78.js";import{c as kt}from"../chunks/Indicator.svelte_svelte_type_style_lang.e2c519f7.js";function Xn(t){let e,n,r,i=[t[11],{class:n=kt(t[5],t[3],t[4],t[8],t[10].class)},{src:r=t[1]},{srcset:t[2]},{alt:t[7]}],s={};for(let c=0;c<i.length;c+=1)s=xt(s,i[c]);return{c(){e=b("img"),this.h()},l(c){e=v(c,"IMG",{class:!0,src:!0,srcset:!0,alt:!0}),this.h()},h(){_n(e,s)},m(c,u){oe(c,e,u)},p(c,u){_n(e,s=Vn(i,[u&2048&&c[11],u&1336&&n!==(n=kt(c[5],c[3],c[4],c[8],c[10].class))&&{class:n},u&2&&!St(e.src,r=c[1])&&{src:r},u&4&&{srcset:c[2]},u&128&&{alt:c[7]}]))},d(c){c&&f(e)}}}function Kn(t){let e,n,r,i,s,c;return{c(){e=b("figure"),n=b("img"),s=F(),c=b("figcaption"),this.h()},l(u){e=v(u,"FIGURE",{class:!0});var l=w(e);n=v(l,"IMG",{class:!0,src:!0,srcset:!0,alt:!0}),s=q(l),c=v(l,"FIGCAPTION",{class:!0});var g=w(c);g.forEach(f),l.forEach(f),this.h()},h(){a(n,"class",r=kt(t[5],t[3],t[4],t[8],t[10].class)),St(n.src,i=t[1])||a(n,"src",i),a(n,"srcset",t[2]),a(n,"alt",t[7]),a(c,"class",t[9]),a(e,"class",t[6])},m(u,l){oe(u,e,l),o(e,n),o(e,s),o(e,c),c.innerHTML=t[0]},p(u,l){l&1336&&r!==(r=kt(u[5],u[3],u[4],u[8],u[10].class))&&a(n,"class",r),l&2&&!St(n.src,i=u[1])&&a(n,"src",i),l&4&&a(n,"srcset",u[2]),l&128&&a(n,"alt",u[7]),l&1&&(c.innerHTML=u[0]),l&512&&a(c,"class",u[9]),l&64&&a(e,"class",u[6])},d(u){u&&f(e)}}}function Zn(t){let e;function n(s,c){return s[0]?Kn:Xn}let r=n(t),i=r(t);return{c(){i.c(),e=dn()},l(s){i.l(s),e=dn()},m(s,c){i.m(s,c),oe(s,e,c)},p(s,[c]){r===(r=n(s))&&i?i.p(s,c):(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},i:Ie,o:Ie,d(s){i.d(s),s&&f(e)}}}function Jn(t,e,n){const r=["caption","src","srcset","size","alignment","imgClass","figClass","alt","effect","captionClass"];let i=gn(e,r),{caption:s=void 0}=e,{src:c=void 0}=e,{srcset:u=void 0}=e,{size:l="max-w-full"}=e,{alignment:g=""}=e,{imgClass:D="h-auto"}=e,{figClass:m="max-w-lg"}=e,{alt:p=""}=e,{effect:S=""}=e,{captionClass:C="mt-2 text-sm text-center text-gray-500 dark:text-gray-400"}=e;return t.$$set=h=>{n(10,e=xt(xt({},e),mn(h))),n(11,i=gn(e,r)),"caption"in h&&n(0,s=h.caption),"src"in h&&n(1,c=h.src),"srcset"in h&&n(2,u=h.srcset),"size"in h&&n(3,l=h.size),"alignment"in h&&n(4,g=h.alignment),"imgClass"in h&&n(5,D=h.imgClass),"figClass"in h&&n(6,m=h.figClass),"alt"in h&&n(7,p=h.alt),"effect"in h&&n(8,S=h.effect),"captionClass"in h&&n(9,C=h.captionClass)},e=mn(e),[s,c,u,l,g,D,m,p,S,C,e,i]}class Qn extends it{constructor(e){super(),at(this,e,Jn,Zn,lt,{caption:0,src:1,srcset:2,size:3,alignment:4,imgClass:5,figClass:6,alt:7,effect:8,captionClass:9})}}class Re{constructor(e){L(this,"_a",0);L(this,"_b",0);L(this,"_c",0);L(this,"_d",0);L(this,"_h",0);L(this,"_leftDownAngle",0);L(this,"_leftDownAngleRad",0);L(this,"_rightDownAngle",0);L(this,"_rightDownAngleRad",0);L(this,"minLength");L(this,"maxLength");L(this,"minAngle");L(this,"maxAngle");L(this,"_fractionDigits",3);this._a=e.a,this._b=e.b??this._b,this._c=e.c,this._d=e.d??this._d,this._h=e.h,this._leftDownAngle=e.leftDownAngle??this._leftDownAngle,this._rightDownAngle=e.rightDownAngle??this._rightDownAngle,this.minLength=e.minLength??10,this.maxLength=e.maxLength??10,this.minAngle=e.minAngle??10,this.maxAngle=e.maxAngle??162,this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this._rightDownAngleRad=this._toRadians(this._rightDownAngle),this.recalculation()}changeBothBases(e){this.a=e,this.c=e}_toRadians(e){return parseFloat((e*(Math.PI/180)).toFixed(3))}_toDegree(e){return parseFloat((e*180/Math.PI).toFixed(3))}recalculation(){this._h&&(this._leftDownAngleRad&&(this.d=this._h/Math.sin(this._leftDownAngleRad)),this._a&&this._c&&(this._rightDownAngleRad=Math.abs(Math.atan(this._h/this.differenceBases)),this._rightDownAngle=this.differenceBases>0?180-this._toDegree(this._rightDownAngleRad):this._toDegree(this._rightDownAngleRad)),this._rightDownAngleRad&&(this.b=this._h/Math.sin(this._rightDownAngleRad)))}get differenceBases(){const e=this._a,n=this._c,r=this._leftDownAngle>=90?this.segmentLeftUp:-1*this.segmentLeftUp;return e-r-n}get segmentLeftUp(){const e=Math.abs(this._leftDownAngle-90);return Math.sqrt(this._h*this._h+this._d*this._d-2*this._h*this._d*Math.cos(this._toRadians(e)))}get isRect(){return this.a===this.c&&this.leftDownAngle===90&&this.rightDownAngle===90}get a(){return this._a}set a(e){this._a=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get b(){return this._b}set b(e){this._b=parseFloat(Number(e).toFixed(this._fractionDigits))}get c(){return this._c}set c(e){this._c=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get d(){return this._d}set d(e){this._d=parseFloat(Number(e).toFixed(this._fractionDigits))}get h(){return this._h}set h(e){this._h=parseFloat(Number(e).toFixed(this._fractionDigits))}get leftDownAngle(){return this._leftDownAngle}set leftDownAngle(e){this._leftDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this.recalculation()}get rightDownAngle(){return this._rightDownAngle}set rightDownAngle(e){this._rightDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._rightDownAngleRad=this._toRadians(this._rightDownAngle)}}class Xe{constructor(e){L(this,"name");L(this,"size");L(this,"_isHorizontalFlipped",!1);L(this,"_isVerticalFlipped",!1);this.name=e.name,this.size=new Re(e.size)}get isRect(){return this.size.isRect}get square(){return this.size.h*((this.size.a+this.size.c)/2)}get isHorizontalFlipped(){return this._isHorizontalFlipped}get isVerticalFlipped(){return this._isVerticalFlipped}flipHorizontal(){const e=new Re(this.size);this.size.leftDownAngle=180-e.rightDownAngle,this.size.rightDownAngle=180-e.leftDownAngle,this.size.a=e.c,this.size.c=e.a,this.size.b=e.d,this.size.d=e.b,this._isHorizontalFlipped=!0}flipVertical(){const e=new Re(this.size);this.size.leftDownAngle=180-e.leftDownAngle,this.size.rightDownAngle=180-e.rightDownAngle,this.size.a=e.c,this.size.c=e.a,this._isVerticalFlipped=!0}}function Wn(t){let e,n,r,i,s,c,u,l,g,D,m,p,S,C,h,G,E;const y=t[5].default,V=xn(y,t,t[4],null);return{c(){e=b("div"),n=b("h2"),r=b("button"),i=b("span"),s=Z(t[1]),c=F(),u=pn("svg"),l=pn("path"),D=F(),m=b("div"),p=b("div"),V&&V.c(),this.h()},l(P){e=v(P,"DIV",{id:!0,"data-accordion":!0});var x=w(e);n=v(x,"H2",{id:!0});var $=w(n);r=v($,"BUTTON",{type:!0,class:!0,"data-accordion-target":!0,"aria-expanded":!0,"aria-controls":!0});var O=w(r);i=v(O,"SPAN",{});var d=w(i);s=J(d,t[1]),d.forEach(f),c=q(O),u=bn(O,"svg",{"data-accordion-icon":!0,class:!0,"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0});var _=w(u);l=bn(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),w(l).forEach(f),_.forEach(f),O.forEach(f),$.forEach(f),D=q(x),m=v(x,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var H=w(m);p=v(H,"DIV",{class:!0});var T=w(p);V&&V.l(T),T.forEach(f),H.forEach(f),x.forEach(f),this.h()},h(){a(l,"stroke","currentColor"),a(l,"stroke-linecap","round"),a(l,"stroke-linejoin","round"),a(l,"stroke-width","2"),a(l,"d","M9 5 5 1 1 5"),a(u,"data-accordion-icon",""),a(u,"class",g="w-3 h-3 "+(t[0]?"rotate-180":"")+" shrink-0"),a(u,"aria-hidden","true"),a(u,"xmlns","http://www.w3.org/2000/svg"),a(u,"fill","none"),a(u,"viewBox","0 0 10 6"),a(r,"type","button"),a(r,"class",t[2]),a(r,"data-accordion-target","#accordion-collapse-body-1"),a(r,"aria-expanded","true"),a(r,"aria-controls","accordion-collapse-body-1"),a(n,"id","accordion-collapse-heading-1"),a(p,"class","p-5 border border-gray-200 dark:border-gray-700 dark:bg-gray-900"),a(m,"id","accordion-collapse-body-1"),a(m,"class",S=t[0]?"":"hidden"),a(m,"aria-labelledby","accordion-collapse-heading-1"),a(e,"id","accordion-collapse"),a(e,"data-accordion",C=t[0]?"open":"collapse")},m(P,x){oe(P,e,x),o(e,n),o(n,r),o(r,i),o(i,s),o(r,c),o(r,u),o(u,l),o(e,D),o(e,m),o(m,p),V&&V.m(p,null),h=!0,G||(E=_t(r,"click",t[6]),G=!0)},p(P,[x]){(!h||x&2)&&zn(s,P[1]),(!h||x&1&&g!==(g="w-3 h-3 "+(P[0]?"rotate-180":"")+" shrink-0"))&&a(u,"class",g),(!h||x&4)&&a(r,"class",P[2]),V&&V.p&&(!h||x&16)&&Sn(V,y,P,P[4],h?Rn(y,P[4],x,null):Hn(P[4]),null),(!h||x&1&&S!==(S=P[0]?"":"hidden"))&&a(m,"class",S),(!h||x&1&&C!==(C=P[0]?"open":"collapse"))&&a(e,"data-accordion",C)},i(P){h||(N(V,P),h=!0)},o(P){U(V,P),h=!1},d(P){P&&f(e),V&&V.d(P),G=!1,E()}}}function Yn(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:s=""}=e,{isOpen:c=!1}=e;const u=()=>n(0,c=!c);let l="flex items-center justify-between w-full p-5 font-medium text-left border border-gray-200 rounded-xl focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800";const g=()=>u();return t.$$set=D=>{"title"in D&&n(1,s=D.title),"isOpen"in D&&n(0,c=D.isOpen),"$$scope"in D&&n(4,i=D.$$scope)},t.$$.update=()=>{if(t.$$.dirty&5){const D="rounded-xl",m="rounded-t-xl",p=" bg-gray-100";c?(n(2,l=l.replace(D,m)),n(2,l+=p)):(n(2,l=l.replace(m,D)),n(2,l=l.replace(p,"")))}},[c,s,l,u,i,r,g]}class Vt extends it{constructor(e){super(),at(this,e,Yn,Wn,lt,{title:1,isOpen:0})}}class wt{constructor(e){L(this,"blank");L(this,"_volume");L(this,"minVolume");L(this,"maxVolume");this.blank=new Xe(e.blank),this._volume=e.volume,this.minVolume=e.minVolume??1,this.maxVolume=e.maxVolume??100}get volume(){return this._volume}set volume(e){this._volume=Number(e)}}const jn="_app/immutable/assets/workPiece.ba374e36.png";function $n(t){let e,n,r;return{c(){e=b("input"),this.h()},l(i){e=v(i,"INPUT",{id:!0,type:!0,name:!0,placeholder:!0,class:!0}),this.h()},h(){a(e,"id",t[1]),a(e,"type","text"),a(e,"name",t[1]),e.disabled=t[3],e.required=t[4],a(e,"placeholder",t[2]),e.value=t[0],a(e,"class",t[5])},m(i,s){oe(i,e,s),n||(r=[In(t[6].call(null,e)),_t(e,"change",t[11])],n=!0)},p(i,[s]){s&2&&a(e,"id",i[1]),s&2&&a(e,"name",i[1]),s&8&&(e.disabled=i[3]),s&16&&(e.required=i[4]),s&4&&a(e,"placeholder",i[2]),s&1&&e.value!==i[0]&&(e.value=i[0]),s&32&&a(e,"class",i[5])},i:Ie,o:Ie,d(i){i&&f(e),n=!1,kn(r)}}}function es(t,e,n){let{id:r=""}=e,{placeholder:i=""}=e,{type:s="text"}=e,{disabled:c=!1}=e,{numSettings:u}=e,{required:l=!1}=e,{value:g}=e,{onChange:D=void 0}=e;const m=h=>{h.type=s};let p=`border border-gray-300 text-gray-900 text-sm rounded-lg focus:bg-[white] focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700
                                                         dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500`;c&&(p+=" bg-gray-100");const S=(h,G)=>{let E=s==="number"?Number(G):G;const y=" text-red-800 border border-red-300";(P=>!(u&&(u.min&&P<u.min||u.max&&P>u.max)))(E)?n(0,g=E):p.includes(y)||(n(5,p+=y),setTimeout(()=>{n(5,p=p.replace(y,""))},1e3)),h.value=g},C=h=>S(h.target,h.target.value);return t.$$set=h=>{"id"in h&&n(1,r=h.id),"placeholder"in h&&n(2,i=h.placeholder),"type"in h&&n(8,s=h.type),"disabled"in h&&n(3,c=h.disabled),"numSettings"in h&&n(9,u=h.numSettings),"required"in h&&n(4,l=h.required),"value"in h&&n(0,g=h.value),"onChange"in h&&n(10,D=h.onChange)},[g,r,i,c,l,p,m,S,s,u,D,C]}class Ve extends it{constructor(e){super(),at(this,e,es,$n,lt,{id:1,placeholder:2,type:8,disabled:3,numSettings:9,required:4,value:0,onChange:10})}}function ts(t,e,n){const r=[],i=[],s=e.map(l=>l.blank.square+n),c=Math.min(...s),u=(l,g,D,m)=>{for(let p=l;p<g.length;p++){const S=g[p].blank.square+n,C=D-S;m.push(g[p].blank),C>=c?u(p,g,C,m):C<c&&C>=0&&r.push([...m]),m.pop()}};return u(0,e,t,i),r}function yn(t,e=3){return parseFloat((t*1e-6).toFixed(e))}function ns(t,e){const s=[`Площадь не обрезанной заготовки: (${t.size.a} * ${t.size.h}) = ${parseFloat(t.square.toFixed(3))} мм² = ${yn(t.square,3)} м²`,"Имя | Площадь мм²| Объем"];return e.forEach(c=>{const u=`${c.blank.name} | ${parseFloat(c.blank.square.toFixed(3))} | ${c.volume}`;s.push(u)}),s}const ss=t=>{const e=t.stockSawing*2*t.rawWorkPiece.size.h,n=[];n.push(`
===> Этап 0. Подготовка данных и коэффициентов `),n.push(`Припуск распила: ${t.stockSawing}`),n.push(`Площадь припуска распила: ${e} мм² = ${yn(e)} м²`),n.push(`
Таблица заготовок и их параметров`),n.push(...ns(t.rawWorkPiece,t.listOrders));const r=ts(t.rawWorkPiece.square,t.listOrders,e);return n.push(`
===> Этап 0. Шаг 1. Варианты раскроя изделия исходя из начальных условий.`),n.push(`Количество комбинаций: ${r.length}`),console.log(n),console.log(r),{listLogMessages:n,cuttingCombinations:r}};function is(t){let e,n;return{c(){e=b("label"),n=Z(t[1]),this.h()},l(r){e=v(r,"LABEL",{for:!0,class:!0});var i=w(e);n=J(i,t[1]),i.forEach(f),this.h()},h(){a(e,"for",t[0]),a(e,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white")},m(r,i){oe(r,e,i),o(e,n)},p(r,[i]){i&2&&zn(n,r[1]),i&1&&a(e,"for",r[0])},i:Ie,o:Ie,d(r){r&&f(e)}}}function as(t,e,n){let{forName:r}=e,{text:i}=e;return t.$$set=s=>{"forName"in s&&n(0,r=s.forName),"text"in s&&n(1,i=s.text)},[r,i]}class ls extends it{constructor(e){super(),at(this,e,as,is,lt,{forName:0,text:1})}}function rs(t){let e,n,r,i,s;e=new ls({props:{forName:t[1],text:t[6]}});function c(l){t[7](l)}let u={id:t[1],type:t[3],placeholder:t[2],required:t[4],onChange:t[5]};return t[0]!==void 0&&(u.value=t[0]),r=new Ve({props:u}),fe.push(()=>de(r,"value",c)),{c(){Q(e.$$.fragment),n=F(),Q(r.$$.fragment)},l(l){W(e.$$.fragment,l),n=q(l),W(r.$$.fragment,l)},m(l,g){Y(e,l,g),oe(l,n,g),Y(r,l,g),s=!0},p(l,[g]){const D={};g&2&&(D.forName=l[1]),g&64&&(D.text=l[6]),e.$set(D);const m={};g&2&&(m.id=l[1]),g&8&&(m.type=l[3]),g&4&&(m.placeholder=l[2]),g&16&&(m.required=l[4]),g&32&&(m.onChange=l[5]),!i&&g&1&&(i=!0,m.value=l[0],ge(()=>i=!1)),r.$set(m)},i(l){s||(N(e.$$.fragment,l),N(r.$$.fragment,l),s=!0)},o(l){U(e.$$.fragment,l),U(r.$$.fragment,l),s=!1},d(l){j(e,l),l&&f(n),j(r,l)}}}function os(t,e,n){let{id:r=""}=e,{placeholder:i=""}=e,{type:s="text"}=e,{required:c=!1}=e,{value:u}=e,{onChange:l=void 0}=e,{label:g=""}=e;function D(m){u=m,n(0,u)}return t.$$set=m=>{"id"in m&&n(1,r=m.id),"placeholder"in m&&n(2,i=m.placeholder),"type"in m&&n(3,s=m.type),"required"in m&&n(4,c=m.required),"value"in m&&n(0,u=m.value),"onChange"in m&&n(5,l=m.onChange),"label"in m&&n(6,g=m.label)},[u,r,i,s,c,l,g,D]}class zt extends it{constructor(e){super(),at(this,e,os,rs,lt,{id:1,placeholder:2,type:3,required:4,value:0,onChange:5,label:6})}}class Rt{constructor(e){L(this,"_name");L(this,"_square");L(this,"_p1");L(this,"_p2");L(this,"_p3");L(this,"_p4");L(this,"_wP1P2");L(this,"_wP2P3");L(this,"_wP3P4");L(this,"_wP4P1");L(this,"_h");L(this,"_colorBody");L(this,"_colorContour");L(this,"_colorTextLegend");L(this,"_colorContourLegend");L(this,"isHorizontalFlipped");L(this,"isVerticalFlipped");this._name=e.name,this._square=e.square,this._p1={x:e.p1.x,y:e.p1.y},this._p2={x:e.p2.x,y:e.p2.y},this._p3={x:e.p3.x,y:e.p3.y},this._p4={x:e.p4.x,y:e.p4.y},this._wP1P2=e.wP1P2,this._wP2P3=e.wP2P3,this._wP3P4=e.wP3P4,this._wP4P1=e.wP4P1,this._h=e.h,this.isHorizontalFlipped=e.isHorizontalFlipped??!1,this.isVerticalFlipped=e.isVerticalFlipped??!1,this._colorBody=e.colorBody??"#d1ffd8",this._colorContour=e.colorContour??"#B70A02",this._colorTextLegend=e.colorTextLegend??"black",this._colorContourLegend=e.colorContourLegend??"gray"}get colorTextLegend(){return this._colorTextLegend}get colorContourLegend(){return this._colorContourLegend}get colorBody(){return this._colorBody}get name(){return this._name}get square(){return this._square}get p1(){return this._p1}get p2(){return this._p2}get p3(){return this._p3}get p4(){return this._p4}get wP1P2(){return this._wP1P2}get wP2P3(){return this._wP2P3}get wP3P4(){return this._wP3P4}get wP4P1(){return this._wP4P1}get h(){return this._h}get colorContour(){return this._colorContourLegend}}function us(t,e=3){return parseFloat((t*1e-6).toFixed(e))}const Dn=(t,e,n,r,i)=>{const s=i>0?1:-1;return{x:t-s*Math.sqrt(Math.abs(r*r-(e-n)*(e-n))),y:n}},cs=(t,e,n,r=!1)=>{const i=[];return n.forEach((s,c)=>{const u={num:s.num,volume:s.volume,combination:[]};let l,g;s.cuttingCombination.forEach((D,m)=>{const p=new Xe(D);m%2!==0&&g&&g.size.rightDownAngle<90&&(p.size.leftDownAngle<90?p.flipVertical():p.size.rightDownAngle<90&&p.flipHorizontal()),console.log(g,l);const C=(h=>{const E={x:l?l.p2.x:0,y:0},y={x:E.x+p.size.a,y:0},V={x:y.x,y:p.size.h},P=p.isRect?V:Dn(y.x,y.y,V.y,p.size.b,p.size.differenceBases),x={x:P.x-p.size.c,y:P.y};return new Rt({name:p.name,square:p.square,p1:E,p2:y,p3:P,p4:x,wP1P2:p.size.a,wP2P3:p.size.b,wP3P4:p.size.c,wP4P1:p.size.d,h:p.size.h,isHorizontalFlipped:h.isHorizontalFlipped,isVerticalFlipped:h.isVerticalFlipped,colorContourLegend:"gray",colorBody:"#d1ffd8"})})(p);C&&u.combination.push(C),l=C,g=p}),i.push(u)}),i},Ht=(t,e,n=1,r=!0,i=250,s=50,c=2,u=2)=>{const l=E=>E/c+i,g=E=>E/u+s,D=(E,y)=>{y.setLineDash([5,3]),y.textBaseline="bottom",y.lineDashOffset=1,y.strokeStyle=E.colorContourLegend,y.fillStyle=E.colorTextLegend,y.beginPath();const V=(d,_,H,T=0,ee=0)=>{y.setLineDash([5,3]),y.beginPath(),y.moveTo(l(d.x),g(d.y)),y.lineTo(l(d.x)+T,g(d.y)+ee),y.lineTo(l(_.x)+T,g(_.y)+ee),y.lineTo(l(_.x),g(_.y)),y.stroke(),y.closePath()},P=(d,_,H,T=-20)=>{T*=n,V(d,_,H,0,T);const ee=T>0?T*2:T*1.5,ue={x:(l(_.x)+l(d.x))/2,y:(g(_.y)+g(d.y))/2+ee};y.fillText(` ${H} мм`,ue.x,ue.y)},x=(d,_,H,T=30)=>{V(d,_,H,T);const ee=T>0?T*3:T*4,ue={x:(l(_.x)+l(d.x))/2+ee,y:(g(_.y)+g(d.y))/2};y.fillText(` ${H} мм`,ue.x,ue.y)},$=(d,_,H)=>{P(d,_,H,20)},O=(d,_,H)=>{x(d,_,H,-30)};P(E.p1,E.p2,E.wP1P2),$(E.p3,E.p4,E.wP3P4),r&&(x(E.p2,E.p3,E.wP2P3),O(E.p4,E.p1,E.wP4P1))};e.strokeStyle=t.colorContour,e.fillStyle=t.colorBody,e.beginPath(),e.setLineDash([]),e.moveTo(l(t.p1.x),g(t.p1.y)),e.lineTo(l(t.p1.x),g(t.p1.y)),e.lineTo(l(t.p2.x),g(t.p2.y)),e.lineTo(l(t.p3.x),g(t.p3.y)),e.lineTo(l(t.p4.x),g(t.p4.y)),e.lineTo(l(t.p1.x),g(t.p1.y)),e.stroke(),e.fill(),e.fillStyle=t.colorTextLegend;const m=t.isHorizontalFlipped?"( ⇆ )":"",p=t.isVerticalFlipped?"( ⇅ )":"",S=` S=${us(t.square)} м² ${m} ${p}`,C=(l(t.p2.x)+l(t.p1.x))/2-S.length*2,h=(l(t.p3.x)+l(t.p4.x))/2,G={x:2*C*h/(C+h),y:g(t.h)/2+s/2};e.fillText(S,G.x,G.y),e.closePath(),D(t,e)},hs=(t,e,n)=>{},Pn=t=>{for(;t!=null&&t.firstChild&&t.lastChild;)t.removeChild(t.lastChild)},fs=t=>new Rt({name:"rawPiece",square:t.square,p1:{x:0,y:0},p2:{x:t.size.a,y:0},p3:{x:t.size.a,y:t.size.h},p4:{x:0,y:t.size.h},wP1P2:t.size.a,wP2P3:t.size.b,wP3P4:t.size.c,wP4P1:t.size.d,h:t.size.h,colorBody:"lightgray"}),An=(t,e=1200,n=300)=>{const r=t.appendChild(document.createElement("div"));r.className="flex flex-row justify-around items-center";const i=r.appendChild(document.createElement("canvas")),s=i.getContext("2d");return i.width=e,i.height=n,s};function ds(t,e,n,r){const i=document.getElementById(t);i&&(Pn(i),cs(e,n,r).forEach(s=>{hs(s.num);const c=An(i);Ht(fs(n),c,2.5,!1,0,100,4.2,4),s.combination.forEach(u=>{console.log(u),Ht(u,c,1,!1,0,100,4.2,4)})}))}function gs(t,e){const n=document.getElementById(t);if(n){Pn(n);const r=An(n,1e3,200),i={x:0,y:0},s={x:i.x+e.size.a,y:0},c={x:s.x,y:e.size.h},u=e.isRect?c:Dn(s.x,s.y,c.y,e.size.b,e.size.differenceBases),l={x:u.x-e.size.c,y:u.y},g=new Rt({name:e.name,square:e.square,p1:i,p2:s,p3:u,p4:l,wP1P2:e.size.a,wP2P3:e.size.b,wP3P4:e.size.c,wP4P1:e.size.d,h:e.size.h,isHorizontalFlipped:e.isHorizontalFlipped,isVerticalFlipped:e.isVerticalFlipped});Ht(g,r)}}function vn(t,e,n){const r=t.slice();return r[22]=e[n],r[23]=e,r[24]=n,r}function wn(t){let e,n,r=t[24]+1+"",i,s,c,u,l,g,D,m,p,S,C,h,G,E,y,V,P,x,$,O,d,_,H,T,ee,ue,be,te,Be,ve,ie,ce,Me,ne,se,me,we,he,_e;function B(z){t[10](z,t[22])}let ze={type:"text",id:"namePiece",placeholder:"Наименования детали..."};t[22].blank.name!==void 0&&(ze.value=t[22].blank.name),u=new Ve({props:ze}),fe.push(()=>de(u,"value",B));function rt(z){t[11](z,t[22])}let Ke={type:"number",numSettings:{min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength},id:"lengthAPiece",placeholder:"Длина верхнего основания детали..."};t[22].blank.size.a!==void 0&&(Ke.value=t[22].blank.size.a),m=new Ve({props:Ke}),fe.push(()=>de(m,"value",rt));function Te(z){t[12](z,t[22])}let Ze={id:"lengthBPiece",type:"number",numSettings:{min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength},disabled:!0,placeholder:"Длина правой стороны детали..."};t[22].blank.size.b!==void 0&&(Ze.value=t[22].blank.size.b),h=new Ve({props:Ze}),fe.push(()=>de(h,"value",Te));function ot(z){t[13](z,t[22])}let ke={id:"lengthCPiece",type:"number",numSettings:{min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength},placeholder:"Длина нижнего основания детали..."};t[22].blank.size.c!==void 0&&(ke.value=t[22].blank.size.c),V=new Ve({props:ke}),fe.push(()=>de(V,"value",ot));function ut(z){t[14](z,t[22])}let Je={id:"lengthDPiece",type:"number",disabled:!0,numSettings:{min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength},placeholder:"Длина левой стороны детали..."};t[22].blank.size.d!==void 0&&(Je.value=t[22].blank.size.d),O=new Ve({props:Je}),fe.push(()=>de(O,"value",ut));function Le(z){t[15](z,t[22])}let Qe={id:"leftDownAngle",type:"number",numSettings:{min:t[22].blank.size.minAngle,max:t[22].blank.size.maxAngle},placeholder:"Левый угол при нижнем основании детали..."};t[22].blank.size.leftDownAngle!==void 0&&(Qe.value=t[22].blank.size.leftDownAngle),T=new Ve({props:Qe}),fe.push(()=>de(T,"value",Le));function ct(z){t[16](z,t[22])}let ye={id:"rightDownAngle",type:"number",disabled:!0,numSettings:{min:t[22].blank.size.minAngle,max:t[22].blank.size.maxAngle},placeholder:"Правый угол при нижнем основании детали..."};t[22].blank.size.rightDownAngle!==void 0&&(ye.value=t[22].blank.size.rightDownAngle),te=new Ve({props:ye}),fe.push(()=>de(te,"value",ct));function ht(z){t[17](z,t[22])}let We={id:"volumePiece",type:"number",numSettings:{min:t[22].minVolume,max:t[22].maxVolume},placeholder:"Количество деталей данного типа..."};return t[22].volume!==void 0&&(We.value=t[22].volume),ce=new Ve({props:We}),fe.push(()=>de(ce,"value",ht)),{c(){e=b("tr"),n=b("th"),i=Z(r),s=F(),c=b("td"),Q(u.$$.fragment),g=F(),D=b("td"),Q(m.$$.fragment),S=F(),C=b("td"),Q(h.$$.fragment),E=F(),y=b("td"),Q(V.$$.fragment),x=F(),$=b("td"),Q(O.$$.fragment),_=F(),H=b("td"),Q(T.$$.fragment),ue=F(),be=b("td"),Q(te.$$.fragment),ve=F(),ie=b("td"),Q(ce.$$.fragment),ne=F(),se=b("tr"),me=b("td"),we=b("div"),he=F(),this.h()},l(z){e=v(z,"TR",{class:!0});var A=w(e);n=v(A,"TH",{scope:!0,class:!0});var Fe=w(n);i=J(Fe,r),Fe.forEach(f),s=q(A),c=v(A,"TD",{class:!0});var ae=w(c);W(u.$$.fragment,ae),ae.forEach(f),g=q(A),D=v(A,"TD",{class:!0});var De=w(D);W(m.$$.fragment,De),De.forEach(f),S=q(A),C=v(A,"TD",{class:!0});var Pe=w(C);W(h.$$.fragment,Pe),Pe.forEach(f),E=q(A),y=v(A,"TD",{class:!0});var le=w(y);W(V.$$.fragment,le),le.forEach(f),x=q(A),$=v(A,"TD",{class:!0});var Ae=w($);W(O.$$.fragment,Ae),Ae.forEach(f),_=q(A),H=v(A,"TD",{class:!0});var Ce=w(H);W(T.$$.fragment,Ce),Ce.forEach(f),ue=q(A),be=v(A,"TD",{class:!0});var re=w(be);W(te.$$.fragment,re),re.forEach(f),ve=q(A),ie=v(A,"TD",{class:!0});var Ye=w(ie);W(ce.$$.fragment,Ye),Ye.forEach(f),A.forEach(f),ne=q(z),se=v(z,"TR",{class:!0});var Oe=w(se);me=v(Oe,"TD",{class:!0,colspan:!0});var qe=w(me);we=v(qe,"DIV",{id:!0,class:!0}),w(we).forEach(f),qe.forEach(f),he=q(Oe),Oe.forEach(f),this.h()},h(){a(n,"scope","row"),a(n,"class","px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"),a(c,"class","min-w-[150px] pr-6 py-4 border-r"),a(D,"class","px-6 py-4"),a(C,"class","px-6 py-4"),a(y,"class","px-6 py-4"),a($,"class","px-6 py-4"),a(H,"class","px-6 py-4"),a(be,"class","px-6 py-4"),a(ie,"class","w-[20px] border-l px-6 py-4"),a(e,"class","bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-[gray]/5 dark:hover:bg-gray-600"),a(we,"id","containerPieceCanvas"+t[24]),a(we,"class","flex flex-col"),a(me,"class","px-6 py-4"),a(me,"colspan","200"),a(se,"class","bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-[gray]/5 dark:hover:bg-gray-600")},m(z,A){oe(z,e,A),o(e,n),o(n,i),o(e,s),o(e,c),Y(u,c,null),o(e,g),o(e,D),Y(m,D,null),o(e,S),o(e,C),Y(h,C,null),o(e,E),o(e,y),Y(V,y,null),o(e,x),o(e,$),Y(O,$,null),o(e,_),o(e,H),Y(T,H,null),o(e,ue),o(e,be),Y(te,be,null),o(e,ve),o(e,ie),Y(ce,ie,null),oe(z,ne,A),oe(z,se,A),o(se,me),o(me,we),o(se,he),_e=!0},p(z,A){t=z;const Fe={};!l&&A&4&&(l=!0,Fe.value=t[22].blank.name,ge(()=>l=!1)),u.$set(Fe);const ae={};A&4&&(ae.numSettings={min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength}),!p&&A&4&&(p=!0,ae.value=t[22].blank.size.a,ge(()=>p=!1)),m.$set(ae);const De={};A&4&&(De.numSettings={min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength}),!G&&A&4&&(G=!0,De.value=t[22].blank.size.b,ge(()=>G=!1)),h.$set(De);const Pe={};A&4&&(Pe.numSettings={min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength}),!P&&A&4&&(P=!0,Pe.value=t[22].blank.size.c,ge(()=>P=!1)),V.$set(Pe);const le={};A&4&&(le.numSettings={min:t[22].blank.size.minLength,max:t[22].blank.size.maxLength}),!d&&A&4&&(d=!0,le.value=t[22].blank.size.d,ge(()=>d=!1)),O.$set(le);const Ae={};A&4&&(Ae.numSettings={min:t[22].blank.size.minAngle,max:t[22].blank.size.maxAngle}),!ee&&A&4&&(ee=!0,Ae.value=t[22].blank.size.leftDownAngle,ge(()=>ee=!1)),T.$set(Ae);const Ce={};A&4&&(Ce.numSettings={min:t[22].blank.size.minAngle,max:t[22].blank.size.maxAngle}),!Be&&A&4&&(Be=!0,Ce.value=t[22].blank.size.rightDownAngle,ge(()=>Be=!1)),te.$set(Ce);const re={};A&4&&(re.numSettings={min:t[22].minVolume,max:t[22].maxVolume}),!Me&&A&4&&(Me=!0,re.value=t[22].volume,ge(()=>Me=!1)),ce.$set(re)},i(z){_e||(N(u.$$.fragment,z),N(m.$$.fragment,z),N(h.$$.fragment,z),N(V.$$.fragment,z),N(O.$$.fragment,z),N(T.$$.fragment,z),N(te.$$.fragment,z),N(ce.$$.fragment,z),_e=!0)},o(z){U(u.$$.fragment,z),U(m.$$.fragment,z),U(h.$$.fragment,z),U(V.$$.fragment,z),U(O.$$.fragment,z),U(T.$$.fragment,z),U(te.$$.fragment,z),U(ce.$$.fragment,z),_e=!1},d(z){z&&f(e),j(u),j(m),j(h),j(V),j(O),j(T),j(te),j(ce),z&&f(ne),z&&f(se)}}}function ms(t){let e;return{c(){e=b("div"),this.h()},l(n){e=v(n,"DIV",{id:!0,class:!0}),w(e).forEach(f),this.h()},h(){a(e,"id","containerWorkPieceCanvas"),a(e,"class","flex flex-col")},m(n,r){oe(n,e,r)},p:Ie,d(n){n&&f(e)}}}function _s(t){let e,n,r;return{c(){e=b("div"),this.h()},l(i){e=v(i,"DIV",{id:!0,contenteditable:!0}),w(e).forEach(f),this.h()},h(){a(e,"id","log"),a(e,"contenteditable","true"),t[3]===void 0&&Un(()=>t[18].call(e))},m(i,s){oe(i,e,s),t[3]!==void 0&&(e.innerHTML=t[3]),n||(r=_t(e,"input",t[18]),n=!0)},p(i,s){s&8&&i[3]!==e.innerHTML&&(e.innerHTML=i[3])},d(i){i&&f(e),n=!1,r()}}}function ps(t){let e;return{c(){e=b("div"),this.h()},l(n){e=v(n,"DIV",{id:!0,class:!0}),w(e).forEach(f),this.h()},h(){a(e,"id","containerOptimumCombinationsCanvas"),a(e,"class","flex flex-col")},m(n,r){oe(n,e,r)},p:Ie,d(n){n&&f(e)}}}function bs(t){let e,n,r,i,s,c,u,l,g,D,m,p,S,C,h,G,E,y,V,P,x,$,O,d,_,H,T,ee,ue,be,te,Be,ve,ie,ce,Me,ne,se,me,we,he,_e,B,ze,rt,Ke,Te,Ze,ot,ke,ut,Je,Le,Qe,ct,ye,ht,We,z,A,Fe,ae,De,Pe,le,Ae,Ce,re,Ye,Oe,qe,yt,Ne,Dt,Pt,je,xe,At,pt,Ct,$e,Et,Tt,et,Se,Lt,tt,He,bt,Ft,It;function Cn(k){t[6](k)}let Bt={label:"Имя",id:"nameWorkPiece",type:"text",placeholder:"Имя исходной заготовки...",required:!0};t[1].name!==void 0&&(Bt.value=t[1].name),C=new zt({props:Bt}),fe.push(()=>de(C,"value",Cn)),y=new zt({props:{label:"Длина, мм.",id:"lengthRawPiece",type:"number",placeholder:"Длина исходной заготовки(в миллиметрах)...",value:t[1].size.a,onChange:t[7],required:!0}});function En(k){t[8](k)}let Mt={label:"Ширина (h), мм.",id:"widthRawPiece",type:"number",placeholder:"Ширина исходной заготовки (в миллиметрах)...",required:!0};t[1].size.h!==void 0&&(Mt.value=t[1].size.h),x=new zt({props:Mt}),fe.push(()=>de(x,"value",En));function Tn(k){t[9](k)}let Ot={label:"Припуск, мм.",id:"stockSawing",type:"number",placeholder:"Припуск при распиле (в миллиметрах)...",required:!0};t[0]!==void 0&&(Ot.value=t[0]),_=new zt({props:Ot}),fe.push(()=>de(_,"value",Tn)),te=new Qn({props:{src:jn,class:"max-h-72 m-auto"}});let Ue=t[2],I=[];for(let k=0;k<Ue.length;k+=1)I[k]=wn(vn(t,Ue,k));const Ln=k=>U(I[k],1,1,()=>{I[k]=null});return xe=new Vt({props:{title:"Варианты раскроя",isOpen:!0,$$slots:{default:[ms]},$$scope:{ctx:t}}}),Se=new Vt({props:{title:"Результаты вычислений",$$slots:{default:[_s]},$$scope:{ctx:t}}}),He=new Vt({props:{title:"Оптимальные варианты раскроя",$$slots:{default:[ps]},$$scope:{ctx:t}}}),{c(){e=b("div"),n=b("div"),r=b("main"),i=b("div"),s=b("div"),c=b("section"),u=b("div"),l=b("h2"),g=Z("Параметры исходной заготовки для распила"),D=F(),m=b("form"),p=b("div"),S=b("div"),Q(C.$$.fragment),G=F(),E=b("div"),Q(y.$$.fragment),V=F(),P=b("div"),Q(x.$$.fragment),O=F(),d=b("div"),Q(_.$$.fragment),T=F(),ee=b("h2"),ue=Z("Схема детали"),be=F(),Q(te.$$.fragment),Be=F(),ve=b("div"),ie=b("button"),ce=Z("Запустить расчет"),Me=F(),ne=b("div"),se=b("h2"),me=Z("Список требуемых деталей из заказа"),we=F(),he=b("table"),_e=b("thead"),B=b("tr"),ze=b("th"),rt=Z("№"),Ke=F(),Te=b("th"),Ze=Z("Имя"),ot=F(),ke=b("th"),ut=Z("Длина верхнего основания (a), мм."),Je=F(),Le=b("th"),Qe=Z("Длина правой стороны (b), мм."),ct=F(),ye=b("th"),ht=Z("Длина нижнего основания (c), мм."),We=F(),z=b("th"),A=Z("Длина левой стороны (d), мм."),Fe=F(),ae=b("th"),De=Z("Левый угол при нижнем основании (f), °"),Pe=F(),le=b("th"),Ae=Z("Правый угол при нижнем основании (e), °"),Ce=F(),re=b("th"),Ye=Z("Количество, шт."),Oe=F(),qe=b("tbody");for(let k=0;k<I.length;k+=1)I[k].c();yt=F(),Ne=b("button"),Dt=Z("+ Добавить деталь"),Pt=F(),je=b("div"),Q(xe.$$.fragment),At=F(),pt=b("hr"),Ct=F(),$e=b("h2"),Et=Z("Результаты"),Tt=F(),et=b("div"),Q(Se.$$.fragment),Lt=F(),tt=b("div"),Q(He.$$.fragment),this.h()},l(k){e=v(k,"DIV",{class:!0});var R=w(e);n=v(R,"DIV",{class:!0});var Ee=w(n);r=v(Ee,"MAIN",{class:!0});var nt=w(r);i=v(nt,"DIV",{class:!0});var ft=w(i);s=v(ft,"DIV",{class:!0});var M=w(s);c=v(M,"SECTION",{class:!0});var dt=w(c);u=v(dt,"DIV",{class:!0});var Ge=w(u);l=v(Ge,"H2",{class:!0});var gt=w(l);g=J(gt,"Параметры исходной заготовки для распила"),gt.forEach(f),D=q(Ge),m=v(Ge,"FORM",{action:!0});var X=w(m);p=v(X,"DIV",{class:!0});var pe=w(p);S=v(pe,"DIV",{class:!0});var Nt=w(S);W(C.$$.fragment,Nt),Nt.forEach(f),G=q(pe),E=v(pe,"DIV",{class:!0});var Ut=w(E);W(y.$$.fragment,Ut),Ut.forEach(f),V=q(pe),P=v(pe,"DIV",{class:!0});var Gt=w(P);W(x.$$.fragment,Gt),Gt.forEach(f),O=q(pe),d=v(pe,"DIV",{class:!0});var Xt=w(d);W(_.$$.fragment,Xt),Xt.forEach(f),pe.forEach(f),X.forEach(f),Ge.forEach(f),dt.forEach(f),T=q(M),ee=v(M,"H2",{class:!0});var Kt=w(ee);ue=J(Kt,"Схема детали"),Kt.forEach(f),be=q(M),W(te.$$.fragment,M),Be=q(M),ve=v(M,"DIV",{class:!0});var Zt=w(ve);ie=v(Zt,"BUTTON",{class:!0});var Jt=w(ie);ce=J(Jt,"Запустить расчет"),Jt.forEach(f),Zt.forEach(f),Me=q(M),ne=v(M,"DIV",{class:!0});var st=w(ne);se=v(st,"H2",{class:!0});var Qt=w(se);me=J(Qt,"Список требуемых деталей из заказа"),Qt.forEach(f),we=q(st),he=v(st,"TABLE",{class:!0});var vt=w(he);_e=v(vt,"THEAD",{class:!0});var Wt=w(_e);B=v(Wt,"TR",{});var K=w(B);ze=v(K,"TH",{scope:!0,class:!0});var Yt=w(ze);rt=J(Yt,"№"),Yt.forEach(f),Ke=q(K),Te=v(K,"TH",{scope:!0,class:!0});var jt=w(Te);Ze=J(jt,"Имя"),jt.forEach(f),ot=q(K),ke=v(K,"TH",{scope:!0,class:!0});var $t=w(ke);ut=J($t,"Длина верхнего основания (a), мм."),$t.forEach(f),Je=q(K),Le=v(K,"TH",{scope:!0,class:!0});var en=w(Le);Qe=J(en,"Длина правой стороны (b), мм."),en.forEach(f),ct=q(K),ye=v(K,"TH",{scope:!0,class:!0});var tn=w(ye);ht=J(tn,"Длина нижнего основания (c), мм."),tn.forEach(f),We=q(K),z=v(K,"TH",{scope:!0,class:!0});var nn=w(z);A=J(nn,"Длина левой стороны (d), мм."),nn.forEach(f),Fe=q(K),ae=v(K,"TH",{scope:!0,class:!0});var sn=w(ae);De=J(sn,"Левый угол при нижнем основании (f), °"),sn.forEach(f),Pe=q(K),le=v(K,"TH",{scope:!0,class:!0});var an=w(le);Ae=J(an,"Правый угол при нижнем основании (e), °"),an.forEach(f),Ce=q(K),re=v(K,"TH",{scope:!0,class:!0});var ln=w(re);Ye=J(ln,"Количество, шт."),ln.forEach(f),K.forEach(f),Wt.forEach(f),Oe=q(vt),qe=v(vt,"TBODY",{});var rn=w(qe);for(let qt=0;qt<I.length;qt+=1)I[qt].l(rn);rn.forEach(f),vt.forEach(f),yt=q(st),Ne=v(st,"BUTTON",{class:!0});var on=w(Ne);Dt=J(on,"+ Добавить деталь"),on.forEach(f),st.forEach(f),Pt=q(M),je=v(M,"DIV",{class:!0});var un=w(je);W(xe.$$.fragment,un),un.forEach(f),At=q(M),pt=v(M,"HR",{class:!0}),Ct=q(M),$e=v(M,"H2",{class:!0});var cn=w($e);Et=J(cn,"Результаты"),cn.forEach(f),Tt=q(M),et=v(M,"DIV",{class:!0});var hn=w(et);W(Se.$$.fragment,hn),hn.forEach(f),Lt=q(M),tt=v(M,"DIV",{class:!0});var fn=w(tt);W(He.$$.fragment,fn),fn.forEach(f),M.forEach(f),ft.forEach(f),nt.forEach(f),Ee.forEach(f),R.forEach(f),this.h()},h(){a(l,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),a(S,"class","sm:col-span-2"),a(E,"class","w-full"),a(P,"class","w-full"),a(d,"class","w-full"),a(p,"class","grid gap-4 sm:grid-cols-2 sm:gap-6"),a(m,"action","#"),a(u,"class","py-8 px-4 mx-auto max-w-2xl lg:py-16"),a(c,"class","bg-white dark:bg-gray-900"),a(ee,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),a(ie,"class","inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center float-right text-white bg-primary-600 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-700"),a(ve,"class","relative overflow-x-auto"),a(se,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),a(ze,"scope","col"),a(ze,"class","px-6 py-3"),a(Te,"scope","col"),a(Te,"class","px-6 py-3"),a(ke,"scope","col"),a(ke,"class","px-6 py-3"),a(Le,"scope","col"),a(Le,"class","px-6 py-3"),a(ye,"scope","col"),a(ye,"class","px-6 py-3"),a(z,"scope","col"),a(z,"class","px-6 py-3"),a(ae,"scope","col"),a(ae,"class","px-6 py-3"),a(le,"scope","col"),a(le,"class","px-6 py-3"),a(re,"scope","col"),a(re,"class","px-6 py-3"),a(_e,"class","text-xs text-gray-600 uppercase bg-gray-50 dark:bg-gray-600 dark:text-gray-400"),a(he,"class","w-full text-sm text-left text-gray-500 dark:text-gray-400"),a(Ne,"class","inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center float-right text-white bg-primary-600 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-700"),a(ne,"class","relative overflow-x-auto"),a(je,"class","mt-5"),a(pt,"class","my-10"),a($e,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),a(et,"class","mt-5"),a(tt,"class","mt-5"),a(s,"class","flex-auto max-w-8xl min-w-0 pt-6 lg:px-8 lg:pt-8 pb:12 xl:pb-24 lg:pb-16"),a(i,"class","flex w-full"),a(r,"class","flex-auto w-full min-w-0 lg:static lg:max-h-full lg:overflow-visible"),a(n,"class","lg:flex"),a(e,"class","w-full px-4 mx-auto max-w-8xl")},m(k,R){oe(k,e,R),o(e,n),o(n,r),o(r,i),o(i,s),o(s,c),o(c,u),o(u,l),o(l,g),o(u,D),o(u,m),o(m,p),o(p,S),Y(C,S,null),o(p,G),o(p,E),Y(y,E,null),o(p,V),o(p,P),Y(x,P,null),o(p,O),o(p,d),Y(_,d,null),o(s,T),o(s,ee),o(ee,ue),o(s,be),Y(te,s,null),o(s,Be),o(s,ve),o(ve,ie),o(ie,ce),o(s,Me),o(s,ne),o(ne,se),o(se,me),o(ne,we),o(ne,he),o(he,_e),o(_e,B),o(B,ze),o(ze,rt),o(B,Ke),o(B,Te),o(Te,Ze),o(B,ot),o(B,ke),o(ke,ut),o(B,Je),o(B,Le),o(Le,Qe),o(B,ct),o(B,ye),o(ye,ht),o(B,We),o(B,z),o(z,A),o(B,Fe),o(B,ae),o(ae,De),o(B,Pe),o(B,le),o(le,Ae),o(B,Ce),o(B,re),o(re,Ye),o(he,Oe),o(he,qe);for(let Ee=0;Ee<I.length;Ee+=1)I[Ee]&&I[Ee].m(qe,null);o(ne,yt),o(ne,Ne),o(Ne,Dt),o(s,Pt),o(s,je),Y(xe,je,null),o(s,At),o(s,pt),o(s,Ct),o(s,$e),o($e,Et),o(s,Tt),o(s,et),Y(Se,et,null),o(s,Lt),o(s,tt),Y(He,tt,null),bt=!0,Ft||(It=[_t(ie,"click",t[5]),_t(Ne,"click",t[4])],Ft=!0)},p(k,[R]){const Ee={};!h&&R&2&&(h=!0,Ee.value=k[1].name,ge(()=>h=!1)),C.$set(Ee);const nt={};R&2&&(nt.value=k[1].size.a),R&2&&(nt.onChange=k[7]),y.$set(nt);const ft={};!$&&R&2&&($=!0,ft.value=k[1].size.h,ge(()=>$=!1)),x.$set(ft);const M={};if(!H&&R&1&&(H=!0,M.value=k[0],ge(()=>H=!1)),_.$set(M),R&4){Ue=k[2];let X;for(X=0;X<Ue.length;X+=1){const pe=vn(k,Ue,X);I[X]?(I[X].p(pe,R),N(I[X],1)):(I[X]=wn(pe),I[X].c(),N(I[X],1),I[X].m(qe,null))}for(Gn(),X=Ue.length;X<I.length;X+=1)Ln(X);Bn()}const dt={};R&33554432&&(dt.$$scope={dirty:R,ctx:k}),xe.$set(dt);const Ge={};R&33554440&&(Ge.$$scope={dirty:R,ctx:k}),Se.$set(Ge);const gt={};R&33554432&&(gt.$$scope={dirty:R,ctx:k}),He.$set(gt)},i(k){if(!bt){N(C.$$.fragment,k),N(y.$$.fragment,k),N(x.$$.fragment,k),N(_.$$.fragment,k),N(te.$$.fragment,k);for(let R=0;R<Ue.length;R+=1)N(I[R]);N(xe.$$.fragment,k),N(Se.$$.fragment,k),N(He.$$.fragment,k),bt=!0}},o(k){U(C.$$.fragment,k),U(y.$$.fragment,k),U(x.$$.fragment,k),U(_.$$.fragment,k),U(te.$$.fragment,k),I=I.filter(Boolean);for(let R=0;R<I.length;R+=1)U(I[R]);U(xe.$$.fragment,k),U(Se.$$.fragment,k),U(He.$$.fragment,k),bt=!1},d(k){k&&f(e),j(C),j(y),j(x),j(_),j(te),Mn(I,k),j(xe),j(Se),j(He),Ft=!1,kn(It)}}}let mt=200;function vs(t,e,n){let r=5,i=new Xe({name:"Основная",size:new Re({a:5e3,c:5e3,h:mt})}),s=[new wt({blank:new Xe({name:"Д. №1",size:new Re({a:500,c:1e3,leftDownAngle:90,rightDownAngle:0,h:mt})}),volume:10}),new wt({blank:new Xe({name:"Д. №2",size:new Re({a:800,c:800,leftDownAngle:80,h:mt})}),volume:20}),new wt({blank:new Xe({name:"Д. №3",size:new Re({a:1e3,c:600,leftDownAngle:45,h:mt})}),volume:30})];On(()=>{s.forEach((d,_)=>{gs(`containerPieceCanvas${_}`,d.blank)})});const c=()=>{const d=new wt({blank:new Xe({name:`Д. №${s.length+1}`,size:new Re({a:0,c:0,h:mt})}),volume:0});n(2,s=[...s,d])};let u,l="";const g=d=>{const _=[],H=T=>T.volume>0&&T.blank.size.a>0&&T.blank.size.c>0;return d.forEach(T=>{T.blank.size.h=i.size.h,H(T)&&_.push(T)}),_},D=()=>{if(r>=0&&i.name.length>0&&i.size.a&&i.size.c&&i.size.h)if(n(2,s=g(s)),s.length){u=ss({stockSawing:r,rawWorkPiece:i,listOrders:s}),console.log(u);const d=u.cuttingCombinations.map((_,H)=>({num:H+1,volume:0,cuttingCombination:_}));ds("containerWorkPieceCanvas",r,i,d),n(3,l=u.listLogMessages.map(_=>_.includes("===>")?`<p class='mt-2 font-bold'>${_}</p>`:`<p '>${_}</p>`).join(""))}else alert("Внимание! Нет валидных деталей для выполнения алгоритма. Скорее всего не все поля были заполнены.");else alert("Внимание! Не корректно заполнены параметры исходной заготовки.")};Nn(()=>{D()});function m(d){t.$$.not_equal(i.name,d)&&(i.name=d,n(1,i))}const p=d=>i.size.changeBothBases(d);function S(d){t.$$.not_equal(i.size.h,d)&&(i.size.h=d,n(1,i))}function C(d){r=d,n(0,r)}function h(d,_){t.$$.not_equal(_.blank.name,d)&&(_.blank.name=d,n(2,s))}function G(d,_){t.$$.not_equal(_.blank.size.a,d)&&(_.blank.size.a=d,n(2,s))}function E(d,_){t.$$.not_equal(_.blank.size.b,d)&&(_.blank.size.b=d,n(2,s))}function y(d,_){t.$$.not_equal(_.blank.size.c,d)&&(_.blank.size.c=d,n(2,s))}function V(d,_){t.$$.not_equal(_.blank.size.d,d)&&(_.blank.size.d=d,n(2,s))}function P(d,_){t.$$.not_equal(_.blank.size.leftDownAngle,d)&&(_.blank.size.leftDownAngle=d,n(2,s))}function x(d,_){t.$$.not_equal(_.blank.size.rightDownAngle,d)&&(_.blank.size.rightDownAngle=d,n(2,s))}function $(d,_){t.$$.not_equal(_.volume,d)&&(_.volume=d,n(2,s))}function O(){l=this.innerHTML,n(3,l)}return[r,i,s,l,c,D,m,p,S,C,h,G,E,y,V,P,x,$,O]}class ys extends it{constructor(e){super(),at(this,e,vs,bs,lt,{})}}export{ys as component};
