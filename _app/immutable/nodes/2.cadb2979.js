var Qn=Object.defineProperty;var jn=(t,e,n)=>e in t?Qn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var w=(t,e,n)=>(jn(t,typeof e!="symbol"?e+"":e,n),n);import{S as ut,i as ft,s as dt,e as Sn,b as se,G as He,h as D,C as kn,E as Xt,F as En,k as v,l as z,W as Tn,P as ei,a2 as Ut,a as I,m as x,c as R,n as d,X as _,I as ti,q as Z,Z as In,r as J,_ as Rn,L as ht,u as Nn,M as ni,N as ii,O as si,g as O,d as M,K as oi,R as On,w as fe,a3 as de,y as X,z as U,A as Y,a4 as ge,B as W,f as ai,a0 as li,j as ri,o as hi,T as Mn,v as ci}from"../chunks/index.d389ee78.js";import{c as kt}from"../chunks/Indicator.svelte_svelte_type_style_lang.e2c519f7.js";function ui(t){let e,n,o,a=[t[11],{class:n=kt(t[5],t[3],t[4],t[8],t[10].class)},{src:o=t[1]},{srcset:t[2]},{alt:t[7]}],s={};for(let l=0;l<a.length;l+=1)s=Xt(s,a[l]);return{c(){e=v("img"),this.h()},l(l){e=z(l,"IMG",{class:!0,src:!0,srcset:!0,alt:!0}),this.h()},h(){Tn(e,s)},m(l,i){se(l,e,i)},p(l,i){Tn(e,s=ei(a,[i&2048&&l[11],i&1336&&n!==(n=kt(l[5],l[3],l[4],l[8],l[10].class))&&{class:n},i&2&&!Ut(e.src,o=l[1])&&{src:o},i&4&&{srcset:l[2]},i&128&&{alt:l[7]}]))},d(l){l&&D(e)}}}function fi(t){let e,n,o,a,s,l;return{c(){e=v("figure"),n=v("img"),s=I(),l=v("figcaption"),this.h()},l(i){e=z(i,"FIGURE",{class:!0});var r=x(e);n=z(r,"IMG",{class:!0,src:!0,srcset:!0,alt:!0}),s=R(r),l=z(r,"FIGCAPTION",{class:!0});var p=x(l);p.forEach(D),r.forEach(D),this.h()},h(){d(n,"class",o=kt(t[5],t[3],t[4],t[8],t[10].class)),Ut(n.src,a=t[1])||d(n,"src",a),d(n,"srcset",t[2]),d(n,"alt",t[7]),d(l,"class",t[9]),d(e,"class",t[6])},m(i,r){se(i,e,r),_(e,n),_(e,s),_(e,l),l.innerHTML=t[0]},p(i,r){r&1336&&o!==(o=kt(i[5],i[3],i[4],i[8],i[10].class))&&d(n,"class",o),r&2&&!Ut(n.src,a=i[1])&&d(n,"src",a),r&4&&d(n,"srcset",i[2]),r&128&&d(n,"alt",i[7]),r&1&&(l.innerHTML=i[0]),r&512&&d(l,"class",i[9]),r&64&&d(e,"class",i[6])},d(i){i&&D(e)}}}function di(t){let e;function n(s,l){return s[0]?fi:ui}let o=n(t),a=o(t);return{c(){a.c(),e=Sn()},l(s){a.l(s),e=Sn()},m(s,l){a.m(s,l),se(s,e,l)},p(s,[l]){o===(o=n(s))&&a?a.p(s,l):(a.d(1),a=o(s),a&&(a.c(),a.m(e.parentNode,e)))},i:He,o:He,d(s){a.d(s),s&&D(e)}}}function gi(t,e,n){const o=["caption","src","srcset","size","alignment","imgClass","figClass","alt","effect","captionClass"];let a=kn(e,o),{caption:s=void 0}=e,{src:l=void 0}=e,{srcset:i=void 0}=e,{size:r="max-w-full"}=e,{alignment:p=""}=e,{imgClass:g="h-auto"}=e,{figClass:h="max-w-lg"}=e,{alt:f=""}=e,{effect:m=""}=e,{captionClass:c="mt-2 text-sm text-center text-gray-500 dark:text-gray-400"}=e;return t.$$set=u=>{n(10,e=Xt(Xt({},e),En(u))),n(11,a=kn(e,o)),"caption"in u&&n(0,s=u.caption),"src"in u&&n(1,l=u.src),"srcset"in u&&n(2,i=u.srcset),"size"in u&&n(3,r=u.size),"alignment"in u&&n(4,p=u.alignment),"imgClass"in u&&n(5,g=u.imgClass),"figClass"in u&&n(6,h=u.figClass),"alt"in u&&n(7,f=u.alt),"effect"in u&&n(8,m=u.effect),"captionClass"in u&&n(9,c=u.captionClass)},e=En(e),[s,l,i,r,p,g,h,f,m,c,e,a]}class mi extends ut{constructor(e){super(),ft(this,e,gi,di,dt,{caption:0,src:1,srcset:2,size:3,alignment:4,imgClass:5,figClass:6,alt:7,effect:8,captionClass:9})}}let Ye=class Yt{constructor(e){w(this,"_a",0);w(this,"_b",0);w(this,"_c",0);w(this,"_d",0);w(this,"_h",0);w(this,"_leftDownAngle",0);w(this,"_leftDownAngleRad",0);w(this,"_rightDownAngle",0);w(this,"_rightDownAngleRad",0);w(this,"minLength");w(this,"maxLength");w(this,"minAngle");w(this,"maxAngle");w(this,"_fractionDigits",3);this._a=e.a,this._b=e.b??this._b,this._c=e.c,this._d=e.d??this._d,this._h=e.h,this._leftDownAngle=e.leftDownAngle??this._leftDownAngle,this._rightDownAngle=e.rightDownAngle??this._rightDownAngle,this.minLength=e.minLength??10,this.maxLength=e.maxLength,this.minAngle=e.minAngle??10,this.maxAngle=e.maxAngle??162,this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this._rightDownAngleRad=this._toRadians(this._rightDownAngle),this.recalculation()}changeBothBases(e){this.a=e,this.c=e}_toRadians(e){return parseFloat((e*(Math.PI/180)).toFixed(3))}_toDegree(e){return parseFloat((e*180/Math.PI).toFixed(3))}recalculation(){this._h&&(this._leftDownAngleRad&&(this.d=this._h/Math.sin(this._leftDownAngleRad)),this._a&&this._c&&(this._rightDownAngleRad=Math.abs(Math.atan(this._h/this.differenceBases)),this._rightDownAngle=this.differenceBases>0?180-this._toDegree(this._rightDownAngleRad):this._toDegree(this._rightDownAngleRad)),this._rightDownAngleRad&&(this.b=this._h/Math.sin(this._rightDownAngleRad)))}get differenceBases(){const e=this._a,n=this._c,o=this._leftDownAngle>=90?this.segmentLeftUp:-1*this.segmentLeftUp;return e-o-n}get segmentLeftUp(){const e=Math.abs(this._leftDownAngle-90);return Math.sqrt(this._h*this._h+this._d*this._d-2*this._h*this._d*Math.cos(this._toRadians(e)))}flipHorizontal(){const e=new Yt(this);this._leftDownAngle=e.rightDownAngle,this._rightDownAngle=e.leftDownAngle,this._b=e.d,this._d=e.b}flipVertical(){const e=new Yt(this);this._leftDownAngle=180-e.leftDownAngle,this._rightDownAngle=180-e.rightDownAngle,this._a=e.c,this._c=e.a}get isRect(){return this.a===this.c&&this.leftDownAngle===90&&this.rightDownAngle===90}get perimeter(){return this._a+this._b+this._c+this._d}get a(){return this._a}set a(e){this._a=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get b(){return this._b}set b(e){this._b=parseFloat(Number(e).toFixed(this._fractionDigits))}get c(){return this._c}set c(e){this._c=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get d(){return this._d}set d(e){this._d=parseFloat(Number(e).toFixed(this._fractionDigits))}get h(){return this._h}set h(e){this._h=parseFloat(Number(e).toFixed(this._fractionDigits))}get leftDownAngle(){return parseFloat(Number(this._leftDownAngle).toFixed(0))}set leftDownAngle(e){this._leftDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this.recalculation()}get rightDownAngle(){return parseFloat(Number(this._rightDownAngle).toFixed(0))}set rightDownAngle(e){this._rightDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._rightDownAngleRad=this._toRadians(this._rightDownAngle)}};function _i(t,e=3){return parseFloat((t*1e-6).toFixed(e))}function pi(t,e,n){return(t+e)/2*n}let We=class{constructor(e){w(this,"name");w(this,"size");w(this,"_isHorizontalFlipped",!1);w(this,"_isVerticalFlipped",!1);this.name=e.name,this.size=new Ye(e.size)}get isRect(){return this.size.isRect}get square(){return pi(this.size.a,this.size.c,this.size.h)}get isHorizontalFlipped(){return this._isHorizontalFlipped}get isVerticalFlipped(){return this._isVerticalFlipped}flipHorizontal(){this.size.flipHorizontal(),this._isHorizontalFlipped=!0}flipVertical(){this.size.flipVertical(),this._isVerticalFlipped=!0}};function wi(t){let e,n,o,a,s,l,i,r,p,g,h,f,m,c,u,b,P;const A=t[5].default,k=ti(A,t,t[4],null);return{c(){e=v("div"),n=v("h2"),o=v("button"),a=v("span"),s=Z(t[1]),l=I(),i=In("svg"),r=In("path"),g=I(),h=v("div"),f=v("div"),k&&k.c(),this.h()},l(S){e=z(S,"DIV",{id:!0,"data-accordion":!0});var B=x(e);n=z(B,"H2",{id:!0});var Q=x(n);o=z(Q,"BUTTON",{type:!0,class:!0,"data-accordion-target":!0,"aria-expanded":!0,"aria-controls":!0});var $=x(o);a=z($,"SPAN",{});var ee=x(a);s=J(ee,t[1]),ee.forEach(D),l=R($),i=Rn($,"svg",{"data-accordion-icon":!0,class:!0,"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0});var K=x(i);r=Rn(K,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),x(r).forEach(D),K.forEach(D),$.forEach(D),Q.forEach(D),g=R(B),h=z(B,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var C=x(h);f=z(C,"DIV",{class:!0});var E=x(f);k&&k.l(E),E.forEach(D),C.forEach(D),B.forEach(D),this.h()},h(){d(r,"stroke","currentColor"),d(r,"stroke-linecap","round"),d(r,"stroke-linejoin","round"),d(r,"stroke-width","2"),d(r,"d","M9 5 5 1 1 5"),d(i,"data-accordion-icon",""),d(i,"class",p="w-3 h-3 "+(t[0]?"rotate-180":"")+" shrink-0"),d(i,"aria-hidden","true"),d(i,"xmlns","http://www.w3.org/2000/svg"),d(i,"fill","none"),d(i,"viewBox","0 0 10 6"),d(o,"type","button"),d(o,"class",t[2]),d(o,"data-accordion-target","#accordion-collapse-body-1"),d(o,"aria-expanded","true"),d(o,"aria-controls","accordion-collapse-body-1"),d(n,"id","accordion-collapse-heading-1"),d(f,"class","p-5 border border-gray-200 dark:border-gray-700 dark:bg-gray-900"),d(h,"id","accordion-collapse-body-1"),d(h,"class",m=t[0]?"":"hidden"),d(h,"aria-labelledby","accordion-collapse-heading-1"),d(e,"id","accordion-collapse"),d(e,"data-accordion",c=t[0]?"open":"collapse")},m(S,B){se(S,e,B),_(e,n),_(n,o),_(o,a),_(a,s),_(o,l),_(o,i),_(i,r),_(e,g),_(e,h),_(h,f),k&&k.m(f,null),u=!0,b||(P=ht(o,"click",t[6]),b=!0)},p(S,[B]){(!u||B&2)&&Nn(s,S[1]),(!u||B&1&&p!==(p="w-3 h-3 "+(S[0]?"rotate-180":"")+" shrink-0"))&&d(i,"class",p),(!u||B&4)&&d(o,"class",S[2]),k&&k.p&&(!u||B&16)&&ni(k,A,S,S[4],u?si(A,S[4],B,null):ii(S[4]),null),(!u||B&1&&m!==(m=S[0]?"":"hidden"))&&d(h,"class",m),(!u||B&1&&c!==(c=S[0]?"open":"collapse"))&&d(e,"data-accordion",c)},i(S){u||(O(k,S),u=!0)},o(S){M(k,S),u=!1},d(S){S&&D(e),k&&k.d(S),b=!1,P()}}}function bi(t,e,n){let{$$slots:o={},$$scope:a}=e,{title:s=""}=e,{isOpen:l=!1}=e;const i=()=>n(0,l=!l);let r="flex items-center justify-between w-full p-5 font-medium text-left border border-gray-200 rounded-xl focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800";const p=()=>i();return t.$$set=g=>{"title"in g&&n(1,s=g.title),"isOpen"in g&&n(0,l=g.isOpen),"$$scope"in g&&n(4,a=g.$$scope)},t.$$.update=()=>{if(t.$$.dirty&5){const g="rounded-xl",h="rounded-t-xl",f=" bg-gray-100";l?(n(2,r=r.replace(g,h)),n(2,r+=f)):(n(2,r=r.replace(h,g)),n(2,r=r.replace(f,"")))}},[l,s,r,i,a,o,p]}class Ft extends ut{constructor(e){super(),ft(this,e,bi,wi,dt,{title:1,isOpen:0})}}class Ct{constructor(e){w(this,"blank");w(this,"_volume");w(this,"minVolume");w(this,"maxVolume");this.blank=new We(e.blank),this._volume=e.volume,this.minVolume=e.minVolume??1,this.maxVolume=e.maxVolume??100}get volume(){return this._volume}set volume(e){this._volume=Number(e)}}const Di="_app/immutable/assets/workPiece.ba374e36.png";function vi(t){let e,n,o;return{c(){e=v("input"),this.h()},l(a){e=z(a,"INPUT",{id:!0,type:!0,name:!0,placeholder:!0,class:!0}),this.h()},h(){d(e,"id",t[1]),d(e,"type","text"),d(e,"name",t[1]),e.disabled=t[3],e.required=t[4],d(e,"placeholder",t[2]),e.value=t[0],d(e,"class",t[5])},m(a,s){se(a,e,s),n||(o=[oi(t[6].call(null,e)),ht(e,"change",t[11])],n=!0)},p(a,[s]){s&2&&d(e,"id",a[1]),s&2&&d(e,"name",a[1]),s&8&&(e.disabled=a[3]),s&16&&(e.required=a[4]),s&4&&d(e,"placeholder",a[2]),s&1&&e.value!==a[0]&&(e.value=a[0]),s&32&&d(e,"class",a[5])},i:He,o:He,d(a){a&&D(e),n=!1,On(o)}}}function zi(t,e,n){let{id:o=""}=e,{placeholder:a=""}=e,{type:s="text"}=e,{disabled:l=!1}=e,{numSettings:i}=e,{required:r=!1}=e,{value:p}=e,{onChange:g=void 0}=e;const h=u=>{u.type=s};let f=`border border-gray-300 text-gray-900 text-sm rounded-lg focus:bg-[white] focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700
                                                         dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500`;l&&(f+=" bg-gray-100");const m=(u,b)=>{let P=s==="number"?Number(b):b;const A=" text-red-800 border border-red-300";(S=>!(i&&(i.min&&S<i.min||i.max&&S>i.max)))(P)?n(0,p=P):f.includes(A)||(n(5,f+=A),setTimeout(()=>{n(5,f=f.replace(A,""))},1e3)),u.value=p},c=u=>m(u.target,u.target.value);return t.$$set=u=>{"id"in u&&n(1,o=u.id),"placeholder"in u&&n(2,a=u.placeholder),"type"in u&&n(8,s=u.type),"disabled"in u&&n(3,l=u.disabled),"numSettings"in u&&n(9,i=u.numSettings),"required"in u&&n(4,r=u.required),"value"in u&&n(0,p=u.value),"onChange"in u&&n(10,g=u.onChange)},[p,o,a,l,r,f,h,m,s,i,g,c]}class Te extends ut{constructor(e){super(),ft(this,e,zi,vi,dt,{id:1,placeholder:2,type:8,disabled:3,numSettings:9,required:4,value:0,onChange:10})}}class ct{constructor(e){w(this,"_a",0);w(this,"_b",0);w(this,"_c",0);w(this,"_d",0);w(this,"_h",0);w(this,"_leftDownAngle",0);w(this,"_leftDownAngleRad",0);w(this,"_rightDownAngle",0);w(this,"_rightDownAngleRad",0);w(this,"minLength");w(this,"maxLength");w(this,"minAngle");w(this,"maxAngle");w(this,"_fractionDigits",3);this._a=e.a,this._b=e.b??this._b,this._c=e.c,this._d=e.d??this._d,this._h=e.h,this._leftDownAngle=e.leftDownAngle??this._leftDownAngle,this._rightDownAngle=e.rightDownAngle??this._rightDownAngle,this.minLength=e.minLength??10,this.maxLength=e.maxLength,this.minAngle=e.minAngle??10,this.maxAngle=e.maxAngle??162,this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this._rightDownAngleRad=this._toRadians(this._rightDownAngle),this.recalculation()}changeBothBases(e){this.a=e,this.c=e}_toRadians(e){return parseFloat((e*(Math.PI/180)).toFixed(3))}_toDegree(e){return parseFloat((e*180/Math.PI).toFixed(3))}recalculation(){this._h&&(this._leftDownAngleRad&&(this.d=this._h/Math.sin(this._leftDownAngleRad)),this._a&&this._c&&(this._rightDownAngleRad=Math.abs(Math.atan(this._h/this.differenceBases)),this._rightDownAngle=this.differenceBases>0?180-this._toDegree(this._rightDownAngleRad):this._toDegree(this._rightDownAngleRad)),this._rightDownAngleRad&&(this.b=this._h/Math.sin(this._rightDownAngleRad)))}get differenceBases(){const e=this._a,n=this._c,o=this._leftDownAngle>=90?this.segmentLeftUp:-1*this.segmentLeftUp;return e-o-n}get segmentLeftUp(){const e=Math.abs(this._leftDownAngle-90);return Math.sqrt(this._h*this._h+this._d*this._d-2*this._h*this._d*Math.cos(this._toRadians(e)))}flipHorizontal(){const e=new ct(this);this._leftDownAngle=e.rightDownAngle,this._rightDownAngle=e.leftDownAngle,this._b=e.d,this._d=e.b}flipVertical(){const e=new ct(this);this._leftDownAngle=180-e.leftDownAngle,this._rightDownAngle=180-e.rightDownAngle,this._a=e.c,this._c=e.a}get isRect(){return this.a===this.c&&this.leftDownAngle===90&&this.rightDownAngle===90}get perimeter(){return this._a+this._b+this._c+this._d}get a(){return this._a}set a(e){this._a=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get b(){return this._b}set b(e){this._b=parseFloat(Number(e).toFixed(this._fractionDigits))}get c(){return this._c}set c(e){this._c=parseFloat(Number(e).toFixed(this._fractionDigits)),this.recalculation()}get d(){return this._d}set d(e){this._d=parseFloat(Number(e).toFixed(this._fractionDigits))}get h(){return this._h}set h(e){this._h=parseFloat(Number(e).toFixed(this._fractionDigits))}get leftDownAngle(){return parseFloat(Number(this._leftDownAngle).toFixed(0))}set leftDownAngle(e){this._leftDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._leftDownAngleRad=this._toRadians(this._leftDownAngle),this.recalculation()}get rightDownAngle(){return parseFloat(Number(this._rightDownAngle).toFixed(0))}set rightDownAngle(e){this._rightDownAngle=parseFloat(Number(e).toFixed(this._fractionDigits)),this._rightDownAngleRad=this._toRadians(this._rightDownAngle)}}function Ke(t,e=3){return parseFloat((t*1e-6).toFixed(e))}function xi(t,e,n){return(t+e)/2*n}class Mt{constructor(e){w(this,"name");w(this,"size");w(this,"_isHorizontalFlipped",!1);w(this,"_isVerticalFlipped",!1);this.name=e.name,this.size=new ct(e.size)}get isRect(){return this.size.isRect}get square(){return xi(this.size.a,this.size.c,this.size.h)}get isHorizontalFlipped(){return this._isHorizontalFlipped}get isVerticalFlipped(){return this._isVerticalFlipped}flipHorizontal(){this.size.flipHorizontal(),this._isHorizontalFlipped=!0}flipVertical(){this.size.flipVertical(),this._isVerticalFlipped=!0}}let Wt=class{constructor(e){w(this,"_name");w(this,"_square");w(this,"_p1");w(this,"_p2");w(this,"_p3");w(this,"_p4");w(this,"_wP1P2");w(this,"_wP2P3");w(this,"_wP3P4");w(this,"_wP4P1");w(this,"_h");w(this,"_colorBody");w(this,"_colorContour");w(this,"_colorTextLegend");w(this,"_colorContourLegend");w(this,"isHorizontalFlipped");w(this,"isVerticalFlipped");w(this,"isShowBodyText");w(this,"isShowBaseContour");w(this,"isShowSideContour");w(this,"baseSpace");w(this,"sideSpace");w(this,"halfYBoard");w(this,"halfXBoard");w(this,"wDivider");w(this,"hDivider");this._name=e.name,this._square=e.square,this._p1={x:e.p1.x,y:e.p1.y},this._p2={x:e.p2.x,y:e.p2.y},this._p3={x:e.p3.x,y:e.p3.y},this._p4={x:e.p4.x,y:e.p4.y},this._wP1P2=e.wP1P2,this._wP2P3=e.wP2P3,this._wP3P4=e.wP3P4,this._wP4P1=e.wP4P1,this._h=e.h,this.isHorizontalFlipped=e.isHorizontalFlipped!==void 0?e.isHorizontalFlipped:!1,this.isVerticalFlipped=e.isVerticalFlipped!==void 0?e.isVerticalFlipped:!1,this.isShowBodyText=e.isShowBodyText!==void 0?e.isShowBodyText:!0,this.isShowBaseContour=e.isShowBaseContour!==void 0?e.isShowBaseContour:!0,this.isShowSideContour=e.isShowSideContour!==void 0?e.isShowSideContour:!0,this.baseSpace=e.baseSpace??20,this.sideSpace=e.sideSpace??20,this.halfXBoard=e.halfXBoard??250,this.halfYBoard=e.halfYBoard??50,this.wDivider=e.wDivider??2,this.hDivider=e.hDivider??2,this._colorBody=e.colorBody??"#d1ffd8",this._colorContour=e.colorContour??"#B70A02",this._colorTextLegend=e.colorTextLegend??"black",this._colorContourLegend=e.colorContourLegend??"gray"}get perimeter(){return this._wP1P2+this._wP2P3+this._wP3P4+this._wP4P1}get colorTextLegend(){return this._colorTextLegend}get colorContourLegend(){return this._colorContourLegend}get colorBody(){return this._colorBody}get name(){return this._name}get square(){return this._square}get p1(){return this._p1}get p2(){return this._p2}get p3(){return this._p3}get p4(){return this._p4}get wP1P2(){return this._wP1P2}get wP2P3(){return this._wP2P3}get wP3P4(){return this._wP3P4}get wP4P1(){return this._wP4P1}get h(){return this._h}get colorContour(){return this._colorContourLegend}};const $t={REMAINS:"Ост.",STOCK:"п."},Ci=(t,e,n,o,a)=>{const s=a>0?1:-1;return{x:t-s*Math.sqrt(Math.abs(o*o-(e-n)*(e-n))),y:n}};function Bn(t,e,n){e&&((h,f)=>{if(h.size.rightDownAngle<90){if(f.size.leftDownAngle>=90){const m=h.size.rightDownAngle+f.size.leftDownAngle;if(f.size.rightDownAngle>=90){const c=h.size.rightDownAngle+f.size.rightDownAngle;(m>=c||c>180)&&m<=180||c<=180&&f.flipHorizontal()}else if(f.size.rightDownAngle<90){const c=h.size.rightDownAngle+180-f.size.rightDownAngle;(m>=c||c>180)&&m<=180||c<=180&&(f.flipHorizontal(),f.flipVertical())}}else if(f.size.leftDownAngle<90){const m=h.size.rightDownAngle+180-f.size.leftDownAngle;if(f.size.rightDownAngle>=90){const c=h.size.rightDownAngle+f.size.rightDownAngle;(m>=c||c>180)&&m<=180?f.flipVertical():c<=180&&f.flipHorizontal()}else if(f.size.rightDownAngle<90){const c=h.size.rightDownAngle+180-f.size.rightDownAngle;(m>=c||c>180)&&m<=180?f.flipVertical():c<=180&&(f.flipHorizontal(),f.flipVertical())}}}else if(h.size.rightDownAngle>90){if(f.size.leftDownAngle>=90){const m=h.size.rightDownAngle+180-f.size.leftDownAngle;if(f.size.rightDownAngle>=90){const c=h.size.rightDownAngle+180-f.size.rightDownAngle;(m>=c||c>180)&&m<=180?f.flipVertical():c<=180&&(f.flipVertical(),f.flipHorizontal())}else if(f.size.rightDownAngle<90){const c=h.size.rightDownAngle+180-f.size.rightDownAngle;(m>=c||c>180)&&m<=180?f.flipVertical():c<=180&&f.flipHorizontal()}}else if(f.size.leftDownAngle<90){const m=h.size.rightDownAngle+f.size.leftDownAngle;if(f.size.rightDownAngle>=90){const c=h.size.rightDownAngle+180-f.size.rightDownAngle;(m>=c||c>180)&&m<=180||c<=180&&(f.flipVertical(),f.flipHorizontal())}else if(f.size.rightDownAngle<90){const c=h.size.rightDownAngle+f.size.rightDownAngle;(m>=c||c>180)&&m<=180||c<=180&&f.flipHorizontal()}}}})(e,t);const a=(h,f,m,c,u)=>{const b=h.x-u.x;b>0&&(f.x+=b,m.x+=b,c.x+=b,u.x+=b)},l={x:n?n.p2.x:0,y:0},i={x:l.x+t.size.a,y:0},r={x:i.x,y:t.size.h},p=t.isRect?r:Ci(i.x,i.y,r.y,t.size.b,t.size.differenceBases),g={x:p.x-t.size.c,y:p.y};return n&&a(n.p3,l,i,p,g),new Wt({name:t.name,square:t.square,p1:l,p2:i,p3:p,p4:g,wP1P2:t.size.a,wP2P3:t.size.b,wP3P4:t.size.c,wP4P1:t.size.d,h:t.size.h,isHorizontalFlipped:t.isHorizontalFlipped,isVerticalFlipped:t.isVerticalFlipped,colorContourLegend:"gray",colorBody:"#d1ffd8",isShowSideContour:!1,baseSpace:30,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4})}function $n(t,e,n){const o=[],a=(i,r)=>{const p=parseFloat(i.perimeter.toFixed(0)),g=parseFloat(r.perimeter.toFixed(0)),h=parseFloat(i.wP1P2.toFixed(0)),f=parseFloat(i.wP2P3.toFixed(0)),m=parseFloat(r.wP1P2.toFixed(0)),c=parseFloat(r.wP3P4.toFixed(0)),u=parseFloat(r.wP4P1.toFixed(0));return p===g&&(h===m||h===c)&&f===u},s=(i,r,p)=>{const g=new Mt({name:$t.STOCK,size:new ct({a:i,c:i,b:p.size.b,d:p.size.b,h:r.h,leftDownAngle:180-p.size.rightDownAngle,rightDownAngle:p.size.rightDownAngle,maxLength:i})}),h={...r.p2},f={x:h.x+g.size.a,y:h.y},m={...r.p3},c={x:m.x+g.size.c,y:m.y};return{piece:g,drawPiece:new Wt({name:g.name,square:g.square,p1:h,p2:f,p3:c,p4:m,wP1P2:g.size.a,wP2P3:g.size.b,wP3P4:g.size.c,wP4P1:g.size.d,h:g.size.h,colorContourLegend:"gray",colorBody:"lightgray",isShowBodyText:!1,isShowSideContour:!1,baseSpace:5,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4})}},l=(i,r,p,g,h)=>{const f=h.wP4P1,m=r.wP2P3,c=180-g.size.leftDownAngle-p.size.rightDownAngle,u=c>0?h.p1.x-r.p2.x+i:h.p4.x-r.p3.x+i,b=f*m*Math.sign(Math.abs(c)),P=new Mt({name:$t.STOCK,size:new ct({a:c>0?u:i,c:c>0?i:u,b:f,d:m,h:r.h,leftDownAngle:180-p.size.rightDownAngle,rightDownAngle:180-g.size.leftDownAngle,maxLength:i})}),A={...r.p2},k=c>0?{x:A.x+u,y:A.y}:{x:A.x+i,y:A.y},S={x:r.p3.x,y:P.size.h},B=c>0?{x:S.x+i,y:S.y}:{x:S.x+u,y:S.y},Q=new Wt({name:$t.REMAINS,square:b,p1:A,p2:k,p3:B,p4:S,wP1P2:P.size.a,wP2P3:P.size.b,wP3P4:P.size.c,wP4P1:P.size.d,h:P.size.h,colorContourLegend:"gray",colorBody:"lightgray",isShowSideContour:!1,baseSpace:10,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4});return{piece:P,drawPiece:Q}};return e.forEach(i=>{const r={num:i.num,volume:i.volume,combination:[]};let p,g;const h=f=>{r.combination.push(f.drawPiece),g=f.piece,p=f.drawPiece};i.cuttingCombination.forEach((f,m)=>{const c=new Mt(f);let u=Bn(c,g,p);if(g&&m>0){const b=a(p,u);if(t&&b){const P=s(t,p,g);h(P)}else if(!b){const P=l(t,p,g,c,u);h(P)}u=Bn(c,g,p)}h({piece:c,drawPiece:u})}),o.push(r)}),o}function Pi(t,e,n,o){const a=o.map((i,r)=>({num:r+1,volume:0,cuttingCombination:i})),s=[];return{drawCombinations:$n(t,a).filter((i,r)=>{let p=0,g=0;return i.combination.forEach(h=>{p+=h.wP1P2,g+=h.wP3P4}),p<=e&&g<=n?(s.push(o[i.num-1]),i.num=s.length,!0):!1}),cuttingCombination:s}}function Ai(t,e,n){const o=[],a=[],s=e.map(r=>r.blank.square+n),l=Math.min(...s),i=(r,p,g,h)=>{for(let f=r;f<p.length;f++){const m=p[f].blank.square+n,c=g-m;h.push(p[f].blank),c>=l?i(f,p,c,h):c<l&&c>=0&&o.push([...h]),h.pop()}};return i(0,e,t,a),o}function yi(t,e,n){const a=[];return e.forEach(s=>{if(s.basisIndex<=t&&s.b>0){const l=parseFloat(s.b.toFixed(0));a.push({num:s.basisIndex+1,volume:l,cuttingCombination:n[s.basisIndex]})}}),a.sort((s,l)=>s.num-l.num)}class Xn{constructor(e){w(this,"head",0);w(this,"body",[]);w(this,"tail",0);e&&(this.head=e.head,this.body=[...e.body],this.tail=e.tail)}}const Fi=(t,e)=>{const n=[];return e.forEach(o=>{const a=new Xn;a.head=o.blank.square,t.forEach(s=>{a.body.push(s.filter(l=>l.square===o.blank.square).length)}),a.tail=o.volume,n.push(a)}),n},Si=t=>{const e=t.map(a=>new Xn(a)),n=t.map(()=>0),o=(a,s)=>(s[a]=-1,s);return t.forEach((a,s)=>{const l=a.body.concat(o(s,[...n]));e[s].body=l.map(i=>i*-1),e[s].tail*=-1}),e};function Kt(t,e=!1){const n=[],o=t[0].body.length,a=()=>{let s="V |";for(let l=1;l<=o;l++)s+=` X${l} `;return s+="| P",s};return n.push(a()),t.forEach(s=>{let l=`${parseFloat(s.head.toFixed(3))} |`;s.body.forEach(i=>{l+=i>-1?` ${i}  `:`${i}  `}),l+=e?`= ${s.tail}`:`>= ${s.tail}`,n.push(l)}),n}const Ie=t=>{const n=[];let o="N |  c  |  b  | ";t.rows[0].rowCoefficients.forEach((i,r)=>{o+=` X${r+1} `}),n.push(o),t.rows.forEach((i,r)=>{const p=parseFloat(i.b.toFixed(2));let g=i.b>=0?`${r+1} | X${i.basisIndex+1} | ${p} | `:`${r+1} | X${i.basisIndex+1} | ${p} | `;i.rowCoefficients.forEach(h=>{const f=parseFloat(h.toFixed(2));g+=h>-1?` ${f} `:`${f} `}),n.push(g)});const a=t.rowF;let l=`| F  | ${parseFloat(a.b.toFixed(2))} | `;return a.rowCoefficients.forEach(i=>{const r=parseFloat(i.toFixed(2));l+=i>-1?` ${r} `:`${r} `}),n.push(l),n};function ki(t,e){const s=[`Площадь не обрезанной заготовки: (${t.size.a} * ${t.size.h}) = ${parseFloat(t.square.toFixed(3))} мм² = ${Ke(t.square,3)} м²`,"Имя | Площадь мм²| Объем"];return e.forEach(l=>{const i=`${l.blank.name} | ${parseFloat(l.blank.square.toFixed(3))} | ${l.volume}`;s.push(i)}),s}function Vn(t,e,n,o,a=!1){const l=[],i=parseFloat(e.square.toFixed(3));l.push("===> Результаты вычисления задачи поиска решения оптимального раскроя"),l.push(`
===> Исходные данные`),l.push(`Площадь сырья для раскроя: ${i} мм² =  ${Ke(i,3)} м²`),l.push("Заказ:"),n.forEach((b,P)=>{const A=parseFloat(b.blank.square.toFixed(3));l.push(`N${P+1}. Площадь обреза: ${A} мм² =  ${Ke(A,3)} м²; Количество: ${b.volume} шт.`)}),l.push(`
===> Варианты раскроя изделия исходя из начальных условий (матрица).`),l.push("X - варианты раскроя."),l.push("V - площадь обреза."),l.push("Пересечение V/X -  количество распилов длины V по отношению к длине сырья для раскроя."),Kt(o).forEach(b=>l.push(b)),l.push(`
===> Оптимальный раскрой материала`);let r=0,p=0;const g=o[0].body.length-1,h=a?0:1;t.rows.forEach(b=>{if(b.basisIndex<=g&&b.b>0){const P=parseFloat(b.b.toFixed(h)),A=`Количество распилов варианта X${b.basisIndex+1}: ${P} шт.`;l.push(A),r+=b.b,o.forEach(k=>{const S=k.body[b.basisIndex];S&&(p+=b.b*S*k.head)})}});const f=parseFloat((r*e.square).toFixed(3)),m=parseFloat(r.toFixed(h)),c=parseFloat(p.toFixed(3)),u=parseFloat((f-p).toFixed(3));return l.push(`
Количество заготовок для распила: ${m} шт.`),l.push(`Полезная площадь распилов: ${c} мм²  = ${Ke(c,3)} м²`),l.push(`Общая площадь требуемых заготовок для распилов: ${f} мм² =  ${Ke(f,3)} м²`),l.push(`Остатки: ${u} мм² = ${Ke(u,3)} м²`),l}class Qt{constructor(e){w(this,"basisIndex",0);w(this,"rowCoefficients",[]);w(this,"b",0);e&&(this.basisIndex=e.basisIndex,this.rowCoefficients=[...e.rowCoefficients],this.b=e.b)}}class Gt{constructor(e){w(this,"rowCoefficients",[]);w(this,"b",0);e&&(this.rowCoefficients=[...e.rowCoefficients],this.b=e.b)}}class Le{constructor(e){w(this,"rows",[]);w(this,"rowF",new Gt);e&&(this.rowF=new Gt(e.rowF),this.rows=e.rows.map(n=>new Qt(n)))}}const Ei=t=>{const e=new Le,n=[];for(let o=t.length;o>0;o--)n.push(t[0].body.length-o);return n.forEach((o,a)=>{const s=t[a],l=new Qt({basisIndex:o,rowCoefficients:s.body,b:s.tail});e.rows.push(l)}),e.rowF=new Gt({b:0,rowCoefficients:[]}),t[0].body.forEach((o,a)=>{const s=n.includes(a);e.rowF.rowCoefficients.push(s?0:1)}),e},jt=(t,e)=>{const n=e.rowIndex,o=e.colIndex,a=new Le(t);a.rows[n].basisIndex=o;const s=t.rows[n],l=s.rowCoefficients,i=l[o];t.rows.forEach((g,h)=>{const f=a.rows[h];if(h!==n){const m=g.rowCoefficients[o],c=s.b;f.b=g.b-m*c/i,f.rowCoefficients=g.rowCoefficients.map((u,b)=>{if(b===o)return 0;{const P=s.rowCoefficients[b];return u-m*P/i}})}else f.b=g.b/i,f.rowCoefficients=g.rowCoefficients.map(m=>m/i)});const r=a.rowF,p=t.rowF.rowCoefficients[o];return r.b=t.rowF.b-s.b*p/i,t.rowF.rowCoefficients.forEach((g,h)=>{h!==o?r.rowCoefficients[h]=g-l[h]*p/i:r.rowCoefficients[h]=0}),a};function Ti(t,e){const n=(i,r=!0)=>{const p=m=>{let c=0;const u=m.rows;return u.forEach((b,P)=>{if(r&&b.b<0){const A=u[c].b>=0?0:u[c].b*-1;c=b.b*-1>A?P:c}else if(!r){const A=u[c].b>=0?u[c].b:u[c].b*-1;c=(b.b>=0?b.b:b.b*-1)>A?P:c}}),c},g=(m,c)=>{const u=c.rows[m].rowCoefficients;let b=0;return u.forEach((P,A)=>{const k=u[b]>=0?u[b]:u[b]*-1;b=(P>=0?P:P*-1)>k?A:b}),b},h=p(i),f=g(h,i);return{rowIndex:h,colIndex:f}},o=i=>![...i.rows].filter(r=>r.b<0).length;let a=1,s=new Le(t),l=o(s);for(;!l;){e.push(`
===> Начало итерации N${a}`),e.push(`
===> Этап 2. Шаг 1. Исходная таблица`),e.push(...Ie(s)),e.push(`
===> Этап 2. Шаг 2. Проверка свободных членов на допустимость решения`),e.push(`Все свободные члены >= 0 ? Ответ:${l}`);const i=n(s);e.push(`
===> Этап 2. Шаг 3. Поиск ведущей строки и столбца`),e.push(`Строка: ${i.rowIndex}, столбец: ${i.colIndex}`),s=jt(s,i),e.push(`
===> Этап 2. Шаг 4. Расчет новой симплекс таблицы `),e.push(...Ie(s)),e.push(`
===> Конец итерации N${a}`),l=o(s),a++}return s}function Ii(t,e){const n=(i,r=!0)=>{const p=(m,c)=>{let u=0;return c.forEach((b,P)=>{const A=b.b/b.rowCoefficients[m];if(A>=0){const k=c[u].b/c[u].rowCoefficients[m];u=A<k||k<0?P:u}}),u},h=(m=>{let c=0;return m.forEach((u,b)=>{if(r&&u<0){const P=m[c]*-1;c=u*-1>P?b:c}else if(!r){const P=m[c]>=0?m[c]:m[c]*-1;c=(u>=0?u:u*-1)>P?b:c}}),c})(i.rowF.rowCoefficients);return{rowIndex:p(h,i.rows),colIndex:h}},o=i=>![...i.rowF.rowCoefficients].filter(r=>r<0).length;let a=1,s=new Le(t),l=o(s);for(;!l;){e.push(`
===> Начало итерации N${a}`),e.push(`
===> Этап 3. Шаг 1. Исходная таблица`),e.push(...Ie(s)),e.push(`
===> Этап 3. Шаг 2. Проверка коэффициентов функции F на допустимость решения.`),e.push(`Все коэффициентов >= 0 ? Ответ:${l}`);const i=n(s);e.push(`
===> Этап 3. Шаг 3. Поиск ведущей строки и столбца для коэффициентов функции F`),e.push(`Строка: ${i.rowIndex}, столбец: ${i.colIndex}`),s=jt(s,i),e.push(`
===> Этап 3. Шаг 4. Расчет новой симплекс таблицы `),e.push(...Ie(s)),e.push(`
===> Конец итерации N${a}`),l=o(s),a++}return s}function Ri(t,e){const n=g=>!g.rows.filter(h=>+h.b.toFixed(2)%1!==0).length,o=(g,h=2)=>{const f=new Le(g);return f.rows.forEach(m=>{m.b=Number(m.b.toFixed(h)),m.rowCoefficients=m.rowCoefficients.map(c=>Number(c.toFixed(h)))}),f.rowF.rowCoefficients=f.rowF.rowCoefficients.map(m=>Number(m.toFixed(h))),f},a=g=>{const h=u=>{let b=0,P=0;return u.rows.forEach((A,k)=>{const S=A.b%1;S>b&&(b=S,P=k)}),e.push(`Максимальная дробная часть:${b}`),e.push(`Индекс максимальной дробной части:${P}`),P},f=u=>{const b=u%1;return u>=0?-b:b<0?-1-b:b},m=h(g),c=new Qt(g.rows[m]);return c.b=f(c.b),c.rowCoefficients=[...c.rowCoefficients.map(u=>f(u)),1],c},s=g=>{const h=(f,m)=>{let c=0;return m.forEach((u,b)=>{const P=f/u;if(P>0){const A=u/m[c];c=P<A||A<0?b:c}}),c};return{rowIndex:r.rows.length-1,colIndex:h(g.b,g.rowCoefficients)}},l=(g,h)=>{const f=c=>{const u=new Le(c);return u.rows.forEach(b=>b.rowCoefficients.push(0)),u.rowF.rowCoefficients.push(0),u},m=new Le(g);return r=f(r),m.rows.push(h),m};let i=1,r=new Le(t),p=n(r);for(e.push(`
===> Этап 4. Шаг 0. Проверка свободных членов на целочисленность.`),e.push(`Все свободные члены b целые ? Ответ:${p}`),r=o(r);!p;){e.push(`
===> Начало итерации N${i}`),e.push(`
===> Этап 4. Шаг 1. Исходная таблица`),e.push(...Ie(r)),e.push(`
===> Этап 4. Шаг 2. Формирование нового ограничения`);const g=a(r);r=l(r,g),e.push(...Ie(r));const h=s(g);e.push(`
===> Этап 4. Шаг 3. Поиск ведущей строки и столбца`),e.push(`Строка: ${h.rowIndex}, столбец: ${h.colIndex}`),e.push(`
===> Этап 4. Шаг 4. Расчет новой симплекс таблицы `),r=o(jt(r,h)),e.push(...Ie(r)),e.push(`
===> Этап 4. Шаг 4. Проверка свободных членов на целочисленность.`),p=n(r),e.push(`Все свободные члены b целые ? Ответ: ${p}`),e.push(`
===> Конец итерации N${i}`),i>30&&(p=!0,e.push(`
===> Внимание! Завершилось после 100 итераций`)),i++}return r}const Bi=t=>{const e=t.stockSawing*2*t.rawWorkPiece.size.h,n=[];n.push(`
===> Этап 0. Подготовка данных и коэффициентов `),n.push(`Припуск распила: ${t.stockSawing}`),n.push(`Площадь припуска распила: ${e} мм² = ${Ke(e)} м²`),n.push(`
Таблица заготовок и их параметров`),n.push(...ki(t.rawWorkPiece,t.listOrders));const o=Ai(t.rawWorkPiece.square,t.listOrders,e),a=Pi(t.stockSawing,t.rawWorkPiece.size.a,t.rawWorkPiece.size.c,o),s=a.cuttingCombination;n.push(`
===> Этап 0. Шаг 1. Варианты раскроя изделия исходя из начальных условий.`),n.push(`Количество комбинаций: ${a.cuttingCombination.length}`),console.log(a),console.log(n),console.log(s),n.push(`
===> Этап 1. Переход к канонической форме задачи линейного программирования путем введения неотрицательных дополнительных балансовых переменных.`);const l=Fi(s,t.listOrders);n.push(`
===> Этап 1. Шаг 1. Получение матрицы коэффициентов`),n.push(...Kt(l));const i=Si(l);n.push(`
===> Этап 1. Шаг 2. Переход к канонической форме задачи линейного программирования путем введения неотрицательных дополнительных балансовых переменных.`),n.push(...Kt(i,!0)),n.push(`
===> Этап 2.  Проверка симплекс таблицы на допустимость решения. Расчет новой симплекс таблицы. `),n.push(`
===> Этап 2. Шаг 0. Инициализация симплекс таблицы`);const r=Ei(i);n.push(...Ie(r));const p=Ti(r,n);n.push(`
===> Этап 3. Основной алгоритм решения задачи ЛП симплекс-методом. Расчет новой симплекс таблицы. `);const g=Ii(p,n);n.push(...Ie(g)),n.push(...Vn(g,t.rawWorkPiece,t.listOrders,l).map(c=>`
${c}`)),n.push(`
===> Этап 4. Алгоритм поиска целочисленного решения ЗЛП методом Гомори `);const h=Ri(g,n);n.push(...Vn(h,t.rawWorkPiece,t.listOrders,l,!0).map(c=>`
${c}`));const f=yi(l[0].body.length-1,h.rows,s),m=$n(t.stockSawing,f);return console.log(m),{listLogMessages:n,drawCombinations:a.drawCombinations,optimumDrawCombinations:m}};function Vi(t){let e,n;return{c(){e=v("label"),n=Z(t[1]),this.h()},l(o){e=z(o,"LABEL",{for:!0,class:!0});var a=x(e);n=J(a,t[1]),a.forEach(D),this.h()},h(){d(e,"for",t[0]),d(e,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white")},m(o,a){se(o,e,a),_(e,n)},p(o,[a]){a&2&&Nn(n,o[1]),a&1&&d(e,"for",o[0])},i:He,o:He,d(o){o&&D(e)}}}function qi(t,e,n){let{forName:o}=e,{text:a}=e;return t.$$set=s=>{"forName"in s&&n(0,o=s.forName),"text"in s&&n(1,a=s.text)},[o,a]}class Li extends ut{constructor(e){super(),ft(this,e,qi,Vi,dt,{forName:0,text:1})}}function Hi(t){let e,n,o,a,s;e=new Li({props:{forName:t[1],text:t[6]}});function l(r){t[7](r)}let i={id:t[1],type:t[3],placeholder:t[2],required:t[4],onChange:t[5]};return t[0]!==void 0&&(i.value=t[0]),o=new Te({props:i}),fe.push(()=>de(o,"value",l)),{c(){X(e.$$.fragment),n=I(),X(o.$$.fragment)},l(r){U(e.$$.fragment,r),n=R(r),U(o.$$.fragment,r)},m(r,p){Y(e,r,p),se(r,n,p),Y(o,r,p),s=!0},p(r,[p]){const g={};p&2&&(g.forName=r[1]),p&64&&(g.text=r[6]),e.$set(g);const h={};p&2&&(h.id=r[1]),p&8&&(h.type=r[3]),p&4&&(h.placeholder=r[2]),p&16&&(h.required=r[4]),p&32&&(h.onChange=r[5]),!a&&p&1&&(a=!0,h.value=r[0],ge(()=>a=!1)),o.$set(h)},i(r){s||(O(e.$$.fragment,r),O(o.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),M(o.$$.fragment,r),s=!1},d(r){W(e,r),r&&D(n),W(o,r)}}}function Ni(t,e,n){let{id:o=""}=e,{placeholder:a=""}=e,{type:s="text"}=e,{required:l=!1}=e,{value:i}=e,{onChange:r=void 0}=e,{label:p=""}=e;function g(h){i=h,n(0,i)}return t.$$set=h=>{"id"in h&&n(1,o=h.id),"placeholder"in h&&n(2,a=h.placeholder),"type"in h&&n(3,s=h.type),"required"in h&&n(4,l=h.required),"value"in h&&n(0,i=h.value),"onChange"in h&&n(5,r=h.onChange),"label"in h&&n(6,p=h.label)},[i,o,a,s,l,r,p,g]}class St extends ut{constructor(e){super(),ft(this,e,Ni,Hi,dt,{id:1,placeholder:2,type:3,required:4,value:0,onChange:5,label:6})}}class Un{constructor(e){w(this,"_name");w(this,"_square");w(this,"_p1");w(this,"_p2");w(this,"_p3");w(this,"_p4");w(this,"_wP1P2");w(this,"_wP2P3");w(this,"_wP3P4");w(this,"_wP4P1");w(this,"_h");w(this,"_colorBody");w(this,"_colorContour");w(this,"_colorTextLegend");w(this,"_colorContourLegend");w(this,"isHorizontalFlipped");w(this,"isVerticalFlipped");w(this,"isShowBodyText");w(this,"isShowBaseContour");w(this,"isShowSideContour");w(this,"baseSpace");w(this,"sideSpace");w(this,"halfYBoard");w(this,"halfXBoard");w(this,"wDivider");w(this,"hDivider");this._name=e.name,this._square=e.square,this._p1={x:e.p1.x,y:e.p1.y},this._p2={x:e.p2.x,y:e.p2.y},this._p3={x:e.p3.x,y:e.p3.y},this._p4={x:e.p4.x,y:e.p4.y},this._wP1P2=e.wP1P2,this._wP2P3=e.wP2P3,this._wP3P4=e.wP3P4,this._wP4P1=e.wP4P1,this._h=e.h,this.isHorizontalFlipped=e.isHorizontalFlipped!==void 0?e.isHorizontalFlipped:!1,this.isVerticalFlipped=e.isVerticalFlipped!==void 0?e.isVerticalFlipped:!1,this.isShowBodyText=e.isShowBodyText!==void 0?e.isShowBodyText:!0,this.isShowBaseContour=e.isShowBaseContour!==void 0?e.isShowBaseContour:!0,this.isShowSideContour=e.isShowSideContour!==void 0?e.isShowSideContour:!0,this.baseSpace=e.baseSpace??20,this.sideSpace=e.sideSpace??20,this.halfXBoard=e.halfXBoard??250,this.halfYBoard=e.halfYBoard??50,this.wDivider=e.wDivider??2,this.hDivider=e.hDivider??2,this._colorBody=e.colorBody??"#d1ffd8",this._colorContour=e.colorContour??"#B70A02",this._colorTextLegend=e.colorTextLegend??"black",this._colorContourLegend=e.colorContourLegend??"gray"}get perimeter(){return this._wP1P2+this._wP2P3+this._wP3P4+this._wP4P1}get colorTextLegend(){return this._colorTextLegend}get colorContourLegend(){return this._colorContourLegend}get colorBody(){return this._colorBody}get name(){return this._name}get square(){return this._square}get p1(){return this._p1}get p2(){return this._p2}get p3(){return this._p3}get p4(){return this._p4}get wP1P2(){return this._wP1P2}get wP2P3(){return this._wP2P3}get wP3P4(){return this._wP3P4}get wP4P1(){return this._wP4P1}get h(){return this._h}get colorContour(){return this._colorContourLegend}}const Oi=(t,e,n,o,a)=>{const s=a>0?1:-1;return{x:t-s*Math.sqrt(Math.abs(o*o-(e-n)*(e-n))),y:n}},Zt={REMAINS:"Ост.",STOCK:"п."};function Yn(t,e=1200,n=300){const o=t.appendChild(document.createElement("div"));o.className="flex flex-row justify-around items-center";const a=o.appendChild(document.createElement("canvas")),s=a.getContext("2d");return a.width=e,a.height=n,s}function Jt(t,e){const n=l=>l/t.wDivider+t.halfXBoard,o=l=>l/t.hDivider+t.halfYBoard,s=(l,i)=>{i.setLineDash([5,3]),i.textBaseline="bottom",i.lineDashOffset=1,i.strokeStyle=l.colorContourLegend,i.fillStyle=l.colorTextLegend,i.beginPath();const r=(m,c,u,b=0,P=0)=>{i.setLineDash([5,3]),i.beginPath(),i.moveTo(n(m.x),o(m.y)),i.lineTo(n(m.x)+b,o(m.y)+P),i.lineTo(n(c.x)+b,o(c.y)+P),i.lineTo(n(c.x),o(c.y)),i.stroke(),i.closePath()},p=(m,c,u,b=-l.baseSpace)=>{r(m,c,u,0,b);const P=parseFloat(u.toFixed(1)),A=` ${P} мм`,k=b>0?b+15:b-5,S=P>100?A.length:-5,B={x:(n(c.x)+n(m.x))/2-S,y:(o(c.y)+o(m.y))/2+k};i.fillText(A,B.x,B.y)},g=(m,c,u,b=30)=>{r(m,c,u,b);const P=b>0?b*3:b*4,A={x:(n(c.x)+n(m.x))/2+P,y:(o(c.y)+o(m.y))/2};i.fillText(` ${u} мм`,A.x,A.y)},h=(m,c,u)=>{p(m,c,u,l.baseSpace)},f=(m,c,u)=>{g(m,c,u,-l.baseSpace)};l.isShowBaseContour&&(p(l.p1,l.p2,l.wP1P2),h(l.p3,l.p4,l.wP3P4)),l.isShowSideContour&&(g(l.p2,l.p3,l.wP2P3),f(l.p4,l.p1,l.wP4P1))};if(e.font="8pt Arial",e.strokeStyle=t.colorContour,e.fillStyle=t.colorBody,e.beginPath(),e.setLineDash([]),e.moveTo(n(t.p1.x),o(t.p1.y)),e.lineTo(n(t.p1.x),o(t.p1.y)),e.lineTo(n(t.p2.x),o(t.p2.y)),e.lineTo(n(t.p3.x),o(t.p3.y)),e.lineTo(n(t.p4.x),o(t.p4.y)),e.lineTo(n(t.p1.x),o(t.p1.y)),e.stroke(),e.fill(),t.isShowBodyText){e.fillStyle=t.colorTextLegend;const l=t.isHorizontalFlipped?"( ⇆ )":"",i=t.isVerticalFlipped?"( ⇅ )":"",r=_i(t.square),p=` S=${r} м² ${l} ${i}`;if(t.name===Zt.REMAINS&&r>0){const g=t.wP1P2>=t.wP3P4?n(t.p1.x)+10:n(t.p4.x),h=t.wP1P2>=t.wP3P4?o(t.h)/2-10:o(t.h)+50,f={x:g,y:h};e.fillText(p,f.x,f.y),e.setLineDash([5,3]),e.beginPath(),t.wP1P2>=t.wP3P4?(e.moveTo(f.x,f.y),e.lineTo(n(t.p1.x+40),o(t.p1.y))):(e.moveTo(f.x+10,f.y-10),e.lineTo(n(t.p4.x+40),o(t.p4.y))),e.stroke(),e.closePath()}else{const g=(n(t.p2.x)+n(t.p1.x))/2-p.length*2,h=(n(t.p3.x)+n(t.p4.x))/2,f={x:2*g*h/(g+h),y:o(t.h)/2+t.halfYBoard/2};e.fillText(p,f.x,f.y)}e.closePath()}s(t,e)}function Wn(t){for(;t!=null&&t.firstChild&&t.lastChild;)t.removeChild(t.lastChild)}function qn(t,e,n,o){const a=i=>new Un({name:"rawPiece",square:i.square,p1:{x:0,y:0},p2:{x:i.size.a,y:0},p3:{x:i.size.a,y:i.size.h},p4:{x:0,y:i.size.h},wP1P2:i.size.a,wP2P3:i.size.b,wP3P4:i.size.c,wP4P1:i.size.d,h:i.size.h,colorBody:"lightgray",isShowBodyText:!1,isShowSideContour:!1,baseSpace:60,halfXBoard:0,halfYBoard:100,wDivider:4.2,hDivider:4}),s=(i,r)=>{i.beginPath(),i.font=" 14pt Arial",i.fillStyle="black";const p=r.volume?" (x"+r.volume+")":"",g=r.combination.filter(h=>h.name!==Zt.REMAINS&&h.name!==Zt.STOCK).length;i.fillText(`Вариант №${r.num}${p}.  Деталей ${g}`,20,20),i.stroke(),i.fill(),i.closePath()},l=document.getElementById(t);l&&(Wn(l),o.forEach(i=>{const r=Yn(l);s(r,i),Jt(a(n),r),i.combination.forEach(p=>{Jt(p,r)})}))}function Mi(t,e){const n=document.getElementById(t);if(n){Wn(n);const o=Yn(n,1e3,200),a={x:0,y:0},s={x:a.x+e.size.a,y:0},l={x:s.x,y:e.size.h},i=e.isRect?l:Oi(s.x,s.y,l.y,e.size.b,e.size.differenceBases),r={x:i.x-e.size.c,y:i.y},p=new Un({name:e.name,square:e.square,p1:a,p2:s,p3:i,p4:r,wP1P2:e.size.a,wP2P3:e.size.b,wP3P4:e.size.c,wP4P1:e.size.d,h:e.size.h,isHorizontalFlipped:e.isHorizontalFlipped,isVerticalFlipped:e.isVerticalFlipped});Jt(p,o)}}function Ln(t,e,n){const o=t.slice();return o[24]=e[n],o[25]=e,o[26]=n,o}function Hn(t){let e,n,o=t[26]+1+"",a,s,l,i,r,p,g,h,f,m,c,u,b,P,A,k,S,B,Q,$,ee,K,C,E,ce,te,pe,j,Ne,we,oe,he,Oe,ne,ie,me,be,ue,_e;function N(F){t[11](F,t[24])}let De={type:"text",id:"namePiece",placeholder:"Наименования детали..."};t[24].blank.name!==void 0&&(De.value=t[24].blank.name),i=new Te({props:De}),fe.push(()=>de(i,"value",N));function gt(F){t[12](F,t[24])}let Ge={type:"number",numSettings:{min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength},id:"lengthAPiece",placeholder:"Длина верхнего основания детали..."};t[24].blank.size.a!==void 0&&(Ge.value=t[24].blank.size.a),h=new Te({props:Ge}),fe.push(()=>de(h,"value",gt));function Fe(F){t[13](F,t[24])}let Ze={id:"lengthBPiece",type:"number",numSettings:{min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength},disabled:!0,placeholder:"Длина правой стороны детали..."};t[24].blank.size.b!==void 0&&(Ze.value=t[24].blank.size.b),u=new Te({props:Ze}),fe.push(()=>de(u,"value",Fe));function mt(F){t[14](F,t[24])}let ve={id:"lengthCPiece",type:"number",numSettings:{min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength},placeholder:"Длина нижнего основания детали..."};t[24].blank.size.c!==void 0&&(ve.value=t[24].blank.size.c),k=new Te({props:ve}),fe.push(()=>de(k,"value",mt));function _t(F){t[15](F,t[24])}let Je={id:"lengthDPiece",type:"number",disabled:!0,numSettings:{min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength},placeholder:"Длина левой стороны детали..."};t[24].blank.size.d!==void 0&&(Je.value=t[24].blank.size.d),$=new Te({props:Je}),fe.push(()=>de($,"value",_t));function Se(F){t[16](F,t[24])}let Qe={id:"leftDownAngle",type:"number",numSettings:{min:t[24].blank.size.minAngle,max:t[24].blank.size.maxAngle},placeholder:"Левый угол при нижнем основании детали..."};t[24].blank.size.leftDownAngle!==void 0&&(Qe.value=t[24].blank.size.leftDownAngle),E=new Te({props:Qe}),fe.push(()=>de(E,"value",Se));function pt(F){t[17](F,t[24])}let ze={id:"rightDownAngle",type:"number",disabled:!0,numSettings:{min:t[24].blank.size.minAngle,max:t[24].blank.size.maxAngle},placeholder:"Правый угол при нижнем основании детали..."};t[24].blank.size.rightDownAngle!==void 0&&(ze.value=t[24].blank.size.rightDownAngle),j=new Te({props:ze}),fe.push(()=>de(j,"value",pt));function wt(F){t[18](F,t[24])}let je={id:"volumePiece",type:"number",numSettings:{min:t[24].minVolume,max:t[24].maxVolume},placeholder:"Количество деталей данного типа..."};return t[24].volume!==void 0&&(je.value=t[24].volume),he=new Te({props:je}),fe.push(()=>de(he,"value",wt)),{c(){e=v("tr"),n=v("th"),a=Z(o),s=I(),l=v("td"),X(i.$$.fragment),p=I(),g=v("td"),X(h.$$.fragment),m=I(),c=v("td"),X(u.$$.fragment),P=I(),A=v("td"),X(k.$$.fragment),B=I(),Q=v("td"),X($.$$.fragment),K=I(),C=v("td"),X(E.$$.fragment),te=I(),pe=v("td"),X(j.$$.fragment),we=I(),oe=v("td"),X(he.$$.fragment),ne=I(),ie=v("tr"),me=v("td"),be=v("div"),ue=I(),this.h()},l(F){e=z(F,"TR",{class:!0});var T=x(e);n=z(T,"TH",{scope:!0,class:!0});var ke=x(n);a=J(ke,o),ke.forEach(D),s=R(T),l=z(T,"TD",{class:!0});var ae=x(l);U(i.$$.fragment,ae),ae.forEach(D),p=R(T),g=z(T,"TD",{class:!0});var xe=x(g);U(h.$$.fragment,xe),xe.forEach(D),m=R(T),c=z(T,"TD",{class:!0});var Ce=x(c);U(u.$$.fragment,Ce),Ce.forEach(D),P=R(T),A=z(T,"TD",{class:!0});var le=x(A);U(k.$$.fragment,le),le.forEach(D),B=R(T),Q=z(T,"TD",{class:!0});var Pe=x(Q);U($.$$.fragment,Pe),Pe.forEach(D),K=R(T),C=z(T,"TD",{class:!0});var Ae=x(C);U(E.$$.fragment,Ae),Ae.forEach(D),te=R(T),pe=z(T,"TD",{class:!0});var re=x(pe);U(j.$$.fragment,re),re.forEach(D),we=R(T),oe=z(T,"TD",{class:!0});var et=x(oe);U(he.$$.fragment,et),et.forEach(D),T.forEach(D),ne=R(F),ie=z(F,"TR",{class:!0});var Me=x(ie);me=z(Me,"TD",{class:!0,colspan:!0});var Ee=x(me);be=z(Ee,"DIV",{id:!0,class:!0}),x(be).forEach(D),Ee.forEach(D),ue=R(Me),Me.forEach(D),this.h()},h(){d(n,"scope","row"),d(n,"class","px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"),d(l,"class","min-w-[150px] pr-6 py-4 border-r"),d(g,"class","px-6 py-4"),d(c,"class","px-6 py-4"),d(A,"class","px-6 py-4"),d(Q,"class","px-6 py-4"),d(C,"class","px-6 py-4"),d(pe,"class","px-6 py-4"),d(oe,"class","w-[20px] border-l px-6 py-4"),d(e,"class","bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-[gray]/5 dark:hover:bg-gray-600"),d(be,"id","containerPieceCanvas"+t[26]),d(be,"class","flex flex-col"),d(me,"class","px-6 py-4"),d(me,"colspan","200"),d(ie,"class","bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-[gray]/5 dark:hover:bg-gray-600")},m(F,T){se(F,e,T),_(e,n),_(n,a),_(e,s),_(e,l),Y(i,l,null),_(e,p),_(e,g),Y(h,g,null),_(e,m),_(e,c),Y(u,c,null),_(e,P),_(e,A),Y(k,A,null),_(e,B),_(e,Q),Y($,Q,null),_(e,K),_(e,C),Y(E,C,null),_(e,te),_(e,pe),Y(j,pe,null),_(e,we),_(e,oe),Y(he,oe,null),se(F,ne,T),se(F,ie,T),_(ie,me),_(me,be),_(ie,ue),_e=!0},p(F,T){t=F;const ke={};!r&&T&4&&(r=!0,ke.value=t[24].blank.name,ge(()=>r=!1)),i.$set(ke);const ae={};T&4&&(ae.numSettings={min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength}),!f&&T&4&&(f=!0,ae.value=t[24].blank.size.a,ge(()=>f=!1)),h.$set(ae);const xe={};T&4&&(xe.numSettings={min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength}),!b&&T&4&&(b=!0,xe.value=t[24].blank.size.b,ge(()=>b=!1)),u.$set(xe);const Ce={};T&4&&(Ce.numSettings={min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength}),!S&&T&4&&(S=!0,Ce.value=t[24].blank.size.c,ge(()=>S=!1)),k.$set(Ce);const le={};T&4&&(le.numSettings={min:t[24].blank.size.minLength,max:t[24].blank.size.maxLength}),!ee&&T&4&&(ee=!0,le.value=t[24].blank.size.d,ge(()=>ee=!1)),$.$set(le);const Pe={};T&4&&(Pe.numSettings={min:t[24].blank.size.minAngle,max:t[24].blank.size.maxAngle}),!ce&&T&4&&(ce=!0,Pe.value=t[24].blank.size.leftDownAngle,ge(()=>ce=!1)),E.$set(Pe);const Ae={};T&4&&(Ae.numSettings={min:t[24].blank.size.minAngle,max:t[24].blank.size.maxAngle}),!Ne&&T&4&&(Ne=!0,Ae.value=t[24].blank.size.rightDownAngle,ge(()=>Ne=!1)),j.$set(Ae);const re={};T&4&&(re.numSettings={min:t[24].minVolume,max:t[24].maxVolume}),!Oe&&T&4&&(Oe=!0,re.value=t[24].volume,ge(()=>Oe=!1)),he.$set(re)},i(F){_e||(O(i.$$.fragment,F),O(h.$$.fragment,F),O(u.$$.fragment,F),O(k.$$.fragment,F),O($.$$.fragment,F),O(E.$$.fragment,F),O(j.$$.fragment,F),O(he.$$.fragment,F),_e=!0)},o(F){M(i.$$.fragment,F),M(h.$$.fragment,F),M(u.$$.fragment,F),M(k.$$.fragment,F),M($.$$.fragment,F),M(E.$$.fragment,F),M(j.$$.fragment,F),M(he.$$.fragment,F),_e=!1},d(F){F&&D(e),W(i),W(h),W(u),W(k),W($),W(E),W(j),W(he),F&&D(ne),F&&D(ie)}}}function $i(t){let e;return{c(){e=v("div"),this.h()},l(n){e=z(n,"DIV",{id:!0,class:!0}),x(e).forEach(D),this.h()},h(){d(e,"id","containerWorkPieceCanvas"),d(e,"class","flex flex-col")},m(n,o){se(n,e,o)},p:He,d(n){n&&D(e)}}}function Xi(t){let e,n,o;return{c(){e=v("div"),this.h()},l(a){e=z(a,"DIV",{id:!0,contenteditable:!0}),x(e).forEach(D),this.h()},h(){d(e,"id","log"),d(e,"contenteditable","true"),t[3]===void 0&&Mn(()=>t[19].call(e))},m(a,s){se(a,e,s),t[3]!==void 0&&(e.innerHTML=t[3]),n||(o=ht(e,"input",t[19]),n=!0)},p(a,s){s&8&&a[3]!==e.innerHTML&&(e.innerHTML=a[3])},d(a){a&&D(e),n=!1,o()}}}function Ui(t){let e,n,o;return{c(){e=v("div"),this.h()},l(a){e=z(a,"DIV",{id:!0,contenteditable:!0}),x(e).forEach(D),this.h()},h(){d(e,"id","shortLog"),d(e,"contenteditable","true"),t[4]===void 0&&Mn(()=>t[20].call(e))},m(a,s){se(a,e,s),t[4]!==void 0&&(e.innerHTML=t[4]),n||(o=ht(e,"input",t[20]),n=!0)},p(a,s){s&16&&a[4]!==e.innerHTML&&(e.innerHTML=a[4])},d(a){a&&D(e),n=!1,o()}}}function Yi(t){let e;return{c(){e=v("div"),this.h()},l(n){e=z(n,"DIV",{id:!0,class:!0}),x(e).forEach(D),this.h()},h(){d(e,"id","containerOptimumCombinationsCanvas"),d(e,"class","flex flex-col")},m(n,o){se(n,e,o)},p:He,d(n){n&&D(e)}}}function Wi(t){let e,n,o,a,s,l,i,r,p,g,h,f,m,c,u,b,P,A,k,S,B,Q,$,ee,K,C,E,ce,te,pe,j,Ne,we,oe,he,Oe,ne,ie,me,be,ue,_e,N,De,gt,Ge,Fe,Ze,mt,ve,_t,Je,Se,Qe,pt,ze,wt,je,F,T,ke,ae,xe,Ce,le,Pe,Ae,re,et,Me,Ee,Et,$e,Tt,It,tt,Re,Rt,Pt,Bt,nt,Vt,qt,it,Be,Lt,st,Ve,Ht,ot,qe,At,Nt,en;function Kn(y){t[7](y)}let tn={label:"Имя",id:"nameWorkPiece",type:"text",placeholder:"Имя исходной заготовки...",required:!0};t[1].name!==void 0&&(tn.value=t[1].name),c=new St({props:tn}),fe.push(()=>de(c,"value",Kn)),A=new St({props:{label:"Длина, мм.",id:"lengthRawPiece",type:"number",placeholder:"Длина исходной заготовки(в миллиметрах)...",value:t[1].size.a,onChange:t[8],required:!0}});function Gn(y){t[9](y)}let nn={label:"Ширина (h), мм.",id:"widthRawPiece",type:"number",placeholder:"Ширина исходной заготовки (в миллиметрах)...",required:!0};t[1].size.h!==void 0&&(nn.value=t[1].size.h),B=new St({props:nn}),fe.push(()=>de(B,"value",Gn));function Zn(y){t[10](y)}let sn={label:"Припуск, мм.",id:"stockSawing",type:"number",placeholder:"Припуск при распиле (в миллиметрах)...",required:!0};t[0]!==void 0&&(sn.value=t[0]),K=new St({props:sn}),fe.push(()=>de(K,"value",Zn)),j=new mi({props:{src:Di,class:"max-h-72 m-auto"}});let Xe=t[2],L=[];for(let y=0;y<Xe.length;y+=1)L[y]=Hn(Ln(t,Xe,y));const Jn=y=>M(L[y],1,1,()=>{L[y]=null});return Re=new Ft({props:{title:"Варианты раскроя",isOpen:!0,$$slots:{default:[$i]},$$scope:{ctx:t}}}),Be=new Ft({props:{title:"Результаты вычислений",$$slots:{default:[Xi]},$$scope:{ctx:t}}}),Ve=new Ft({props:{title:"Краткие результаты",$$slots:{default:[Ui]},$$scope:{ctx:t}}}),qe=new Ft({props:{title:"Оптимальные варианты раскроя",$$slots:{default:[Yi]},$$scope:{ctx:t}}}),{c(){e=v("div"),n=v("div"),o=v("main"),a=v("div"),s=v("div"),l=v("section"),i=v("div"),r=v("h2"),p=Z("Параметры исходной заготовки для распила"),g=I(),h=v("form"),f=v("div"),m=v("div"),X(c.$$.fragment),b=I(),P=v("div"),X(A.$$.fragment),k=I(),S=v("div"),X(B.$$.fragment),$=I(),ee=v("div"),X(K.$$.fragment),E=I(),ce=v("h2"),te=Z("Схема детали"),pe=I(),X(j.$$.fragment),Ne=I(),we=v("div"),oe=v("button"),he=Z("Запустить расчет"),Oe=I(),ne=v("div"),ie=v("h2"),me=Z("Список требуемых деталей из заказа"),be=I(),ue=v("table"),_e=v("thead"),N=v("tr"),De=v("th"),gt=Z("№"),Ge=I(),Fe=v("th"),Ze=Z("Имя"),mt=I(),ve=v("th"),_t=Z("Длина верхнего основания (a), мм."),Je=I(),Se=v("th"),Qe=Z("Длина правой стороны (b), мм."),pt=I(),ze=v("th"),wt=Z("Длина нижнего основания (c), мм."),je=I(),F=v("th"),T=Z("Длина левой стороны (d), мм."),ke=I(),ae=v("th"),xe=Z("Левый угол при нижнем основании (f), °"),Ce=I(),le=v("th"),Pe=Z("Правый угол при нижнем основании (e), °"),Ae=I(),re=v("th"),et=Z("Количество, шт."),Me=I(),Ee=v("tbody");for(let y=0;y<L.length;y+=1)L[y].c();Et=I(),$e=v("button"),Tt=Z("+ Добавить деталь"),It=I(),tt=v("div"),X(Re.$$.fragment),Rt=I(),Pt=v("hr"),Bt=I(),nt=v("h2"),Vt=Z("Результаты"),qt=I(),it=v("div"),X(Be.$$.fragment),Lt=I(),st=v("div"),X(Ve.$$.fragment),Ht=I(),ot=v("div"),X(qe.$$.fragment),this.h()},l(y){e=z(y,"DIV",{class:!0});var V=x(e);n=z(V,"DIV",{class:!0});var ye=x(n);o=z(ye,"MAIN",{class:!0});var at=x(o);a=z(at,"DIV",{class:!0});var bt=x(a);s=z(bt,"DIV",{class:!0});var q=x(s);l=z(q,"SECTION",{class:!0});var Dt=x(l);i=z(Dt,"DIV",{class:!0});var Ue=x(i);r=z(Ue,"H2",{class:!0});var vt=x(r);p=J(vt,"Параметры исходной заготовки для распила"),vt.forEach(D),g=R(Ue),h=z(Ue,"FORM",{action:!0});var zt=x(h);f=z(zt,"DIV",{class:!0});var H=x(f);m=z(H,"DIV",{class:!0});var xt=x(m);U(c.$$.fragment,xt),xt.forEach(D),b=R(H),P=z(H,"DIV",{class:!0});var on=x(P);U(A.$$.fragment,on),on.forEach(D),k=R(H),S=z(H,"DIV",{class:!0});var an=x(S);U(B.$$.fragment,an),an.forEach(D),$=R(H),ee=z(H,"DIV",{class:!0});var ln=x(ee);U(K.$$.fragment,ln),ln.forEach(D),H.forEach(D),zt.forEach(D),Ue.forEach(D),Dt.forEach(D),E=R(q),ce=z(q,"H2",{class:!0});var rn=x(ce);te=J(rn,"Схема детали"),rn.forEach(D),pe=R(q),U(j.$$.fragment,q),Ne=R(q),we=z(q,"DIV",{class:!0});var hn=x(we);oe=z(hn,"BUTTON",{class:!0});var cn=x(oe);he=J(cn,"Запустить расчет"),cn.forEach(D),hn.forEach(D),Oe=R(q),ne=z(q,"DIV",{class:!0});var lt=x(ne);ie=z(lt,"H2",{class:!0});var un=x(ie);me=J(un,"Список требуемых деталей из заказа"),un.forEach(D),be=R(lt),ue=z(lt,"TABLE",{class:!0});var yt=x(ue);_e=z(yt,"THEAD",{class:!0});var fn=x(_e);N=z(fn,"TR",{});var G=x(N);De=z(G,"TH",{scope:!0,class:!0});var dn=x(De);gt=J(dn,"№"),dn.forEach(D),Ge=R(G),Fe=z(G,"TH",{scope:!0,class:!0});var gn=x(Fe);Ze=J(gn,"Имя"),gn.forEach(D),mt=R(G),ve=z(G,"TH",{scope:!0,class:!0});var mn=x(ve);_t=J(mn,"Длина верхнего основания (a), мм."),mn.forEach(D),Je=R(G),Se=z(G,"TH",{scope:!0,class:!0});var _n=x(Se);Qe=J(_n,"Длина правой стороны (b), мм."),_n.forEach(D),pt=R(G),ze=z(G,"TH",{scope:!0,class:!0});var pn=x(ze);wt=J(pn,"Длина нижнего основания (c), мм."),pn.forEach(D),je=R(G),F=z(G,"TH",{scope:!0,class:!0});var wn=x(F);T=J(wn,"Длина левой стороны (d), мм."),wn.forEach(D),ke=R(G),ae=z(G,"TH",{scope:!0,class:!0});var bn=x(ae);xe=J(bn,"Левый угол при нижнем основании (f), °"),bn.forEach(D),Ce=R(G),le=z(G,"TH",{scope:!0,class:!0});var Dn=x(le);Pe=J(Dn,"Правый угол при нижнем основании (e), °"),Dn.forEach(D),Ae=R(G),re=z(G,"TH",{scope:!0,class:!0});var vn=x(re);et=J(vn,"Количество, шт."),vn.forEach(D),G.forEach(D),fn.forEach(D),Me=R(yt),Ee=z(yt,"TBODY",{});var zn=x(Ee);for(let Ot=0;Ot<L.length;Ot+=1)L[Ot].l(zn);zn.forEach(D),yt.forEach(D),Et=R(lt),$e=z(lt,"BUTTON",{class:!0});var xn=x($e);Tt=J(xn,"+ Добавить деталь"),xn.forEach(D),lt.forEach(D),It=R(q),tt=z(q,"DIV",{class:!0});var Cn=x(tt);U(Re.$$.fragment,Cn),Cn.forEach(D),Rt=R(q),Pt=z(q,"HR",{class:!0}),Bt=R(q),nt=z(q,"H2",{class:!0});var Pn=x(nt);Vt=J(Pn,"Результаты"),Pn.forEach(D),qt=R(q),it=z(q,"DIV",{class:!0});var An=x(it);U(Be.$$.fragment,An),An.forEach(D),Lt=R(q),st=z(q,"DIV",{class:!0});var yn=x(st);U(Ve.$$.fragment,yn),yn.forEach(D),Ht=R(q),ot=z(q,"DIV",{class:!0});var Fn=x(ot);U(qe.$$.fragment,Fn),Fn.forEach(D),q.forEach(D),bt.forEach(D),at.forEach(D),ye.forEach(D),V.forEach(D),this.h()},h(){d(r,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),d(m,"class","sm:col-span-2"),d(P,"class","w-full"),d(S,"class","w-full"),d(ee,"class","w-full"),d(f,"class","grid gap-4 sm:grid-cols-2 sm:gap-6"),d(h,"action","#"),d(i,"class","py-8 px-4 mx-auto max-w-2xl lg:py-16"),d(l,"class","bg-white dark:bg-gray-900"),d(ce,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),d(oe,"class","inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center float-right text-white bg-primary-600 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-700"),d(we,"class","relative overflow-x-auto"),d(ie,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),d(De,"scope","col"),d(De,"class","px-6 py-3"),d(Fe,"scope","col"),d(Fe,"class","px-6 py-3"),d(ve,"scope","col"),d(ve,"class","px-6 py-3"),d(Se,"scope","col"),d(Se,"class","px-6 py-3"),d(ze,"scope","col"),d(ze,"class","px-6 py-3"),d(F,"scope","col"),d(F,"class","px-6 py-3"),d(ae,"scope","col"),d(ae,"class","px-6 py-3"),d(le,"scope","col"),d(le,"class","px-6 py-3"),d(re,"scope","col"),d(re,"class","px-6 py-3"),d(_e,"class","text-xs text-gray-600 uppercase bg-gray-50 dark:bg-gray-600 dark:text-gray-400"),d(ue,"class","w-full text-sm text-left text-gray-500 dark:text-gray-400"),d($e,"class","inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center float-right text-white bg-primary-600 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-700"),d(ne,"class","relative overflow-x-auto"),d(tt,"class","mt-5"),d(Pt,"class","my-10"),d(nt,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),d(it,"class","mt-5"),d(st,"class","mt-5"),d(ot,"class","mt-5"),d(s,"class","flex-auto max-w-8xl min-w-0 pt-6 lg:px-8 lg:pt-8 pb:12 xl:pb-24 lg:pb-16"),d(a,"class","flex w-full"),d(o,"class","flex-auto w-full min-w-0 lg:static lg:max-h-full lg:overflow-visible"),d(n,"class","lg:flex"),d(e,"class","w-full px-4 mx-auto max-w-8xl")},m(y,V){se(y,e,V),_(e,n),_(n,o),_(o,a),_(a,s),_(s,l),_(l,i),_(i,r),_(r,p),_(i,g),_(i,h),_(h,f),_(f,m),Y(c,m,null),_(f,b),_(f,P),Y(A,P,null),_(f,k),_(f,S),Y(B,S,null),_(f,$),_(f,ee),Y(K,ee,null),_(s,E),_(s,ce),_(ce,te),_(s,pe),Y(j,s,null),_(s,Ne),_(s,we),_(we,oe),_(oe,he),_(s,Oe),_(s,ne),_(ne,ie),_(ie,me),_(ne,be),_(ne,ue),_(ue,_e),_(_e,N),_(N,De),_(De,gt),_(N,Ge),_(N,Fe),_(Fe,Ze),_(N,mt),_(N,ve),_(ve,_t),_(N,Je),_(N,Se),_(Se,Qe),_(N,pt),_(N,ze),_(ze,wt),_(N,je),_(N,F),_(F,T),_(N,ke),_(N,ae),_(ae,xe),_(N,Ce),_(N,le),_(le,Pe),_(N,Ae),_(N,re),_(re,et),_(ue,Me),_(ue,Ee);for(let ye=0;ye<L.length;ye+=1)L[ye]&&L[ye].m(Ee,null);_(ne,Et),_(ne,$e),_($e,Tt),_(s,It),_(s,tt),Y(Re,tt,null),_(s,Rt),_(s,Pt),_(s,Bt),_(s,nt),_(nt,Vt),_(s,qt),_(s,it),Y(Be,it,null),_(s,Lt),_(s,st),Y(Ve,st,null),_(s,Ht),_(s,ot),Y(qe,ot,null),At=!0,Nt||(en=[ht(oe,"click",t[6]),ht($e,"click",t[5])],Nt=!0)},p(y,[V]){const ye={};!u&&V&2&&(u=!0,ye.value=y[1].name,ge(()=>u=!1)),c.$set(ye);const at={};V&2&&(at.value=y[1].size.a),V&2&&(at.onChange=y[8]),A.$set(at);const bt={};!Q&&V&2&&(Q=!0,bt.value=y[1].size.h,ge(()=>Q=!1)),B.$set(bt);const q={};if(!C&&V&1&&(C=!0,q.value=y[0],ge(()=>C=!1)),K.$set(q),V&4){Xe=y[2];let H;for(H=0;H<Xe.length;H+=1){const xt=Ln(y,Xe,H);L[H]?(L[H].p(xt,V),O(L[H],1)):(L[H]=Hn(xt),L[H].c(),O(L[H],1),L[H].m(Ee,null))}for(ci(),H=Xe.length;H<L.length;H+=1)Jn(H);ai()}const Dt={};V&134217728&&(Dt.$$scope={dirty:V,ctx:y}),Re.$set(Dt);const Ue={};V&134217736&&(Ue.$$scope={dirty:V,ctx:y}),Be.$set(Ue);const vt={};V&134217744&&(vt.$$scope={dirty:V,ctx:y}),Ve.$set(vt);const zt={};V&134217728&&(zt.$$scope={dirty:V,ctx:y}),qe.$set(zt)},i(y){if(!At){O(c.$$.fragment,y),O(A.$$.fragment,y),O(B.$$.fragment,y),O(K.$$.fragment,y),O(j.$$.fragment,y);for(let V=0;V<Xe.length;V+=1)O(L[V]);O(Re.$$.fragment,y),O(Be.$$.fragment,y),O(Ve.$$.fragment,y),O(qe.$$.fragment,y),At=!0}},o(y){M(c.$$.fragment,y),M(A.$$.fragment,y),M(B.$$.fragment,y),M(K.$$.fragment,y),M(j.$$.fragment,y),L=L.filter(Boolean);for(let V=0;V<L.length;V+=1)M(L[V]);M(Re.$$.fragment,y),M(Be.$$.fragment,y),M(Ve.$$.fragment,y),M(qe.$$.fragment,y),At=!1},d(y){y&&D(e),W(c),W(A),W(B),W(K),W(j),li(L,y),W(Re),W(Be),W(Ve),W(qe),Nt=!1,On(en)}}}let rt=200;function Ki(t,e,n){let o=5,a=new We({name:"Основная",size:new Ye({a:5e3,c:5e3,h:rt,maxLength:4900})}),s=[new Ct({blank:new We({name:"Д. №1",size:new Ye({a:500,c:1e3,leftDownAngle:90,rightDownAngle:0,h:rt,maxLength:a.size.maxLength})}),volume:10}),new Ct({blank:new We({name:"Д. №2",size:new Ye({a:700,c:1400,leftDownAngle:45,h:rt,maxLength:a.size.maxLength})}),volume:15}),new Ct({blank:new We({name:"Д. №2",size:new Ye({a:700,c:700,leftDownAngle:80,h:rt,maxLength:a.size.maxLength})}),volume:20}),new Ct({blank:new We({name:"Д. №3",size:new Ye({a:1e3,c:600,leftDownAngle:45,h:rt,maxLength:a.size.maxLength})}),volume:30})];ri(()=>{s.forEach((C,E)=>{Mi(`containerPieceCanvas${E}`,C.blank)})});const l=()=>{const C=new Ct({blank:new We({name:`Д. №${s.length+1}`,size:new Ye({a:0,c:0,h:rt})}),volume:0});n(2,s=[...s,C])};let i,r="",p="";const g=C=>{const E=[],ce=te=>te.volume>0&&te.blank.size.a>0&&te.blank.size.c>0;return C.forEach(te=>{te.blank.size.h=a.size.h,ce(te)&&E.push(te)}),E},h=()=>{o>=0&&a.name.length>0&&a.size.a&&a.size.c&&a.size.h?(n(2,s=g(s)),s.length?(i=Bi({stockSawing:o,rawWorkPiece:a,listOrders:s}),console.log(i),qn("containerWorkPieceCanvas",o,a,i.drawCombinations),qn("containerOptimumCombinationsCanvas",o,a,i.optimumDrawCombinations),n(4,p=i.listLogMessages.slice(i.listLogMessages.findLastIndex(C=>C.includes("Результаты вычисления задачи поиска решения оптимального раскроя")),i.listLogMessages.findLastIndex(C=>C.includes("Остатки: "))+1).map(C=>C.includes("===>")?`<p class='mt-2 font-bold'>${C}</p>`:`<p '>${C}</p>`).join("")),n(3,r=i.listLogMessages.map(C=>C.includes("===>")?`<p class='mt-2 font-bold'>${C}</p>`:`<p '>${C}</p>`).join(""))):alert("Внимание! Нет валидных деталей для выполнения алгоритма. Скорее всего не все поля были заполнены.")):alert("Внимание! Не корректно заполнены параметры исходной заготовки.")};hi(()=>{h()});function f(C){t.$$.not_equal(a.name,C)&&(a.name=C,n(1,a))}const m=C=>a.size.changeBothBases(C);function c(C){t.$$.not_equal(a.size.h,C)&&(a.size.h=C,n(1,a))}function u(C){o=C,n(0,o)}function b(C,E){t.$$.not_equal(E.blank.name,C)&&(E.blank.name=C,n(2,s))}function P(C,E){t.$$.not_equal(E.blank.size.a,C)&&(E.blank.size.a=C,n(2,s))}function A(C,E){t.$$.not_equal(E.blank.size.b,C)&&(E.blank.size.b=C,n(2,s))}function k(C,E){t.$$.not_equal(E.blank.size.c,C)&&(E.blank.size.c=C,n(2,s))}function S(C,E){t.$$.not_equal(E.blank.size.d,C)&&(E.blank.size.d=C,n(2,s))}function B(C,E){t.$$.not_equal(E.blank.size.leftDownAngle,C)&&(E.blank.size.leftDownAngle=C,n(2,s))}function Q(C,E){t.$$.not_equal(E.blank.size.rightDownAngle,C)&&(E.blank.size.rightDownAngle=C,n(2,s))}function $(C,E){t.$$.not_equal(E.volume,C)&&(E.volume=C,n(2,s))}function ee(){r=this.innerHTML,n(3,r)}function K(){p=this.innerHTML,n(4,p)}return[o,a,s,r,p,l,h,f,m,c,u,b,P,A,k,S,B,Q,$,ee,K]}class es extends ut{constructor(e){super(),ft(this,e,Ki,Wi,dt,{})}}export{es as component};
