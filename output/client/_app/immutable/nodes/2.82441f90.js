var jt=Object.defineProperty;var Lt=(t,e,n)=>e in t?jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var R=(t,e,n)=>(Lt(t,typeof e!="symbol"?e+"":e,n),n);import{S as Oe,i as Be,s as He,e as Vt,b as he,G as Te,h as _,C as Ot,E as ct,F as Bt,k,l as E,W as Ht,P as $t,a2 as ut,a as z,m as I,c as q,n as b,X as h,a3 as Wt,K as en,L as Ve,Q as tn,R as Kt,q as G,r as U,u as nn,w as oe,a4 as ce,y as Y,z as J,A as Z,a5 as ue,g as O,d as W,B as M,T as rn,f as sn,a0 as ln,v as an}from"../chunks/index.6d77475c.js";import{c as Ke}from"../chunks/Indicator.svelte_svelte_type_style_lang.e2c519f7.js";function on(t){let e,n,i,s=[t[11],{class:n=Ke(t[5],t[3],t[4],t[8],t[10].class)},{src:i=t[1]},{srcset:t[2]},{alt:t[7]}],r={};for(let o=0;o<s.length;o+=1)r=ct(r,s[o]);return{c(){e=k("img"),this.h()},l(o){e=E(o,"IMG",{class:!0,src:!0,srcset:!0,alt:!0}),this.h()},h(){Ht(e,r)},m(o,l){he(o,e,l)},p(o,l){Ht(e,r=$t(s,[l&2048&&o[11],l&1336&&n!==(n=Ke(o[5],o[3],o[4],o[8],o[10].class))&&{class:n},l&2&&!ut(e.src,i=o[1])&&{src:i},l&4&&{srcset:o[2]},l&128&&{alt:o[7]}]))},d(o){o&&_(e)}}}function cn(t){let e,n,i,s,r,o;return{c(){e=k("figure"),n=k("img"),r=z(),o=k("figcaption"),this.h()},l(l){e=E(l,"FIGURE",{class:!0});var a=I(e);n=E(a,"IMG",{class:!0,src:!0,srcset:!0,alt:!0}),r=q(a),o=E(a,"FIGCAPTION",{class:!0});var m=I(o);m.forEach(_),a.forEach(_),this.h()},h(){b(n,"class",i=Ke(t[5],t[3],t[4],t[8],t[10].class)),ut(n.src,s=t[1])||b(n,"src",s),b(n,"srcset",t[2]),b(n,"alt",t[7]),b(o,"class",t[9]),b(e,"class",t[6])},m(l,a){he(l,e,a),h(e,n),h(e,r),h(e,o),o.innerHTML=t[0]},p(l,a){a&1336&&i!==(i=Ke(l[5],l[3],l[4],l[8],l[10].class))&&b(n,"class",i),a&2&&!ut(n.src,s=l[1])&&b(n,"src",s),a&4&&b(n,"srcset",l[2]),a&128&&b(n,"alt",l[7]),a&1&&(o.innerHTML=l[0]),a&512&&b(o,"class",l[9]),a&64&&b(e,"class",l[6])},d(l){l&&_(e)}}}function un(t){let e;function n(r,o){return r[0]?cn:on}let i=n(t),s=i(t);return{c(){s.c(),e=Vt()},l(r){s.l(r),e=Vt()},m(r,o){s.m(r,o),he(r,e,o)},p(r,[o]){i===(i=n(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e.parentNode,e)))},i:Te,o:Te,d(r){s.d(r),r&&_(e)}}}function fn(t,e,n){const i=["caption","src","srcset","size","alignment","imgClass","figClass","alt","effect","captionClass"];let s=Ot(e,i),{caption:r=void 0}=e,{src:o=void 0}=e,{srcset:l=void 0}=e,{size:a="max-w-full"}=e,{alignment:m=""}=e,{imgClass:g="h-auto"}=e,{figClass:c="max-w-lg"}=e,{alt:d=""}=e,{effect:w=""}=e,{captionClass:f="mt-2 text-sm text-center text-gray-500 dark:text-gray-400"}=e;return t.$$set=u=>{n(10,e=ct(ct({},e),Bt(u))),n(11,s=Ot(e,i)),"caption"in u&&n(0,r=u.caption),"src"in u&&n(1,o=u.src),"srcset"in u&&n(2,l=u.srcset),"size"in u&&n(3,a=u.size),"alignment"in u&&n(4,m=u.alignment),"imgClass"in u&&n(5,g=u.imgClass),"figClass"in u&&n(6,c=u.figClass),"alt"in u&&n(7,d=u.alt),"effect"in u&&n(8,w=u.effect),"captionClass"in u&&n(9,f=u.captionClass)},e=Bt(e),[r,o,l,a,m,g,c,d,w,f,e,s]}class hn extends Oe{constructor(e){super(),Be(this,e,fn,un,He,{caption:0,src:1,srcset:2,size:3,alignment:4,imgClass:5,figClass:6,alt:7,effect:8,captionClass:9})}}class Ne{constructor(e){R(this,"_a",0);R(this,"_b",0);R(this,"_c",0);R(this,"_d",0);R(this,"_h",0);R(this,"_leftDownAngle",0);R(this,"_rightDownAngle",0);this._a=e.a,this._b=e.b??this._b,this._c=e.c,this._d=e.d??this._d,this._h=e.h,this._leftDownAngle=e.leftDownAngle??this._leftDownAngle,this._rightDownAngle=e.rightDownAngle??this._rightDownAngle}changeBothLength(e){this.a=e,this.c=e}get a(){return this._a}set a(e){this._a=Number(e)}get b(){return this._b}set b(e){this._b=Number(e)}get c(){return this._c}set c(e){this._c=Number(e)}get d(){return this._d}set d(e){this._d=Number(e)}get h(){return this._h}set h(e){this._h=Number(e)}get leftDownAngle(){return this._leftDownAngle}set leftDownAngle(e){this._leftDownAngle=Number(e)}get rightDownAngle(){return this._rightDownAngle}set rightDownAngle(e){this._rightDownAngle=Number(e)}}class Se{constructor(e){R(this,"name");R(this,"size");this.name=e.name,this.size=e.size}get square(){return this.size.h*((this.size.a+this.size.c)/2)}}class Ge{constructor(e){R(this,"blank");R(this,"_volume");this.blank=new Se(e.blank),this._volume=e.volume}get volume(){return this._volume}set volume(e){this._volume=Number(e)}}const dn="/_app/immutable/assets/workPiece.321ca12f.png";function mn(t){let e,n,i;return{c(){e=k("input"),this.h()},l(s){e=E(s,"INPUT",{id:!0,type:!0,name:!0,placeholder:!0,class:!0}),this.h()},h(){b(e,"id",t[1]),b(e,"type","text"),b(e,"name",t[1]),e.required=t[3],b(e,"placeholder",t[2]),b(e,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:bg-[white] focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500")},m(s,r){he(s,e,r),Wt(e,t[0]),n||(i=[en(t[5].call(null,e)),Ve(e,"input",t[7]),Ve(e,"change",function(){tn(t[4]?t[8]:null)&&(t[4]?t[8]:null).apply(this,arguments)})],n=!0)},p(s,[r]){t=s,r&2&&b(e,"id",t[1]),r&2&&b(e,"name",t[1]),r&8&&(e.required=t[3]),r&4&&b(e,"placeholder",t[2]),r&1&&e.value!==t[0]&&Wt(e,t[0])},i:Te,o:Te,d(s){s&&_(e),n=!1,Kt(i)}}}function bn(t,e,n){let{id:i=""}=e,{placeholder:s=""}=e,{type:r="text"}=e,{required:o=!1}=e,{value:l}=e,{onChange:a=void 0}=e;const m=d=>{d.type=r};function g(){l=this.value,n(0,l)}const c=d=>a(d.target.value);return t.$$set=d=>{"id"in d&&n(1,i=d.id),"placeholder"in d&&n(2,s=d.placeholder),"type"in d&&n(6,r=d.type),"required"in d&&n(3,o=d.required),"value"in d&&n(0,l=d.value),"onChange"in d&&n(4,a=d.onChange)},[l,i,s,o,a,m,r,g,c]}class Pe extends Oe{constructor(e){super(),Be(this,e,bn,mn,He,{id:1,placeholder:2,type:6,required:3,value:0,onChange:4})}}const gn=(t,e,n)=>{const i=[],s=[],r=e.map(a=>a.blank.square+n),o=Math.min(...r),l=(a,m,g,c)=>{for(let d=a;d<m.length;d++){const w=m[d].blank.square+n,f=g-w;c.push(m[d].blank),f>=o?l(d,m,f,c):f<o&&f>=0&&i.push([...c]),c.pop()}};return l(0,e,t,s),i};class Qt{constructor(e){R(this,"head",0);R(this,"body",[]);R(this,"tail",0);e&&(this.head=e.head,this.body=[...e.body],this.tail=e.tail)}}const pn=(t,e)=>{const n=[];return e.forEach(i=>{const s=new Qt;s.head=i.blank.square,t.forEach(r=>{s.body.push(r.filter(o=>o.square===i.blank.square).length)}),s.tail=i.volume,n.push(s)}),n},wn=t=>{const e=t.map(s=>new Qt(s)),n=t.map(()=>0),i=(s,r)=>(r[s]=-1,r);return t.forEach((s,r)=>{const o=s.body.concat(i(r,[...n]));e[r].body=o.map(l=>l*-1),e[r].tail*=-1}),e};function ft(t,e=!1){const n=[],i=t[0].body.length,s=()=>{let r="V |";for(let o=1;o<=i;o++)r+=` X${o} `;return r+="| P",r};return n.push(s()),t.forEach(r=>{let o=`${r.head.toFixed(3)} |`;r.body.forEach(l=>{o+=l>-1?` ${l}  `:`${l}  `}),o+=e?`= ${r.tail}`:`>= ${r.tail}`,n.push(o)}),n}const se=t=>{const n=[];let i="   |  b  | ";t.rows[0].rowCoefficients.forEach((l,a)=>{i+=` X${a+1} `}),n.push(i),t.rows.forEach(l=>{const a=l.b.toFixed(2);let m=l.b>=0?`X${l.basisIndex+1}| ${a} | `:`X${l.basisIndex+1} | ${a} | `;l.rowCoefficients.forEach(g=>{const c=g.toFixed(2);m+=g>-1?` ${c} `:`${c} `}),n.push(m)});const s=t.rowF;let o=`F  | ${s.b.toFixed(2)} | `;return s.rowCoefficients.forEach(l=>{const a=l.toFixed(2);o+=l>-1?` ${a} `:`${a} `}),n.push(o),n};function _n(t,e){const s=[`Площадь не обрезанной заготовки: (${t.size.a} * ${t.size.h}) = ${t.square.toFixed(3)}`,"Имя | Площадь | Объем"];return e.forEach(r=>{const o=`${r.blank.name} | ${r.blank.square.toFixed(3)} | ${r.volume}`;s.push(o)}),s}function Xt(t,e,n,i){const s=[];s.push("===> Результаты вычисления задачи поиска решения оптимального раскроя"),s.push(`
===> Исходные данные`),s.push(`Площадь(длина) сырья для раскроя: ${e.square.toFixed(3)}`),s.push("Заказ:"),n.forEach((m,g)=>{s.push(`N${g+1}) Площадь(длина) обреза: ${m.blank.square.toFixed(3)}; Количество: ${m.volume}`)}),s.push(`
===> Варианты раскроя изделия исходя из начальных условий (матрица).`),s.push("X - варианты раскроя."),s.push("V - площадь(длина) обреза."),s.push("Пересечение V/X -  количество распилов длины V по отношению к длине сырья для раскроя."),ft(i).forEach(m=>s.push(m)),s.push(`
===> Оптимальный раскрой материала`);let r=0,o=0;const l=i[0].body.length-1;t.rows.forEach(m=>{if(m.basisIndex<=l){const g=`Количество распилов варианта X${m.basisIndex+1}: ${m.b.toFixed(3)} шт.`;s.push(g),r+=m.b,i.forEach(c=>{const d=c.body[m.basisIndex];d&&(o+=m.b*d*c.head)})}});const a=r*e.square;return s.push(`
Количество распилов: ${r} шт.`),s.push(`Полезная площадь распилов: ${o.toFixed(1)} м²`),s.push(`Общая площадь требуемых заготовок для распилов: ${a.toFixed(1)} м²`),s.push(`Остатки: ${(a-o).toFixed(1)} м²`),s}class dt{constructor(e){R(this,"basisIndex",0);R(this,"rowCoefficients",[]);R(this,"b",0);e&&(this.basisIndex=e.basisIndex,this.rowCoefficients=[...e.rowCoefficients],this.b=e.b)}}class ht{constructor(e){R(this,"rowCoefficients",[]);R(this,"b",0);e&&(this.rowCoefficients=[...e.rowCoefficients],this.b=e.b)}}class fe{constructor(e){R(this,"rows",[]);R(this,"rowF",new ht);e&&(this.rowF=new ht(e.rowF),this.rows=e.rows.map(n=>new dt(n)))}}const vn=t=>{const e=new fe,n=[];for(let i=t.length;i>0;i--)n.push(t[0].body.length-i);return n.forEach((i,s)=>{const r=t[s],o=new dt({basisIndex:i,rowCoefficients:r.body,b:r.tail});e.rows.push(o)}),e.rowF=new ht({b:0,rowCoefficients:[]}),t[0].body.forEach((i,s)=>{const r=n.includes(s);e.rowF.rowCoefficients.push(r?0:1)}),e},mt=(t,e)=>{const n=e.rowIndex,i=e.colIndex,s=new fe(t);s.rows[n].basisIndex=i;const r=t.rows[n],o=r.rowCoefficients,l=o[i];t.rows.forEach((g,c)=>{const d=s.rows[c];if(c!==n){const w=g.rowCoefficients[i],f=r.b;d.b=g.b-w*f/l,d.rowCoefficients=g.rowCoefficients.map((u,C)=>{if(C===i)return 0;{const F=r.rowCoefficients[C];return u-w*F/l}})}else d.b=g.b/l,d.rowCoefficients=g.rowCoefficients.map(w=>w/l)});const a=s.rowF,m=t.rowF.rowCoefficients[i];return a.b=t.rowF.b-r.b*m/l,t.rowF.rowCoefficients.forEach((g,c)=>{c!==i?a.rowCoefficients[c]=g-o[c]*m/l:a.rowCoefficients[c]=0}),s};function Cn(t,e){const n=(l,a=!0)=>{const m=w=>{let f=0;const u=w.rows;return u.forEach((C,F)=>{if(a&&C.b<0){const p=u[f].b>=0?0:u[f].b*-1;f=C.b*-1>p?F:f}else if(!a){const p=u[f].b>=0?u[f].b:u[f].b*-1;f=(C.b>=0?C.b:C.b*-1)>p?F:f}}),f},g=(w,f)=>{const u=f.rows[w].rowCoefficients;let C=0;return u.forEach((F,p)=>{const y=u[C]>=0?u[C]:u[C]*-1;C=(F>=0?F:F*-1)>y?p:C}),C},c=m(l),d=g(c,l);return{rowIndex:c,colIndex:d}},i=l=>![...l.rows].filter(a=>a.b<0).length;let s=1,r=new fe(t),o=i(r);for(;!o;){e.push(`
===> Начало итерации N${s}`),e.push(`
===> Этап 2. Шаг 1. Исходная таблица`),e.push(...se(r)),e.push(`
===> Этап 2. Шаг 2. Проверка свободных членов на допустимость решения`),e.push(`Все свободные члены >= 0 ? Ответ:${o}`);const l=n(r);e.push(`
===> Этап 2. Шаг 3. Поиск ведущей строки и столбца`),e.push(`Строка: ${l.rowIndex}, столбец: ${l.colIndex}`),r=mt(r,l),e.push(`
===> Этап 2. Шаг 4. Расчет новой симплекс таблицы `),e.push(...se(r)),e.push(`
===> Конец итерации N${s}`),o=i(r),s++}return r}function kn(t,e){const n=(l,a=!0)=>{const m=(w,f)=>{let u=0;return f.forEach((C,F)=>{const p=C.b/C.rowCoefficients[w];if(p>=0){const y=f[u].b/f[u].rowCoefficients[w];u=p<y||y<0?F:u}}),u},c=(w=>{let f=0;return w.forEach((u,C)=>{if(a&&u<0){const F=w[f]*-1;f=u*-1>F?C:f}else if(!a){const F=w[f]>=0?w[f]:w[f]*-1;f=(u>=0?u:u*-1)>F?C:f}}),f})(l.rowF.rowCoefficients);return{rowIndex:m(c,l.rows),colIndex:c}},i=l=>![...l.rowF.rowCoefficients].filter(a=>a<0).length;let s=1,r=new fe(t),o=i(r);for(;!o;){e.push(`
===> Начало итерации N${s}`),e.push(`
===> Этап 3. Шаг 1. Исходная таблица`),e.push(...se(r)),e.push(`
===> Этап 3. Шаг 2. Проверка коэффициентов функции F на допустимость решения.`),e.push(`Все коэффициентов >= 0 ? Ответ:${o}`);const l=n(r);e.push(`
===> Этап 3. Шаг 3. Поиск ведущей строки и столбца для коэффициентов функции F`),e.push(`Строка: ${l.rowIndex}, столбец: ${l.colIndex}`),r=mt(r,l),e.push(`
===> Этап 3. Шаг 4. Расчет новой симплекс таблицы `),e.push(...se(r)),e.push(`
===> Конец итерации N${s}`),o=i(r),s++}return r}function En(t,e){const n=g=>!g.rows.filter(c=>+c.b.toFixed(2)%1!==0).length,i=(g,c=2)=>{const d=new fe(g);return d.rows.forEach(w=>{w.b=Number(w.b.toFixed(c)),w.rowCoefficients=w.rowCoefficients.map(f=>Number(f.toFixed(c)))}),d.rowF.rowCoefficients=d.rowF.rowCoefficients.map(w=>Number(w.toFixed(c))),d},s=g=>{const c=u=>{let C=0,F=0;return u.rows.forEach((p,y)=>{const S=p.b%1;S>C&&(C=S,F=y)}),e.push(`Максимальная дробная часть:${C}`),e.push(`Индекс максимальной дробной части:${F}`),F},d=u=>{const C=u%1;return u>=0?-C:C<0?-1-C:C},w=c(g),f=new dt(g.rows[w]);return f.b=d(f.b),f.rowCoefficients=[...f.rowCoefficients.map(u=>d(u)),1],f},r=g=>{const c=(d,w)=>{let f=0;return w.forEach((u,C)=>{const F=d/u;if(F>0){const p=u/w[f];f=F<p||p<0?C:f}}),f};return{rowIndex:a.rows.length-1,colIndex:c(g.b,g.rowCoefficients)}},o=(g,c)=>{const d=f=>{const u=new fe(f);return u.rows.forEach(C=>C.rowCoefficients.push(0)),u.rowF.rowCoefficients.push(0),u},w=new fe(g);return a=d(a),w.rows.push(c),w};let l=1,a=new fe(t),m=n(a);for(e.push(`
===> Этап 4. Шаг 0. Проверка свободных членов на целочисленность.`),e.push(`Все свободные члены b целые ? Ответ:${m}`),a=i(a);!m;){e.push(`
===> Начало итерации N${l}`),e.push(`
===> Этап 4. Шаг 1. Исходная таблица`),e.push(...se(a)),e.push(`
===> Этап 4. Шаг 2. Формирование нового ограничения`);const g=s(a);a=o(a,g),e.push(...se(a)),e.push(`
===> Этап 4. Шаг 3. Поиск ведущей строки и столбца`);const c=r(g);e.push(`
===> Этап 4. Шаг 4. Расчет новой симплекс таблицы `),a=i(mt(a,c)),e.push(...se(a)),e.push(`
===> Этап 4. Шаг 4. Проверка свободных членов на целочисленность.`),m=n(a),e.push(`Все свободные члены b целые ? Ответ: ${m}`),e.push(`
===> Конец итерации N${l}`),l++}return a}const In=t=>{const e=t.allowanceSawing*2*t.rawWorkPiece.size.h,n=[];n.push(`
===> Этап 0. Подготовка данных и коэффициентов `),n.push(`Припуск распила: ${t.allowanceSawing}`),n.push(`Площадь допуска распила: ${e}`),n.push(`
Таблица заготовок и их параметров`),n.push(..._n(t.rawWorkPiece,t.listOrders));const i=gn(t.rawWorkPiece.square,t.listOrders,e);n.push(`
===> Этап 0. Шаг 1. Варианты раскроя изделия исходя из начальных условий.`),n.push(`Количество комбинаций: ${i.length}`),n.push(`
===> Этап 1. Переход к канонической форме задачи линейного программирования путем введения неотрицательных дополнительных балансовых переменных.`);const s=pn(i,t.listOrders);n.push(`
===> Этап 1. Шаг 1. Получение матрицы коэффициентов`),n.push(...ft(s));const r=wn(s);n.push(`
===> Этап 1. Шаг 2. Переход к канонической форме задачи линейного программирования путем введения неотрицательных дополнительных балансовых переменных.`),n.push(...ft(r,!0)),n.push(`
===> Этап 2. Основной алгоритм решения задачи ЛП симплекс-методом. Расчет новой симплекс таблицы. `),n.push(`
===> Этап 2. Шаг 0. Инициализация симплекс таблицы`);const o=vn(r);n.push(...se(o));const l=Cn(o,n);n.push(`
===> Этап 3. Основной алгоритм решения задачи ЛП симплекс-методом. Расчет новой симплекс таблицы. `);const a=kn(l,n);n.push(...se(a)),n.push(...Xt(a,t.rawWorkPiece,t.listOrders,s).map(g=>`
${g}`)),n.push(`
===> Этап 4. Алгоритм поиска целочисленного решения ЗЛП методом Гомори `);const m=En(a,n);return n.push(...Xt(m,t.rawWorkPiece,t.listOrders,s).map(g=>`
${g}`)),n};function yn(t){let e,n;return{c(){e=k("label"),n=G(t[1]),this.h()},l(i){e=E(i,"LABEL",{for:!0,class:!0});var s=I(e);n=U(s,t[1]),s.forEach(_),this.h()},h(){b(e,"for",t[0]),b(e,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white")},m(i,s){he(i,e,s),h(e,n)},p(i,[s]){s&2&&nn(n,i[1]),s&1&&b(e,"for",i[0])},i:Te,o:Te,d(i){i&&_(e)}}}function Fn(t,e,n){let{forName:i}=e,{text:s}=e;return t.$$set=r=>{"forName"in r&&n(0,i=r.forName),"text"in r&&n(1,s=r.text)},[i,s]}class xn extends Oe{constructor(e){super(),Be(this,e,Fn,yn,He,{forName:0,text:1})}}function Sn(t){let e,n,i,s,r;e=new xn({props:{forName:t[1],text:t[6]}});function o(a){t[7](a)}let l={id:t[1],type:t[3],placeholder:t[2],required:t[4],onChange:t[5]};return t[0]!==void 0&&(l.value=t[0]),i=new Pe({props:l}),oe.push(()=>ce(i,"value",o)),{c(){Y(e.$$.fragment),n=z(),Y(i.$$.fragment)},l(a){J(e.$$.fragment,a),n=q(a),J(i.$$.fragment,a)},m(a,m){Z(e,a,m),he(a,n,m),Z(i,a,m),r=!0},p(a,[m]){const g={};m&2&&(g.forName=a[1]),m&64&&(g.text=a[6]),e.$set(g);const c={};m&2&&(c.id=a[1]),m&8&&(c.type=a[3]),m&4&&(c.placeholder=a[2]),m&16&&(c.required=a[4]),m&32&&(c.onChange=a[5]),!s&&m&1&&(s=!0,c.value=a[0],ue(()=>s=!1)),i.$set(c)},i(a){r||(O(e.$$.fragment,a),O(i.$$.fragment,a),r=!0)},o(a){W(e.$$.fragment,a),W(i.$$.fragment,a),r=!1},d(a){M(e,a),a&&_(n),M(i,a)}}}function Tn(t,e,n){let{id:i=""}=e,{placeholder:s=""}=e,{type:r="text"}=e,{required:o=!1}=e,{value:l}=e,{onChange:a=void 0}=e,{label:m=""}=e;function g(c){l=c,n(0,l)}return t.$$set=c=>{"id"in c&&n(1,i=c.id),"placeholder"in c&&n(2,s=c.placeholder),"type"in c&&n(3,r=c.type),"required"in c&&n(4,o=c.required),"value"in c&&n(0,l=c.value),"onChange"in c&&n(5,a=c.onChange),"label"in c&&n(6,m=c.label)},[l,i,s,r,o,a,m,g]}class Ue extends Oe{constructor(e){super(),Be(this,e,Tn,Sn,He,{id:1,placeholder:2,type:3,required:4,value:0,onChange:5,label:6})}}function Gt(t,e,n){const i=t.slice();return i[15]=e[n],i[16]=e,i[17]=n,i}function Ut(t){let e,n,i=t[17]+1+"",s,r,o,l,a,m,g,c,d,w,f,u,C,F,p,y,S,B,le;function ze(x){t[10](x,t[15])}let ee={type:"text",id:"namePiece",placeholder:"Наименования детали..."};t[15].blank.name!==void 0&&(ee.value=t[15].blank.name),l=new Pe({props:ee}),oe.push(()=>ce(l,"value",ze));function K(x){t[11](x,t[15])}let Ce={type:"number",id:"lengthAPiece",placeholder:"Длина верхнего основания детали..."};t[15].blank.size.a!==void 0&&(Ce.value=t[15].blank.size.a),c=new Pe({props:Ce}),oe.push(()=>ce(c,"value",K));function qe(x){t[12](x,t[15])}let j={type:"number",id:"lengthCPiece",placeholder:"Длина нижнего основания детали..."};t[15].blank.size.c!==void 0&&(j.value=t[15].blank.size.c),u=new Pe({props:j}),oe.push(()=>ce(u,"value",qe));function De(x){t[13](x,t[15])}let te={type:"number",id:"volumePiece",placeholder:"Количество деталей данного типа..."};return t[15].volume!==void 0&&(te.value=t[15].volume),y=new Pe({props:te}),oe.push(()=>ce(y,"value",De)),{c(){e=k("tr"),n=k("th"),s=G(i),r=z(),o=k("td"),Y(l.$$.fragment),m=z(),g=k("td"),Y(c.$$.fragment),w=z(),f=k("td"),Y(u.$$.fragment),F=z(),p=k("td"),Y(y.$$.fragment),B=z(),this.h()},l(x){e=E(x,"TR",{class:!0});var D=I(e);n=E(D,"TH",{scope:!0,class:!0});var ne=I(n);s=U(ne,i),ne.forEach(_),r=q(D),o=E(D,"TD",{class:!0});var P=I(o);J(l.$$.fragment,P),P.forEach(_),m=q(D),g=E(D,"TD",{class:!0});var X=I(g);J(c.$$.fragment,X),X.forEach(_),w=q(D),f=E(D,"TD",{class:!0});var re=I(f);J(u.$$.fragment,re),re.forEach(_),F=q(D),p=E(D,"TD",{class:!0});var ke=I(p);J(y.$$.fragment,ke),ke.forEach(_),B=q(D),D.forEach(_),this.h()},h(){b(n,"scope","row"),b(n,"class","px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"),b(o,"class","px-6 py-4"),b(g,"class","px-6 py-4"),b(f,"class","px-6 py-4"),b(p,"class","px-6 py-4"),b(e,"class","bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-[gray]/5 dark:hover:bg-gray-600")},m(x,D){he(x,e,D),h(e,n),h(n,s),h(e,r),h(e,o),Z(l,o,null),h(e,m),h(e,g),Z(c,g,null),h(e,w),h(e,f),Z(u,f,null),h(e,F),h(e,p),Z(y,p,null),h(e,B),le=!0},p(x,D){t=x;const ne={};!a&&D&4&&(a=!0,ne.value=t[15].blank.name,ue(()=>a=!1)),l.$set(ne);const P={};!d&&D&4&&(d=!0,P.value=t[15].blank.size.a,ue(()=>d=!1)),c.$set(P);const X={};!C&&D&4&&(C=!0,X.value=t[15].blank.size.c,ue(()=>C=!1)),u.$set(X);const re={};!S&&D&4&&(S=!0,re.value=t[15].volume,ue(()=>S=!1)),y.$set(re)},i(x){le||(O(l.$$.fragment,x),O(c.$$.fragment,x),O(u.$$.fragment,x),O(y.$$.fragment,x),le=!0)},o(x){W(l.$$.fragment,x),W(c.$$.fragment,x),W(u.$$.fragment,x),W(y.$$.fragment,x),le=!1},d(x){x&&_(e),M(l),M(c),M(u),M(y)}}}function zn(t){let e,n,i,s,r,o,l,a,m,g,c,d,w,f,u,C,F,p,y,S,B,le,ze,ee,K,Ce,qe,j,De,te,x,D,ne,P,X,re,ke,ae,Ee,H,de,Qe,Ye,me,Je,Ze,be,Me,je,ge,Le,$e,pe,et,tt,Ie,nt,we,rt,st,ye,lt,at,Q,We,it,bt;function Yt(v){t[6](v)}let gt={label:"Имя",id:"nameWorkPiece",type:"text",placeholder:"Имя исходной заготовки...",required:!0};t[1].name!==void 0&&(gt.value=t[1].name),f=new Ue({props:gt}),oe.push(()=>ce(f,"value",Yt)),p=new Ue({props:{label:"Длина (a), м.",id:"lengthRawPiece",type:"number",placeholder:"Длина исходной заготовки(в метрах)...",value:t[1].size.a,onChange:t[7],required:!0}});function Jt(v){t[8](v)}let pt={label:"Ширина (h), м.",id:"widthRawPiece",type:"number",placeholder:"Ширина исходной заготовки (в метрах)...",required:!0};t[1].size.h!==void 0&&(pt.value=t[1].size.h),B=new Ue({props:pt}),oe.push(()=>ce(B,"value",Jt));function Zt(v){t[9](v)}let wt={label:"Припуск, м.",id:"allowanceSawing",type:"number",placeholder:"Припуск при распиле (в метрах)...",required:!0};t[0]!==void 0&&(wt.value=t[0]),K=new Ue({props:wt}),oe.push(()=>ce(K,"value",Zt)),j=new hn({props:{src:dn,class:"max-h-72 m-auto"}});let _e=t[2],T=[];for(let v=0;v<_e.length;v+=1)T[v]=Ut(Gt(t,_e,v));const Mt=v=>W(T[v],1,1,()=>{T[v]=null});return{c(){e=k("div"),n=k("div"),i=k("main"),s=k("div"),r=k("div"),o=k("section"),l=k("div"),a=k("h2"),m=G("Параметры исходной заготовки для распила"),g=z(),c=k("form"),d=k("div"),w=k("div"),Y(f.$$.fragment),C=z(),F=k("div"),Y(p.$$.fragment),y=z(),S=k("div"),Y(B.$$.fragment),ze=z(),ee=k("div"),Y(K.$$.fragment),qe=z(),Y(j.$$.fragment),De=z(),te=k("div"),x=k("button"),D=G("Запустить расчет"),ne=z(),P=k("div"),X=k("h2"),re=G("Список требуемых деталей из заказа"),ke=z(),ae=k("table"),Ee=k("thead"),H=k("tr"),de=k("th"),Qe=G("№"),Ye=z(),me=k("th"),Je=G("Имя"),Ze=z(),be=k("th"),Me=G("Длина верхнего основания (a), м."),je=z(),ge=k("th"),Le=G("Длина нижнего основания (c), м."),$e=z(),pe=k("th"),et=G("Количество, шт."),tt=z(),Ie=k("tbody");for(let v=0;v<T.length;v+=1)T[v].c();nt=z(),we=k("button"),rt=G("+ Добавить деталь"),st=z(),ye=k("h2"),lt=G("Результаты вычислений"),at=z(),Q=k("div"),this.h()},l(v){e=E(v,"DIV",{class:!0});var N=I(e);n=E(N,"DIV",{class:!0});var L=I(n);i=E(L,"MAIN",{class:!0});var Fe=I(i);s=E(Fe,"DIV",{class:!0});var Re=I(s);r=E(Re,"DIV",{class:!0});var V=I(r);o=E(V,"SECTION",{class:!0});var A=I(o);l=E(A,"DIV",{class:!0});var ve=I(l);a=E(ve,"H2",{class:!0});var _t=I(a);m=U(_t,"Параметры исходной заготовки для распила"),_t.forEach(_),g=q(ve),c=E(ve,"FORM",{action:!0});var vt=I(c);d=E(vt,"DIV",{class:!0});var ie=I(d);w=E(ie,"DIV",{class:!0});var Ct=I(w);J(f.$$.fragment,Ct),Ct.forEach(_),C=q(ie),F=E(ie,"DIV",{class:!0});var kt=I(F);J(p.$$.fragment,kt),kt.forEach(_),y=q(ie),S=E(ie,"DIV",{class:!0});var Et=I(S);J(B.$$.fragment,Et),Et.forEach(_),ze=q(ie),ee=E(ie,"DIV",{class:!0});var It=I(ee);J(K.$$.fragment,It),It.forEach(_),ie.forEach(_),vt.forEach(_),ve.forEach(_),A.forEach(_),qe=q(V),J(j.$$.fragment,V),De=q(V),te=E(V,"DIV",{class:!0});var yt=I(te);x=E(yt,"BUTTON",{class:!0});var Ft=I(x);D=U(Ft,"Запустить расчет"),Ft.forEach(_),yt.forEach(_),ne=q(V),P=E(V,"DIV",{class:!0});var xe=I(P);X=E(xe,"H2",{class:!0});var xt=I(X);re=U(xt,"Список требуемых деталей из заказа"),xt.forEach(_),ke=q(xe),ae=E(xe,"TABLE",{class:!0});var Xe=I(ae);Ee=E(Xe,"THEAD",{class:!0});var St=I(Ee);H=E(St,"TR",{});var $=I(H);de=E($,"TH",{scope:!0,class:!0});var Tt=I(de);Qe=U(Tt,"№"),Tt.forEach(_),Ye=q($),me=E($,"TH",{scope:!0,class:!0});var zt=I(me);Je=U(zt,"Имя"),zt.forEach(_),Ze=q($),be=E($,"TH",{scope:!0,class:!0});var qt=I(be);Me=U(qt,"Длина верхнего основания (a), м."),qt.forEach(_),je=q($),ge=E($,"TH",{scope:!0,class:!0});var Dt=I(ge);Le=U(Dt,"Длина нижнего основания (c), м."),Dt.forEach(_),$e=q($),pe=E($,"TH",{scope:!0,class:!0});var Rt=I(pe);et=U(Rt,"Количество, шт."),Rt.forEach(_),$.forEach(_),St.forEach(_),tt=q(Xe),Ie=E(Xe,"TBODY",{});var Nt=I(Ie);for(let ot=0;ot<T.length;ot+=1)T[ot].l(Nt);Nt.forEach(_),Xe.forEach(_),nt=q(xe),we=E(xe,"BUTTON",{class:!0});var At=I(we);rt=U(At,"+ Добавить деталь"),At.forEach(_),xe.forEach(_),st=q(V),ye=E(V,"H2",{class:!0});var Pt=I(ye);lt=U(Pt,"Результаты вычислений"),Pt.forEach(_),at=q(V),Q=E(V,"DIV",{id:!0,contenteditable:!0}),I(Q).forEach(_),V.forEach(_),Re.forEach(_),Fe.forEach(_),L.forEach(_),N.forEach(_),this.h()},h(){b(a,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),b(w,"class","sm:col-span-2"),b(F,"class","w-full"),b(S,"class","w-full"),b(ee,"class","w-full"),b(d,"class","grid gap-4 sm:grid-cols-2 sm:gap-6"),b(c,"action","#"),b(l,"class","py-8 px-4 mx-auto max-w-2xl lg:py-16"),b(o,"class","bg-white dark:bg-gray-900"),b(x,"class","inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center float-right text-white bg-primary-600 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-700"),b(te,"class","relative overflow-x-auto"),b(X,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),b(de,"scope","col"),b(de,"class","px-6 py-3"),b(me,"scope","col"),b(me,"class","px-6 py-3"),b(be,"scope","col"),b(be,"class","px-6 py-3"),b(ge,"scope","col"),b(ge,"class","px-6 py-3"),b(pe,"scope","col"),b(pe,"class","px-6 py-3"),b(Ee,"class","text-xs text-gray-600 uppercase bg-gray-50 dark:bg-gray-600 dark:text-gray-400"),b(ae,"class","w-full text-sm text-left text-gray-500 dark:text-gray-400"),b(we,"class","inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center float-right text-white bg-primary-600 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-700"),b(P,"class","relative overflow-x-auto"),b(ye,"class","mb-4 text-xl font-bold text-gray-900 dark:text-white"),b(Q,"id","log"),b(Q,"contenteditable","true"),t[3]===void 0&&rn(()=>t[14].call(Q)),b(r,"class","flex-auto max-w-8xl min-w-0 pt-6 lg:px-8 lg:pt-8 pb:12 xl:pb-24 lg:pb-16"),b(s,"class","flex w-full"),b(i,"class","flex-auto w-full min-w-0 lg:static lg:max-h-full lg:overflow-visible"),b(n,"class","lg:flex"),b(e,"class","w-full px-4 mx-auto max-w-8xl")},m(v,N){he(v,e,N),h(e,n),h(n,i),h(i,s),h(s,r),h(r,o),h(o,l),h(l,a),h(a,m),h(l,g),h(l,c),h(c,d),h(d,w),Z(f,w,null),h(d,C),h(d,F),Z(p,F,null),h(d,y),h(d,S),Z(B,S,null),h(d,ze),h(d,ee),Z(K,ee,null),h(r,qe),Z(j,r,null),h(r,De),h(r,te),h(te,x),h(x,D),h(r,ne),h(r,P),h(P,X),h(X,re),h(P,ke),h(P,ae),h(ae,Ee),h(Ee,H),h(H,de),h(de,Qe),h(H,Ye),h(H,me),h(me,Je),h(H,Ze),h(H,be),h(be,Me),h(H,je),h(H,ge),h(ge,Le),h(H,$e),h(H,pe),h(pe,et),h(ae,tt),h(ae,Ie);for(let L=0;L<T.length;L+=1)T[L]&&T[L].m(Ie,null);h(P,nt),h(P,we),h(we,rt),h(r,st),h(r,ye),h(ye,lt),h(r,at),h(r,Q),t[3]!==void 0&&(Q.innerHTML=t[3]),We=!0,it||(bt=[Ve(x,"click",t[5]),Ve(we,"click",t[4]),Ve(Q,"input",t[14])],it=!0)},p(v,[N]){const L={};!u&&N&2&&(u=!0,L.value=v[1].name,ue(()=>u=!1)),f.$set(L);const Fe={};N&2&&(Fe.value=v[1].size.a),N&2&&(Fe.onChange=v[7]),p.$set(Fe);const Re={};!le&&N&2&&(le=!0,Re.value=v[1].size.h,ue(()=>le=!1)),B.$set(Re);const V={};if(!Ce&&N&1&&(Ce=!0,V.value=v[0],ue(()=>Ce=!1)),K.$set(V),N&4){_e=v[2];let A;for(A=0;A<_e.length;A+=1){const ve=Gt(v,_e,A);T[A]?(T[A].p(ve,N),O(T[A],1)):(T[A]=Ut(ve),T[A].c(),O(T[A],1),T[A].m(Ie,null))}for(an(),A=_e.length;A<T.length;A+=1)Mt(A);sn()}N&8&&v[3]!==Q.innerHTML&&(Q.innerHTML=v[3])},i(v){if(!We){O(f.$$.fragment,v),O(p.$$.fragment,v),O(B.$$.fragment,v),O(K.$$.fragment,v),O(j.$$.fragment,v);for(let N=0;N<_e.length;N+=1)O(T[N]);We=!0}},o(v){W(f.$$.fragment,v),W(p.$$.fragment,v),W(B.$$.fragment,v),W(K.$$.fragment,v),W(j.$$.fragment,v),T=T.filter(Boolean);for(let N=0;N<T.length;N+=1)W(T[N]);We=!1},d(v){v&&_(e),M(f),M(p),M(B),M(K),M(j),ln(T,v),it=!1,Kt(bt)}}}let Ae=.2;function qn(t,e,n){let i=0,s=new Se({name:"Основная",size:new Ne({a:8,c:8,h:Ae})}),r=[new Ge({blank:new Se({name:"Деталь 2м",size:new Ne({a:2,c:2,h:Ae})}),volume:20}),new Ge({blank:new Se({name:"Деталь 3м",size:new Ne({a:3,c:3,h:Ae})}),volume:15}),new Ge({blank:new Se({name:"Деталь 5м",size:new Ne({a:5,c:5,h:Ae})}),volume:30})];const o=()=>{const p=new Ge({blank:new Se({name:`Деталь №${r.length+1}`,size:new Ne({a:0,c:0,h:Ae})}),volume:0});n(2,r=[...r,p])};let l="";const a=()=>{if(i>=0&&s.name.length>0&&s.size.a&&s.size.c&&s.size.h){const p=[],y=S=>S.volume>0&&S.blank.size.a>0&&S.blank.size.c>0;r.forEach(S=>{S.blank.size.h=s.size.h,y(S)&&p.push(S)}),n(2,r=p),p.length?(console.log({allowanceSawing:i,rawWorkPiece:s,listOrders:p}),n(3,l=In({allowanceSawing:i,rawWorkPiece:s,listOrders:p}).map(S=>S.includes("===>")?`<p class='mt-2 font-bold'>${S}</p>`:`<p '>${S}</p>`).join(""))):alert("Внимание! Нет валидных деталей для выполнения алгоритма. Скорее всего не все поля были заполнены.")}else alert("Внимание! Не корректно заполнены параметры исходной заготовки.")};function m(p){t.$$.not_equal(s.name,p)&&(s.name=p,n(1,s))}const g=p=>s.size.changeBothLength(p);function c(p){t.$$.not_equal(s.size.h,p)&&(s.size.h=p,n(1,s))}function d(p){i=p,n(0,i)}function w(p,y){t.$$.not_equal(y.blank.name,p)&&(y.blank.name=p,n(2,r))}function f(p,y){t.$$.not_equal(y.blank.size.a,p)&&(y.blank.size.a=p,n(2,r))}function u(p,y){t.$$.not_equal(y.blank.size.c,p)&&(y.blank.size.c=p,n(2,r))}function C(p,y){t.$$.not_equal(y.volume,p)&&(y.volume=p,n(2,r))}function F(){l=this.innerHTML,n(3,l)}return[i,s,r,l,o,a,m,g,c,d,w,f,u,C,F]}class An extends Oe{constructor(e){super(),Be(this,e,qn,zn,He,{})}}export{An as component};
